(function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))s(l);new MutationObserver(l=>{for(const f of l)if(f.type==="childList")for(const d of f.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&s(d)}).observe(document,{childList:!0,subtree:!0});function n(l){const f={};return l.integrity&&(f.integrity=l.integrity),l.referrerPolicy&&(f.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?f.credentials="include":l.crossOrigin==="anonymous"?f.credentials="omit":f.credentials="same-origin",f}function s(l){if(l.ep)return;l.ep=!0;const f=n(l);fetch(l.href,f)}})();/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Xe{}function q(r,i){const n=/\{([^}]+)\}/g;return r.replace(n,(s,l)=>{if(Object.prototype.hasOwnProperty.call(i,l)){const f=i[l];return f!=null?String(f):""}else throw new Error(`Key '${l}' not found in valueMap.`)})}function u(r,i,n){for(let f=0;f<i.length-1;f++){const d=i[f];if(d.endsWith("[]")){const p=d.slice(0,-2);if(!(p in r))if(Array.isArray(n))r[p]=Array.from({length:n.length},()=>({}));else throw new Error(`Value must be a list given an array path ${d}`);if(Array.isArray(r[p])){const _=r[p];if(Array.isArray(n))for(let v=0;v<_.length;v++){const T=_[v];u(T,i.slice(f+1),n[v])}else for(const v of _)u(v,i.slice(f+1),n)}return}else if(d.endsWith("[0]")){const p=d.slice(0,-3);p in r||(r[p]=[{}]);const _=r[p];u(_[0],i.slice(f+1),n);return}(!r[d]||typeof r[d]!="object")&&(r[d]={}),r=r[d]}const s=i[i.length-1],l=r[s];if(l!==void 0){if(!n||typeof n=="object"&&Object.keys(n).length===0||n===l)return;if(typeof l=="object"&&typeof n=="object"&&l!==null&&n!==null)Object.assign(l,n);else throw new Error(`Cannot set value for an existing key. Key: ${s}`)}else r[s]=n}function h(r,i){try{if(i.length===1&&i[0]==="_self")return r;for(let n=0;n<i.length;n++){if(typeof r!="object"||r===null)return;const s=i[n];if(s.endsWith("[]")){const l=s.slice(0,-2);if(l in r){const f=r[l];return Array.isArray(f)?f.map(d=>h(d,i.slice(n+1))):void 0}else return}else r=r[s]}return r}catch(n){if(n instanceof TypeError)return;throw n}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function pt(r,i){if(!i||typeof i!="string")throw new Error("model is required and must be a string");if(r.isVertexAI()){if(i.startsWith("publishers/")||i.startsWith("projects/")||i.startsWith("models/"))return i;if(i.indexOf("/")>=0){const n=i.split("/",2);return`publishers/${n[0]}/models/${n[1]}`}else return`publishers/google/models/${i}`}else return i.startsWith("models/")||i.startsWith("tunedModels/")?i:`models/${i}`}function Zo(r,i){const n=pt(r,i);return n?n.startsWith("publishers/")&&r.isVertexAI()?`projects/${r.getProject()}/locations/${r.getLocation()}/${n}`:n.startsWith("models/")&&r.isVertexAI()?`projects/${r.getProject()}/locations/${r.getLocation()}/publishers/google/${n}`:n:""}function Ji(r,i){if(i==null)throw new Error("PartUnion is required");if(typeof i=="object")return i;if(typeof i=="string")return{text:i};throw new Error(`Unsupported part type: ${typeof i}`)}function we(r,i){if(i==null||Array.isArray(i)&&i.length===0)throw new Error("PartListUnion is required");return Array.isArray(i)?i.map(n=>Ji(r,n)):[Ji(r,i)]}function Vo(r){return r!=null&&typeof r=="object"&&"parts"in r&&Array.isArray(r.parts)}function Ir(r){return r!=null&&typeof r=="object"&&"functionCall"in r}function zn(r){return!(r==null||Ir(r))}function Uo(r){return r==null||Array.isArray(r)&&r.length===0?!1:r.every(zn)}function yt(r,i){if(i==null)throw new Error("ContentUnion is required");return Vo(i)?i:zn(i)?{role:"user",parts:we(r,i)}:{role:"model",parts:we(r,i)}}function qo(r,i){if(!i)return[];if(r.isVertexAI()&&Array.isArray(i))return i.flatMap(n=>{const s=yt(r,n);return s.parts&&s.parts.length>0&&s.parts[0].text!==void 0?[s.parts[0].text]:[]});if(r.isVertexAI()){const n=yt(r,i);return n.parts&&n.parts.length>0&&n.parts[0].text!==void 0?[n.parts[0].text]:[]}return Array.isArray(i)?i.map(n=>yt(r,n)):[yt(r,i)]}function He(r,i,n){n.length!==0&&(Uo(n)?i.push({role:"user",parts:we(r,n)}):i.push({role:"model",parts:we(r,n)}),n.length=0)}function Ar(r,i,n,s){zn(s)===Uo(n)||(He(r,i,n),n.length=0),n.push(s)}function $(r,i){if(i==null||Array.isArray(i)&&i.length===0)throw new Error("contents are required");if(!Array.isArray(i))return[yt(r,i)];const n=[],s=[];for(const l of i)if(Vo(l))He(r,n,s),n.push(l);else if(typeof l=="string"||typeof l=="object"&&!Array.isArray(l))Ar(r,n,s,l);else if(Array.isArray(l))He(r,n,s),n.push({role:"user",parts:we(r,l)});else throw new Error(`Unsupported content type: ${typeof l}`);return He(r,n,s),n}function We(r,i){if(!r.isVertexAI()&&"default"in i)throw new Error("Default value is not supported in the response schema for the Gemini API.");if("anyOf"in i&&i.anyOf!==void 0)for(const n of i.anyOf)We(r,n);if("items"in i&&i.items!==void 0&&We(r,i.items),"properties"in i&&i.properties!==void 0)for(const n of Object.values(i.properties))We(r,n)}function Go(r,i){return We(r,i),i}function Ho(r,i){if(typeof i=="object"&&"voiceConfig"in i)return i;if(typeof i=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:i}}};throw new Error(`Unsupported speechConfig type: ${typeof i}`)}function Wo(r,i){return i}function ne(r,i){if(!Array.isArray(i))throw new Error("tool is required and must be an array of Tools");return i}function Rr(r,i,n,s=1){const l=!i.startsWith(`${n}/`)&&i.split("/").length===s;return r.isVertexAI()?i.startsWith("projects/")?i:i.startsWith("locations/")?`projects/${r.getProject()}/${i}`:i.startsWith(`${n}/`)?`projects/${r.getProject()}/locations/${r.getLocation()}/${i}`:l?`projects/${r.getProject()}/locations/${r.getLocation()}/${n}/${i}`:i:l?`${n}/${i}`:i}function Ot(r,i){if(typeof i!="string")throw new Error("name must be a string");return Rr(r,i,"cachedContents")}function Ft(r,i){if(typeof i!="string")throw new Error("fromImageBytes must be a string");return i}function Ko(r,i){if(typeof i!="string")throw new Error("fromName must be a string");return i.startsWith("files/")?i.split("files/")[1]:i}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function kr(r,i){const n={};if(h(i,["videoMetadata"])!==void 0)throw new Error("videoMetadata parameter is not supported in Gemini API.");const s=h(i,["thought"]);s!=null&&u(n,["thought"],s);const l=h(i,["codeExecutionResult"]);l!=null&&u(n,["codeExecutionResult"],l);const f=h(i,["executableCode"]);f!=null&&u(n,["executableCode"],f);const d=h(i,["fileData"]);d!=null&&u(n,["fileData"],d);const p=h(i,["functionCall"]);p!=null&&u(n,["functionCall"],p);const _=h(i,["functionResponse"]);_!=null&&u(n,["functionResponse"],_);const v=h(i,["inlineData"]);v!=null&&u(n,["inlineData"],v);const T=h(i,["text"]);return T!=null&&u(n,["text"],T),n}function Xi(r,i){const n={},s=h(i,["parts"]);s!=null&&(Array.isArray(s)?u(n,["parts"],s.map(f=>kr(r,f))):u(n,["parts"],s));const l=h(i,["role"]);return l!=null&&u(n,["role"],l),n}function Nr(r,i){const n={};if(h(i,["response"])!==void 0)throw new Error("response parameter is not supported in Gemini API.");const s=h(i,["description"]);s!=null&&u(n,["description"],s);const l=h(i,["name"]);l!=null&&u(n,["name"],l);const f=h(i,["parameters"]);return f!=null&&u(n,["parameters"],f),n}function br(){return{}}function Dr(r,i){const n={},s=h(i,["mode"]);s!=null&&u(n,["mode"],s);const l=h(i,["dynamicThreshold"]);return l!=null&&u(n,["dynamicThreshold"],l),n}function Br(r,i){const n={},s=h(i,["dynamicRetrievalConfig"]);return s!=null&&u(n,["dynamicRetrievalConfig"],Dr(r,s)),n}function zr(r,i){const n={},s=h(i,["functionDeclarations"]);if(s!=null&&(Array.isArray(s)?u(n,["functionDeclarations"],s.map(p=>Nr(r,p))):u(n,["functionDeclarations"],s)),h(i,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");h(i,["googleSearch"])!=null&&u(n,["googleSearch"],br());const f=h(i,["googleSearchRetrieval"]);f!=null&&u(n,["googleSearchRetrieval"],Br(r,f));const d=h(i,["codeExecution"]);return d!=null&&u(n,["codeExecution"],d),n}function Or(r,i){const n={},s=h(i,["mode"]);s!=null&&u(n,["mode"],s);const l=h(i,["allowedFunctionNames"]);return l!=null&&u(n,["allowedFunctionNames"],l),n}function Fr(r,i){const n={},s=h(i,["functionCallingConfig"]);return s!=null&&u(n,["functionCallingConfig"],Or(r,s)),n}function Zr(r,i,n){const s={},l=h(i,["ttl"]);n!==void 0&&l!=null&&u(n,["ttl"],l);const f=h(i,["expireTime"]);n!==void 0&&f!=null&&u(n,["expireTime"],f);const d=h(i,["displayName"]);n!==void 0&&d!=null&&u(n,["displayName"],d);const p=h(i,["contents"]);n!==void 0&&p!=null&&(Array.isArray(p)?u(n,["contents"],$(r,$(r,p).map(w=>Xi(r,w)))):u(n,["contents"],$(r,p)));const _=h(i,["systemInstruction"]);n!==void 0&&_!=null&&u(n,["systemInstruction"],Xi(r,yt(r,_)));const v=h(i,["tools"]);n!==void 0&&v!=null&&(Array.isArray(v)?u(n,["tools"],v.map(w=>zr(r,w))):u(n,["tools"],v));const T=h(i,["toolConfig"]);return n!==void 0&&T!=null&&u(n,["toolConfig"],Fr(r,T)),s}function Vr(r,i){const n={},s=h(i,["model"]);s!=null&&u(n,["model"],Zo(r,s));const l=h(i,["config"]);return l!=null&&u(n,["config"],Zr(r,l,n)),n}function Ur(r,i){const n={},s=h(i,["name"]);s!=null&&u(n,["_url","name"],Ot(r,s));const l=h(i,["config"]);return l!=null&&u(n,["config"],l),n}function qr(r,i){const n={},s=h(i,["name"]);s!=null&&u(n,["_url","name"],Ot(r,s));const l=h(i,["config"]);return l!=null&&u(n,["config"],l),n}function Gr(r,i,n){const s={},l=h(i,["ttl"]);n!==void 0&&l!=null&&u(n,["ttl"],l);const f=h(i,["expireTime"]);return n!==void 0&&f!=null&&u(n,["expireTime"],f),s}function Hr(r,i){const n={},s=h(i,["name"]);s!=null&&u(n,["_url","name"],Ot(r,s));const l=h(i,["config"]);return l!=null&&u(n,["config"],Gr(r,l,n)),n}function Wr(r,i,n){const s={},l=h(i,["pageSize"]);n!==void 0&&l!=null&&u(n,["_query","pageSize"],l);const f=h(i,["pageToken"]);return n!==void 0&&f!=null&&u(n,["_query","pageToken"],f),s}function Kr(r,i){const n={},s=h(i,["config"]);return s!=null&&u(n,["config"],Wr(r,s,n)),n}function Yr(r,i){const n={},s=h(i,["videoMetadata"]);s!=null&&u(n,["videoMetadata"],s);const l=h(i,["thought"]);l!=null&&u(n,["thought"],l);const f=h(i,["codeExecutionResult"]);f!=null&&u(n,["codeExecutionResult"],f);const d=h(i,["executableCode"]);d!=null&&u(n,["executableCode"],d);const p=h(i,["fileData"]);p!=null&&u(n,["fileData"],p);const _=h(i,["functionCall"]);_!=null&&u(n,["functionCall"],_);const v=h(i,["functionResponse"]);v!=null&&u(n,["functionResponse"],v);const T=h(i,["inlineData"]);T!=null&&u(n,["inlineData"],T);const w=h(i,["text"]);return w!=null&&u(n,["text"],w),n}function Qi(r,i){const n={},s=h(i,["parts"]);s!=null&&(Array.isArray(s)?u(n,["parts"],s.map(f=>Yr(r,f))):u(n,["parts"],s));const l=h(i,["role"]);return l!=null&&u(n,["role"],l),n}function $r(r,i){const n={},s=h(i,["example"]);s!=null&&u(n,["example"],s);const l=h(i,["pattern"]);l!=null&&u(n,["pattern"],l);const f=h(i,["default"]);f!=null&&u(n,["default"],f);const d=h(i,["maxLength"]);d!=null&&u(n,["maxLength"],d);const p=h(i,["minLength"]);p!=null&&u(n,["minLength"],p);const _=h(i,["minProperties"]);_!=null&&u(n,["minProperties"],_);const v=h(i,["maxProperties"]);v!=null&&u(n,["maxProperties"],v);const T=h(i,["anyOf"]);T!=null&&u(n,["anyOf"],T);const w=h(i,["description"]);w!=null&&u(n,["description"],w);const x=h(i,["enum"]);x!=null&&u(n,["enum"],x);const E=h(i,["format"]);E!=null&&u(n,["format"],E);const I=h(i,["items"]);I!=null&&u(n,["items"],I);const S=h(i,["maxItems"]);S!=null&&u(n,["maxItems"],S);const D=h(i,["maximum"]);D!=null&&u(n,["maximum"],D);const G=h(i,["minItems"]);G!=null&&u(n,["minItems"],G);const O=h(i,["minimum"]);O!=null&&u(n,["minimum"],O);const F=h(i,["nullable"]);F!=null&&u(n,["nullable"],F);const et=h(i,["properties"]);et!=null&&u(n,["properties"],et);const ot=h(i,["propertyOrdering"]);ot!=null&&u(n,["propertyOrdering"],ot);const st=h(i,["required"]);st!=null&&u(n,["required"],st);const lt=h(i,["title"]);lt!=null&&u(n,["title"],lt);const ut=h(i,["type"]);return ut!=null&&u(n,["type"],ut),n}function Jr(r,i){const n={},s=h(i,["response"]);s!=null&&u(n,["response"],$r(r,s));const l=h(i,["description"]);l!=null&&u(n,["description"],l);const f=h(i,["name"]);f!=null&&u(n,["name"],f);const d=h(i,["parameters"]);return d!=null&&u(n,["parameters"],d),n}function Xr(){return{}}function Qr(r,i){const n={},s=h(i,["mode"]);s!=null&&u(n,["mode"],s);const l=h(i,["dynamicThreshold"]);return l!=null&&u(n,["dynamicThreshold"],l),n}function jr(r,i){const n={},s=h(i,["dynamicRetrievalConfig"]);return s!=null&&u(n,["dynamicRetrievalConfig"],Qr(r,s)),n}function ta(r,i){const n={},s=h(i,["functionDeclarations"]);s!=null&&(Array.isArray(s)?u(n,["functionDeclarations"],s.map(_=>Jr(r,_))):u(n,["functionDeclarations"],s));const l=h(i,["retrieval"]);l!=null&&u(n,["retrieval"],l),h(i,["googleSearch"])!=null&&u(n,["googleSearch"],Xr());const d=h(i,["googleSearchRetrieval"]);d!=null&&u(n,["googleSearchRetrieval"],jr(r,d));const p=h(i,["codeExecution"]);return p!=null&&u(n,["codeExecution"],p),n}function ea(r,i){const n={},s=h(i,["mode"]);s!=null&&u(n,["mode"],s);const l=h(i,["allowedFunctionNames"]);return l!=null&&u(n,["allowedFunctionNames"],l),n}function na(r,i){const n={},s=h(i,["functionCallingConfig"]);return s!=null&&u(n,["functionCallingConfig"],ea(r,s)),n}function ia(r,i,n){const s={},l=h(i,["ttl"]);n!==void 0&&l!=null&&u(n,["ttl"],l);const f=h(i,["expireTime"]);n!==void 0&&f!=null&&u(n,["expireTime"],f);const d=h(i,["displayName"]);n!==void 0&&d!=null&&u(n,["displayName"],d);const p=h(i,["contents"]);n!==void 0&&p!=null&&(Array.isArray(p)?u(n,["contents"],$(r,$(r,p).map(w=>Qi(r,w)))):u(n,["contents"],$(r,p)));const _=h(i,["systemInstruction"]);n!==void 0&&_!=null&&u(n,["systemInstruction"],Qi(r,yt(r,_)));const v=h(i,["tools"]);n!==void 0&&v!=null&&(Array.isArray(v)?u(n,["tools"],v.map(w=>ta(r,w))):u(n,["tools"],v));const T=h(i,["toolConfig"]);return n!==void 0&&T!=null&&u(n,["toolConfig"],na(r,T)),s}function oa(r,i){const n={},s=h(i,["model"]);s!=null&&u(n,["model"],Zo(r,s));const l=h(i,["config"]);return l!=null&&u(n,["config"],ia(r,l,n)),n}function sa(r,i){const n={},s=h(i,["name"]);s!=null&&u(n,["_url","name"],Ot(r,s));const l=h(i,["config"]);return l!=null&&u(n,["config"],l),n}function ra(r,i){const n={},s=h(i,["name"]);s!=null&&u(n,["_url","name"],Ot(r,s));const l=h(i,["config"]);return l!=null&&u(n,["config"],l),n}function aa(r,i,n){const s={},l=h(i,["ttl"]);n!==void 0&&l!=null&&u(n,["ttl"],l);const f=h(i,["expireTime"]);return n!==void 0&&f!=null&&u(n,["expireTime"],f),s}function la(r,i){const n={},s=h(i,["name"]);s!=null&&u(n,["_url","name"],Ot(r,s));const l=h(i,["config"]);return l!=null&&u(n,["config"],aa(r,l,n)),n}function ua(r,i,n){const s={},l=h(i,["pageSize"]);n!==void 0&&l!=null&&u(n,["_query","pageSize"],l);const f=h(i,["pageToken"]);return n!==void 0&&f!=null&&u(n,["_query","pageToken"],f),s}function ha(r,i){const n={},s=h(i,["config"]);return s!=null&&u(n,["config"],ua(r,s,n)),n}function Ke(r,i){const n={},s=h(i,["name"]);s!=null&&u(n,["name"],s);const l=h(i,["displayName"]);l!=null&&u(n,["displayName"],l);const f=h(i,["model"]);f!=null&&u(n,["model"],f);const d=h(i,["createTime"]);d!=null&&u(n,["createTime"],d);const p=h(i,["updateTime"]);p!=null&&u(n,["updateTime"],p);const _=h(i,["expireTime"]);_!=null&&u(n,["expireTime"],_);const v=h(i,["usageMetadata"]);return v!=null&&u(n,["usageMetadata"],v),n}function ca(){return{}}function fa(r,i){const n={},s=h(i,["nextPageToken"]);s!=null&&u(n,["nextPageToken"],s);const l=h(i,["cachedContents"]);return l!=null&&(Array.isArray(l)?u(n,["cachedContents"],l.map(f=>Ke(r,f))):u(n,["cachedContents"],l)),n}function Ye(r,i){const n={},s=h(i,["name"]);s!=null&&u(n,["name"],s);const l=h(i,["displayName"]);l!=null&&u(n,["displayName"],l);const f=h(i,["model"]);f!=null&&u(n,["model"],f);const d=h(i,["createTime"]);d!=null&&u(n,["createTime"],d);const p=h(i,["updateTime"]);p!=null&&u(n,["updateTime"],p);const _=h(i,["expireTime"]);_!=null&&u(n,["expireTime"],_);const v=h(i,["usageMetadata"]);return v!=null&&u(n,["usageMetadata"],v),n}function da(){return{}}function pa(r,i){const n={},s=h(i,["nextPageToken"]);s!=null&&u(n,["nextPageToken"],s);const l=h(i,["cachedContents"]);return l!=null&&(Array.isArray(l)?u(n,["cachedContents"],l.map(f=>Ye(r,f))):u(n,["cachedContents"],l)),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var $e;(function(r){r.PAGED_ITEM_BATCH_JOBS="batchJobs",r.PAGED_ITEM_MODELS="models",r.PAGED_ITEM_TUNING_JOBS="tuningJobs",r.PAGED_ITEM_FILES="files",r.PAGED_ITEM_CACHED_CONTENTS="cachedContents"})($e||($e={}));class Yo{constructor(i,n,s,l){this.pageInternal=[],this.paramsInternal={},this.requestInternal=n,this.init(i,s,l)}init(i,n,s){var l,f;this.nameInternal=i,this.pageInternal=n[this.nameInternal]||[],this.idxInternal=0;let d={config:{}};s?typeof s=="object"?d=Object.assign({},s):d=s:d={config:{}},d.config&&(d.config.pageToken=n.nextPageToken),this.paramsInternal=d,this.pageInternalSize=(f=(l=d.config)===null||l===void 0?void 0:l.pageSize)!==null&&f!==void 0?f:this.pageInternal.length}initNextPage(i){this.init(this.nameInternal,i,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(i){return this.pageInternal[i]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const i=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:i,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const i=await this.requestInternal(this.params);return this.initNextPage(i),this.page}hasNextPage(){var i;return((i=this.params.config)===null||i===void 0?void 0:i.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var ji;(function(r){r.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",r.OUTCOME_OK="OUTCOME_OK",r.OUTCOME_FAILED="OUTCOME_FAILED",r.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(ji||(ji={}));var to;(function(r){r.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",r.PYTHON="PYTHON"})(to||(to={}));var Te;(function(r){r.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",r.STRING="STRING",r.NUMBER="NUMBER",r.INTEGER="INTEGER",r.BOOLEAN="BOOLEAN",r.ARRAY="ARRAY",r.OBJECT="OBJECT"})(Te||(Te={}));var eo;(function(r){r.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",r.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",r.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",r.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",r.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",r.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY"})(eo||(eo={}));var no;(function(r){r.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",r.SEVERITY="SEVERITY",r.PROBABILITY="PROBABILITY"})(no||(no={}));var io;(function(r){r.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",r.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",r.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",r.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",r.BLOCK_NONE="BLOCK_NONE",r.OFF="OFF"})(io||(io={}));var oo;(function(r){r.MODE_UNSPECIFIED="MODE_UNSPECIFIED",r.MODE_DYNAMIC="MODE_DYNAMIC"})(oo||(oo={}));var so;(function(r){r.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",r.STOP="STOP",r.MAX_TOKENS="MAX_TOKENS",r.SAFETY="SAFETY",r.RECITATION="RECITATION",r.OTHER="OTHER",r.BLOCKLIST="BLOCKLIST",r.PROHIBITED_CONTENT="PROHIBITED_CONTENT",r.SPII="SPII",r.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",r.IMAGE_SAFETY="IMAGE_SAFETY"})(so||(so={}));var ro;(function(r){r.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",r.NEGLIGIBLE="NEGLIGIBLE",r.LOW="LOW",r.MEDIUM="MEDIUM",r.HIGH="HIGH"})(ro||(ro={}));var ao;(function(r){r.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",r.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",r.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",r.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",r.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(ao||(ao={}));var lo;(function(r){r.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",r.SAFETY="SAFETY",r.OTHER="OTHER",r.BLOCKLIST="BLOCKLIST",r.PROHIBITED_CONTENT="PROHIBITED_CONTENT"})(lo||(lo={}));var uo;(function(r){r.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",r.TEXT="TEXT",r.IMAGE="IMAGE",r.AUDIO="AUDIO"})(uo||(uo={}));var ho;(function(r){r.STATE_UNSPECIFIED="STATE_UNSPECIFIED",r.ACTIVE="ACTIVE",r.ERROR="ERROR"})(ho||(ho={}));var co;(function(r){r.MODE_UNSPECIFIED="MODE_UNSPECIFIED",r.MODE_DYNAMIC="MODE_DYNAMIC"})(co||(co={}));var fo;(function(r){r.MODE_UNSPECIFIED="MODE_UNSPECIFIED",r.AUTO="AUTO",r.ANY="ANY",r.NONE="NONE"})(fo||(fo={}));var po;(function(r){r.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",r.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",r.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",r.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(po||(po={}));var mo;(function(r){r.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",r.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",r.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",r.BLOCK_NONE="BLOCK_NONE"})(mo||(mo={}));var _o;(function(r){r.DONT_ALLOW="DONT_ALLOW",r.ALLOW_ADULT="ALLOW_ADULT",r.ALLOW_ALL="ALLOW_ALL"})(_o||(_o={}));var go;(function(r){r.auto="auto",r.en="en",r.ja="ja",r.ko="ko",r.hi="hi"})(go||(go={}));var vo;(function(r){r.STATE_UNSPECIFIED="STATE_UNSPECIFIED",r.PROCESSING="PROCESSING",r.ACTIVE="ACTIVE",r.FAILED="FAILED"})(vo||(vo={}));var yo;(function(r){r.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",r.UPLOADED="UPLOADED",r.GENERATED="GENERATED"})(yo||(yo={}));var To;(function(r){r.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",r.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",r.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",r.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",r.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(To||(To={}));var Co;(function(r){r.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",r.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",r.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",r.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(Co||(Co={}));var wo;(function(r){r.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",r.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",r.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",r.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(wo||(wo={}));var Po;(function(r){r.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",r.TEXT="TEXT",r.IMAGE="IMAGE",r.VIDEO="VIDEO",r.AUDIO="AUDIO",r.DOCUMENT="DOCUMENT"})(Po||(Po={}));class Ge{get text(){var i,n,s,l,f,d,p,_;if(((l=(s=(n=(i=this.candidates)===null||i===void 0?void 0:i[0])===null||n===void 0?void 0:n.content)===null||s===void 0?void 0:s.parts)===null||l===void 0?void 0:l.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let v="",T=!1;const w=[];for(const x of(_=(p=(d=(f=this.candidates)===null||f===void 0?void 0:f[0])===null||d===void 0?void 0:d.content)===null||p===void 0?void 0:p.parts)!==null&&_!==void 0?_:[]){for(const[E,I]of Object.entries(x))E!=="text"&&E!=="thought"&&(I!==null||I!==void 0)&&w.push(E);if(typeof x.text=="string"){if(typeof x.thought=="boolean"&&x.thought)continue;T=!0,v+=x.text}}return w.length>0&&console.warn(`there are non-text parts ${w} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),T?v:void 0}get functionCalls(){var i,n,s,l,f,d,p,_;if(((l=(s=(n=(i=this.candidates)===null||i===void 0?void 0:i[0])===null||n===void 0?void 0:n.content)===null||s===void 0?void 0:s.parts)===null||l===void 0?void 0:l.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const v=(_=(p=(d=(f=this.candidates)===null||f===void 0?void 0:f[0])===null||d===void 0?void 0:d.content)===null||p===void 0?void 0:p.parts)===null||_===void 0?void 0:_.filter(T=>T.functionCall).map(T=>T.functionCall).filter(T=>T!==void 0);if((v==null?void 0:v.length)!==0)return v}get executableCode(){var i,n,s,l,f,d,p,_,v;if(((l=(s=(n=(i=this.candidates)===null||i===void 0?void 0:i[0])===null||n===void 0?void 0:n.content)===null||s===void 0?void 0:s.parts)===null||l===void 0?void 0:l.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const T=(_=(p=(d=(f=this.candidates)===null||f===void 0?void 0:f[0])===null||d===void 0?void 0:d.content)===null||p===void 0?void 0:p.parts)===null||_===void 0?void 0:_.filter(w=>w.executableCode).map(w=>w.executableCode).filter(w=>w!==void 0);if((T==null?void 0:T.length)!==0)return(v=T==null?void 0:T[0])===null||v===void 0?void 0:v.code}get codeExecutionResult(){var i,n,s,l,f,d,p,_,v;if(((l=(s=(n=(i=this.candidates)===null||i===void 0?void 0:i[0])===null||n===void 0?void 0:n.content)===null||s===void 0?void 0:s.parts)===null||l===void 0?void 0:l.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const T=(_=(p=(d=(f=this.candidates)===null||f===void 0?void 0:f[0])===null||d===void 0?void 0:d.content)===null||p===void 0?void 0:p.parts)===null||_===void 0?void 0:_.filter(w=>w.codeExecutionResult).map(w=>w.codeExecutionResult).filter(w=>w!==void 0);if((T==null?void 0:T.length)!==0)return(v=T==null?void 0:T[0])===null||v===void 0?void 0:v.output}}class xo{}class Eo{}class Mo{}class ma{}class Lo{}class So{}class _a{}class $o{constructor(i){const n={};for(const s of i.headers.entries())n[s[0]]=s[1];this.headers=n,this.responseInternal=i}json(){return this.responseInternal.json()}}class ga{}class va{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ya extends Xe{constructor(i){super(),this.apiClient=i,this.list=async(n={})=>new Yo($e.PAGED_ITEM_CACHED_CONTENTS,s=>this.listInternal(s),await this.listInternal(n),n)}async create(i){var n,s;let l,f="",d={};if(this.apiClient.isVertexAI()){const p=oa(this.apiClient,i);return f=q("cachedContents",p._url),d=p._query,delete p.config,delete p._url,delete p._query,l=this.apiClient.request({path:f,queryParams:d,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(n=i.config)===null||n===void 0?void 0:n.httpOptions}).then(_=>_.json()),l.then(_=>Ye(this.apiClient,_))}else{const p=Vr(this.apiClient,i);return f=q("cachedContents",p._url),d=p._query,delete p.config,delete p._url,delete p._query,l=this.apiClient.request({path:f,queryParams:d,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(s=i.config)===null||s===void 0?void 0:s.httpOptions}).then(_=>_.json()),l.then(_=>Ke(this.apiClient,_))}}async get(i){var n,s;let l,f="",d={};if(this.apiClient.isVertexAI()){const p=sa(this.apiClient,i);return f=q("{name}",p._url),d=p._query,delete p.config,delete p._url,delete p._query,l=this.apiClient.request({path:f,queryParams:d,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(n=i.config)===null||n===void 0?void 0:n.httpOptions}).then(_=>_.json()),l.then(_=>Ye(this.apiClient,_))}else{const p=Ur(this.apiClient,i);return f=q("{name}",p._url),d=p._query,delete p.config,delete p._url,delete p._query,l=this.apiClient.request({path:f,queryParams:d,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(s=i.config)===null||s===void 0?void 0:s.httpOptions}).then(_=>_.json()),l.then(_=>Ke(this.apiClient,_))}}async delete(i){var n,s;let l,f="",d={};if(this.apiClient.isVertexAI()){const p=ra(this.apiClient,i);return f=q("{name}",p._url),d=p._query,delete p.config,delete p._url,delete p._query,l=this.apiClient.request({path:f,queryParams:d,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(n=i.config)===null||n===void 0?void 0:n.httpOptions}).then(_=>_.json()),l.then(()=>{const _=da(),v=new Lo;return Object.assign(v,_),v})}else{const p=qr(this.apiClient,i);return f=q("{name}",p._url),d=p._query,delete p.config,delete p._url,delete p._query,l=this.apiClient.request({path:f,queryParams:d,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(s=i.config)===null||s===void 0?void 0:s.httpOptions}).then(_=>_.json()),l.then(()=>{const _=ca(),v=new Lo;return Object.assign(v,_),v})}}async update(i){var n,s;let l,f="",d={};if(this.apiClient.isVertexAI()){const p=la(this.apiClient,i);return f=q("{name}",p._url),d=p._query,delete p.config,delete p._url,delete p._query,l=this.apiClient.request({path:f,queryParams:d,body:JSON.stringify(p),httpMethod:"PATCH",httpOptions:(n=i.config)===null||n===void 0?void 0:n.httpOptions}).then(_=>_.json()),l.then(_=>Ye(this.apiClient,_))}else{const p=Hr(this.apiClient,i);return f=q("{name}",p._url),d=p._query,delete p.config,delete p._url,delete p._query,l=this.apiClient.request({path:f,queryParams:d,body:JSON.stringify(p),httpMethod:"PATCH",httpOptions:(s=i.config)===null||s===void 0?void 0:s.httpOptions}).then(_=>_.json()),l.then(_=>Ke(this.apiClient,_))}}async listInternal(i){var n,s;let l,f="",d={};if(this.apiClient.isVertexAI()){const p=ha(this.apiClient,i);return f=q("cachedContents",p._url),d=p._query,delete p.config,delete p._url,delete p._query,l=this.apiClient.request({path:f,queryParams:d,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(n=i.config)===null||n===void 0?void 0:n.httpOptions}).then(_=>_.json()),l.then(_=>{const v=pa(this.apiClient,_),T=new So;return Object.assign(T,v),T})}else{const p=Kr(this.apiClient,i);return f=q("cachedContents",p._url),d=p._query,delete p.config,delete p._url,delete p._query,l=this.apiClient.request({path:f,queryParams:d,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(s=i.config)===null||s===void 0?void 0:s.httpOptions}).then(_=>_.json()),l.then(_=>{const v=fa(this.apiClient,_),T=new So;return Object.assign(T,v),T})}}}function Io(r){var i=typeof Symbol=="function"&&Symbol.iterator,n=i&&r[i],s=0;if(n)return n.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&s>=r.length&&(r=void 0),{value:r&&r[s++],done:!r}}};throw new TypeError(i?"Object is not iterable.":"Symbol.iterator is not defined.")}function dt(r){return this instanceof dt?(this.v=r,this):new dt(r)}function Je(r,i,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var s=n.apply(r,i||[]),l,f=[];return l=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),p("next"),p("throw"),p("return",d),l[Symbol.asyncIterator]=function(){return this},l;function d(E){return function(I){return Promise.resolve(I).then(E,w)}}function p(E,I){s[E]&&(l[E]=function(S){return new Promise(function(D,G){f.push([E,S,D,G])>1||_(E,S)})},I&&(l[E]=I(l[E])))}function _(E,I){try{v(s[E](I))}catch(S){x(f[0][3],S)}}function v(E){E.value instanceof dt?Promise.resolve(E.value.v).then(T,w):x(f[0][2],E)}function T(E){_("next",E)}function w(E){_("throw",E)}function x(E,I){E(I),f.shift(),f.length&&_(f[0][0],f[0][1])}}function Dn(r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=r[Symbol.asyncIterator],n;return i?i.call(r):(r=typeof Io=="function"?Io(r):r[Symbol.iterator](),n={},s("next"),s("throw"),s("return"),n[Symbol.asyncIterator]=function(){return this},n);function s(f){n[f]=r[f]&&function(d){return new Promise(function(p,_){d=r[f](d),l(p,_,d.done,d.value)})}}function l(f,d,p,_){Promise.resolve(_).then(function(v){f({value:v,done:p})},d)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Ta(r){var i;if(r.candidates==null||r.candidates.length===0)return!1;const n=(i=r.candidates[0])===null||i===void 0?void 0:i.content;return n===void 0?!1:Jo(n)}function Jo(r){if(r.parts===void 0||r.parts.length===0)return!1;for(const i of r.parts)if(i===void 0||Object.keys(i).length===0||i.text!==void 0&&i.text==="")return!1;return!0}function Ca(r){if(r.length!==0){if(r[0].role!=="user")throw new Error("History must start with a user turn.");for(const i of r)if(i.role!=="user"&&i.role!=="model")throw new Error(`Role must be user or model, but got ${i.role}.`)}}function wa(r){if(r===void 0||r.length===0)return[];const i=[],n=r.length;let s=0,l=r[0];for(;s<n;)if(r[s].role==="user")l=r[s],s++;else{const f=[];let d=!0;for(;s<n&&r[s].role==="model";)f.push(r[s]),d&&!Jo(r[s])&&(d=!1),s++;d&&(i.push(l),i.push(...f))}return i}class Pa{constructor(i,n){this.modelsModule=i,this.apiClient=n}create(i){return new xa(this.apiClient,this.modelsModule,i.model,i.config,i.history)}}class xa{constructor(i,n,s,l={},f=[]){this.apiClient=i,this.modelsModule=n,this.model=s,this.config=l,this.history=f,this.sendPromise=Promise.resolve(),Ca(f)}async sendMessage(i){var n;await this.sendPromise;const s=yt(this.apiClient,i.message),l=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(s),config:(n=i.config)!==null&&n!==void 0?n:this.config});return this.sendPromise=(async()=>{var f,d;const _=(d=(f=(await l).candidates)===null||f===void 0?void 0:f[0])===null||d===void 0?void 0:d.content,v=_?[_]:[];this.recordHistory(s,v)})(),await this.sendPromise,l}async sendMessageStream(i){var n;await this.sendPromise;const s=yt(this.apiClient,i.message),l=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(s),config:(n=i.config)!==null&&n!==void 0?n:this.config});this.sendPromise=l.then(()=>{});const f=await l;return this.processStreamResponse(f,s)}getHistory(i=!1){return i?wa(this.history):this.history}processStreamResponse(i,n){var s,l;return Je(this,arguments,function*(){var d,p,_,v;const T=[];try{for(var w=!0,x=Dn(i),E;E=yield dt(x.next()),d=E.done,!d;w=!0){v=E.value,w=!1;const I=v;if(Ta(I)){const S=(l=(s=I.candidates)===null||s===void 0?void 0:s[0])===null||l===void 0?void 0:l.content;S!==void 0&&T.push(S)}yield yield dt(I)}}catch(I){p={error:I}}finally{try{!w&&!d&&(_=x.return)&&(yield dt(_.call(x)))}finally{if(p)throw p.error}}this.recordHistory(n,T)})}recordHistory(i,n){let s=[];n.length>0&&n.every(l=>l.role==="model")?s=n:s.push({role:"model",parts:[]}),this.history.push(i),this.history.push(...s)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Ea(r,i,n){const s={},l=h(i,["pageSize"]);n!==void 0&&l!=null&&u(n,["_query","pageSize"],l);const f=h(i,["pageToken"]);return n!==void 0&&f!=null&&u(n,["_query","pageToken"],f),s}function Ma(r,i){const n={},s=h(i,["config"]);return s!=null&&u(n,["config"],Ea(r,s,n)),n}function La(r,i){const n={},s=h(i,["details"]);s!=null&&u(n,["details"],s);const l=h(i,["message"]);l!=null&&u(n,["message"],l);const f=h(i,["code"]);return f!=null&&u(n,["code"],f),n}function Sa(r,i){const n={},s=h(i,["name"]);s!=null&&u(n,["name"],s);const l=h(i,["displayName"]);l!=null&&u(n,["displayName"],l);const f=h(i,["mimeType"]);f!=null&&u(n,["mimeType"],f);const d=h(i,["sizeBytes"]);d!=null&&u(n,["sizeBytes"],d);const p=h(i,["createTime"]);p!=null&&u(n,["createTime"],p);const _=h(i,["expirationTime"]);_!=null&&u(n,["expirationTime"],_);const v=h(i,["updateTime"]);v!=null&&u(n,["updateTime"],v);const T=h(i,["sha256Hash"]);T!=null&&u(n,["sha256Hash"],T);const w=h(i,["uri"]);w!=null&&u(n,["uri"],w);const x=h(i,["downloadUri"]);x!=null&&u(n,["downloadUri"],x);const E=h(i,["state"]);E!=null&&u(n,["state"],E);const I=h(i,["source"]);I!=null&&u(n,["source"],I);const S=h(i,["videoMetadata"]);S!=null&&u(n,["videoMetadata"],S);const D=h(i,["error"]);return D!=null&&u(n,["error"],La(r,D)),n}function Ia(r,i){const n={},s=h(i,["file"]);s!=null&&u(n,["file"],Sa(r,s));const l=h(i,["config"]);return l!=null&&u(n,["config"],l),n}function Aa(r,i){const n={},s=h(i,["name"]);s!=null&&u(n,["_url","file"],Ko(r,s));const l=h(i,["config"]);return l!=null&&u(n,["config"],l),n}function Ra(r,i){const n={},s=h(i,["name"]);s!=null&&u(n,["_url","file"],Ko(r,s));const l=h(i,["config"]);return l!=null&&u(n,["config"],l),n}function ka(r,i){const n={},s=h(i,["details"]);s!=null&&u(n,["details"],s);const l=h(i,["message"]);l!=null&&u(n,["message"],l);const f=h(i,["code"]);return f!=null&&u(n,["code"],f),n}function Bn(r,i){const n={},s=h(i,["name"]);s!=null&&u(n,["name"],s);const l=h(i,["displayName"]);l!=null&&u(n,["displayName"],l);const f=h(i,["mimeType"]);f!=null&&u(n,["mimeType"],f);const d=h(i,["sizeBytes"]);d!=null&&u(n,["sizeBytes"],d);const p=h(i,["createTime"]);p!=null&&u(n,["createTime"],p);const _=h(i,["expirationTime"]);_!=null&&u(n,["expirationTime"],_);const v=h(i,["updateTime"]);v!=null&&u(n,["updateTime"],v);const T=h(i,["sha256Hash"]);T!=null&&u(n,["sha256Hash"],T);const w=h(i,["uri"]);w!=null&&u(n,["uri"],w);const x=h(i,["downloadUri"]);x!=null&&u(n,["downloadUri"],x);const E=h(i,["state"]);E!=null&&u(n,["state"],E);const I=h(i,["source"]);I!=null&&u(n,["source"],I);const S=h(i,["videoMetadata"]);S!=null&&u(n,["videoMetadata"],S);const D=h(i,["error"]);return D!=null&&u(n,["error"],ka(r,D)),n}function Na(r,i){const n={},s=h(i,["nextPageToken"]);s!=null&&u(n,["nextPageToken"],s);const l=h(i,["files"]);return l!=null&&(Array.isArray(l)?u(n,["files"],l.map(f=>Bn(r,f))):u(n,["files"],l)),n}function ba(r,i){const n={},s=h(i,["httpHeaders"]);return s!=null&&u(n,["httpHeaders"],s),n}function Da(){return{}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Ba extends Xe{constructor(i){super(),this.apiClient=i,this.list=async(n={})=>new Yo($e.PAGED_ITEM_FILES,s=>this.listInternal(s),await this.listInternal(n),n)}async upload(i){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(i.file,i.config).then(n=>Bn(this.apiClient,n))}async listInternal(i){var n;let s,l="",f={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=Ma(this.apiClient,i);return l=q("files",d._url),f=d._query,delete d.config,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:f,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=i.config)===null||n===void 0?void 0:n.httpOptions}).then(p=>p.json()),s.then(p=>{const _=Na(this.apiClient,p),v=new _a;return Object.assign(v,_),v})}}async createInternal(i){var n;let s,l="",f={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=Ia(this.apiClient,i);return l=q("upload/v1beta/files",d._url),f=d._query,delete d.config,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:f,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=i.config)===null||n===void 0?void 0:n.httpOptions}).then(p=>p.json()),s.then(p=>{const _=ba(this.apiClient,p),v=new ga;return Object.assign(v,_),v})}}async get(i){var n;let s,l="",f={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=Aa(this.apiClient,i);return l=q("files/{file}",d._url),f=d._query,delete d.config,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:f,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=i.config)===null||n===void 0?void 0:n.httpOptions}).then(p=>p.json()),s.then(p=>Bn(this.apiClient,p))}}async delete(i){var n;let s,l="",f={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=Ra(this.apiClient,i);return l=q("files/{file}",d._url),f=d._query,delete d.config,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:f,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(n=i.config)===null||n===void 0?void 0:n.httpOptions}).then(p=>p.json()),s.then(()=>{const p=Da(),_=new va;return Object.assign(_,p),_})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function za(r,i){const n={};if(h(i,["videoMetadata"])!==void 0)throw new Error("videoMetadata parameter is not supported in Gemini API.");const s=h(i,["thought"]);s!=null&&u(n,["thought"],s);const l=h(i,["codeExecutionResult"]);l!=null&&u(n,["codeExecutionResult"],l);const f=h(i,["executableCode"]);f!=null&&u(n,["executableCode"],f);const d=h(i,["fileData"]);d!=null&&u(n,["fileData"],d);const p=h(i,["functionCall"]);p!=null&&u(n,["functionCall"],p);const _=h(i,["functionResponse"]);_!=null&&u(n,["functionResponse"],_);const v=h(i,["inlineData"]);v!=null&&u(n,["inlineData"],v);const T=h(i,["text"]);return T!=null&&u(n,["text"],T),n}function xe(r,i){const n={},s=h(i,["parts"]);s!=null&&(Array.isArray(s)?u(n,["parts"],s.map(f=>za(r,f))):u(n,["parts"],s));const l=h(i,["role"]);return l!=null&&u(n,["role"],l),n}function Oa(r,i){const n={};if(h(i,["example"])!==void 0)throw new Error("example parameter is not supported in Gemini API.");if(h(i,["pattern"])!==void 0)throw new Error("pattern parameter is not supported in Gemini API.");if(h(i,["default"])!==void 0)throw new Error("default parameter is not supported in Gemini API.");if(h(i,["maxLength"])!==void 0)throw new Error("maxLength parameter is not supported in Gemini API.");if(h(i,["minLength"])!==void 0)throw new Error("minLength parameter is not supported in Gemini API.");if(h(i,["minProperties"])!==void 0)throw new Error("minProperties parameter is not supported in Gemini API.");if(h(i,["maxProperties"])!==void 0)throw new Error("maxProperties parameter is not supported in Gemini API.");const s=h(i,["anyOf"]);s!=null&&u(n,["anyOf"],s);const l=h(i,["description"]);l!=null&&u(n,["description"],l);const f=h(i,["enum"]);f!=null&&u(n,["enum"],f);const d=h(i,["format"]);d!=null&&u(n,["format"],d);const p=h(i,["items"]);p!=null&&u(n,["items"],p);const _=h(i,["maxItems"]);_!=null&&u(n,["maxItems"],_);const v=h(i,["maximum"]);v!=null&&u(n,["maximum"],v);const T=h(i,["minItems"]);T!=null&&u(n,["minItems"],T);const w=h(i,["minimum"]);w!=null&&u(n,["minimum"],w);const x=h(i,["nullable"]);x!=null&&u(n,["nullable"],x);const E=h(i,["properties"]);E!=null&&u(n,["properties"],E);const I=h(i,["propertyOrdering"]);I!=null&&u(n,["propertyOrdering"],I);const S=h(i,["required"]);S!=null&&u(n,["required"],S);const D=h(i,["title"]);D!=null&&u(n,["title"],D);const G=h(i,["type"]);return G!=null&&u(n,["type"],G),n}function Fa(r,i){const n={};if(h(i,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const s=h(i,["category"]);s!=null&&u(n,["category"],s);const l=h(i,["threshold"]);return l!=null&&u(n,["threshold"],l),n}function Za(r,i){const n={};if(h(i,["response"])!==void 0)throw new Error("response parameter is not supported in Gemini API.");const s=h(i,["description"]);s!=null&&u(n,["description"],s);const l=h(i,["name"]);l!=null&&u(n,["name"],l);const f=h(i,["parameters"]);return f!=null&&u(n,["parameters"],f),n}function Va(){return{}}function Ua(r,i){const n={},s=h(i,["mode"]);s!=null&&u(n,["mode"],s);const l=h(i,["dynamicThreshold"]);return l!=null&&u(n,["dynamicThreshold"],l),n}function qa(r,i){const n={},s=h(i,["dynamicRetrievalConfig"]);return s!=null&&u(n,["dynamicRetrievalConfig"],Ua(r,s)),n}function Xo(r,i){const n={},s=h(i,["functionDeclarations"]);if(s!=null&&(Array.isArray(s)?u(n,["functionDeclarations"],s.map(p=>Za(r,p))):u(n,["functionDeclarations"],s)),h(i,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");h(i,["googleSearch"])!=null&&u(n,["googleSearch"],Va());const f=h(i,["googleSearchRetrieval"]);f!=null&&u(n,["googleSearchRetrieval"],qa(r,f));const d=h(i,["codeExecution"]);return d!=null&&u(n,["codeExecution"],d),n}function Ga(r,i){const n={},s=h(i,["mode"]);s!=null&&u(n,["mode"],s);const l=h(i,["allowedFunctionNames"]);return l!=null&&u(n,["allowedFunctionNames"],l),n}function Ha(r,i){const n={},s=h(i,["functionCallingConfig"]);return s!=null&&u(n,["functionCallingConfig"],Ga(r,s)),n}function Wa(r,i){const n={},s=h(i,["voiceName"]);return s!=null&&u(n,["voiceName"],s),n}function Ka(r,i){const n={},s=h(i,["prebuiltVoiceConfig"]);return s!=null&&u(n,["prebuiltVoiceConfig"],Wa(r,s)),n}function Ya(r,i){const n={},s=h(i,["voiceConfig"]);return s!=null&&u(n,["voiceConfig"],Ka(r,s)),n}function $a(r,i){const n={},s=h(i,["includeThoughts"]);return s!=null&&u(n,["includeThoughts"],s),n}function Ja(r,i,n){const s={},l=h(i,["systemInstruction"]);n!==void 0&&l!=null&&u(n,["systemInstruction"],xe(r,yt(r,l)));const f=h(i,["temperature"]);f!=null&&u(s,["temperature"],f);const d=h(i,["topP"]);d!=null&&u(s,["topP"],d);const p=h(i,["topK"]);p!=null&&u(s,["topK"],p);const _=h(i,["candidateCount"]);_!=null&&u(s,["candidateCount"],_);const v=h(i,["maxOutputTokens"]);v!=null&&u(s,["maxOutputTokens"],v);const T=h(i,["stopSequences"]);T!=null&&u(s,["stopSequences"],T);const w=h(i,["responseLogprobs"]);w!=null&&u(s,["responseLogprobs"],w);const x=h(i,["logprobs"]);x!=null&&u(s,["logprobs"],x);const E=h(i,["presencePenalty"]);E!=null&&u(s,["presencePenalty"],E);const I=h(i,["frequencyPenalty"]);I!=null&&u(s,["frequencyPenalty"],I);const S=h(i,["seed"]);S!=null&&u(s,["seed"],S);const D=h(i,["responseMimeType"]);D!=null&&u(s,["responseMimeType"],D);const G=h(i,["responseSchema"]);if(G!=null&&u(s,["responseSchema"],Oa(r,Go(r,G))),h(i,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");const O=h(i,["safetySettings"]);n!==void 0&&O!=null&&(Array.isArray(O)?u(n,["safetySettings"],O.map(Lt=>Fa(r,Lt))):u(n,["safetySettings"],O));const F=h(i,["tools"]);n!==void 0&&F!=null&&(Array.isArray(F)?u(n,["tools"],ne(r,ne(r,F).map(Lt=>Xo(r,Wo(r,Lt))))):u(n,["tools"],ne(r,F)));const et=h(i,["toolConfig"]);if(n!==void 0&&et!=null&&u(n,["toolConfig"],Ha(r,et)),h(i,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const ot=h(i,["cachedContent"]);n!==void 0&&ot!=null&&u(n,["cachedContent"],Ot(r,ot));const st=h(i,["responseModalities"]);st!=null&&u(s,["responseModalities"],st);const lt=h(i,["mediaResolution"]);lt!=null&&u(s,["mediaResolution"],lt);const ut=h(i,["speechConfig"]);if(ut!=null&&u(s,["speechConfig"],Ya(r,Ho(r,ut))),h(i,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const Mt=h(i,["thinkingConfig"]);return Mt!=null&&u(s,["thinkingConfig"],$a(r,Mt)),s}function Ao(r,i){const n={},s=h(i,["model"]);s!=null&&u(n,["_url","model"],pt(r,s));const l=h(i,["contents"]);l!=null&&(Array.isArray(l)?u(n,["contents"],$(r,$(r,l).map(d=>xe(r,d)))):u(n,["contents"],$(r,l)));const f=h(i,["config"]);return f!=null&&u(n,["generationConfig"],Ja(r,f,n)),n}function Xa(r,i,n){const s={},l=h(i,["taskType"]);n!==void 0&&l!=null&&u(n,["requests[]","taskType"],l);const f=h(i,["title"]);n!==void 0&&f!=null&&u(n,["requests[]","title"],f);const d=h(i,["outputDimensionality"]);if(n!==void 0&&d!=null&&u(n,["requests[]","outputDimensionality"],d),h(i,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(h(i,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return s}function Qa(r,i){const n={},s=h(i,["model"]);s!=null&&u(n,["_url","model"],pt(r,s));const l=h(i,["contents"]);l!=null&&u(n,["requests[]","content"],qo(r,l));const f=h(i,["config"]);f!=null&&u(n,["config"],Xa(r,f,n));const d=h(i,["model"]);return d!==void 0&&u(n,["requests[]","model"],pt(r,d)),n}function ja(r,i,n){const s={};if(h(i,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(h(i,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const l=h(i,["numberOfImages"]);n!==void 0&&l!=null&&u(n,["parameters","sampleCount"],l);const f=h(i,["aspectRatio"]);n!==void 0&&f!=null&&u(n,["parameters","aspectRatio"],f);const d=h(i,["guidanceScale"]);if(n!==void 0&&d!=null&&u(n,["parameters","guidanceScale"],d),h(i,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const p=h(i,["safetyFilterLevel"]);n!==void 0&&p!=null&&u(n,["parameters","safetySetting"],p);const _=h(i,["personGeneration"]);n!==void 0&&_!=null&&u(n,["parameters","personGeneration"],_);const v=h(i,["includeSafetyAttributes"]);n!==void 0&&v!=null&&u(n,["parameters","includeSafetyAttributes"],v);const T=h(i,["includeRaiReason"]);n!==void 0&&T!=null&&u(n,["parameters","includeRaiReason"],T);const w=h(i,["language"]);n!==void 0&&w!=null&&u(n,["parameters","language"],w);const x=h(i,["outputMimeType"]);n!==void 0&&x!=null&&u(n,["parameters","outputOptions","mimeType"],x);const E=h(i,["outputCompressionQuality"]);if(n!==void 0&&E!=null&&u(n,["parameters","outputOptions","compressionQuality"],E),h(i,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(h(i,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return s}function tl(r,i){const n={},s=h(i,["model"]);s!=null&&u(n,["_url","model"],pt(r,s));const l=h(i,["prompt"]);l!=null&&u(n,["instances[0]","prompt"],l);const f=h(i,["config"]);return f!=null&&u(n,["config"],ja(r,f,n)),n}function el(r,i){const n={};if(h(i,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(h(i,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(h(i,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return n}function nl(r,i){const n={},s=h(i,["model"]);s!=null&&u(n,["_url","model"],pt(r,s));const l=h(i,["contents"]);l!=null&&(Array.isArray(l)?u(n,["contents"],$(r,$(r,l).map(d=>xe(r,d)))):u(n,["contents"],$(r,l)));const f=h(i,["config"]);return f!=null&&u(n,["config"],el(r,f)),n}function il(r,i){const n={};if(h(i,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const s=h(i,["imageBytes"]);s!=null&&u(n,["bytesBase64Encoded"],Ft(r,s));const l=h(i,["mimeType"]);return l!=null&&u(n,["mimeType"],l),n}function ol(r,i,n){const s={},l=h(i,["numberOfVideos"]);if(n!==void 0&&l!=null&&u(n,["parameters","sampleCount"],l),h(i,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(h(i,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const f=h(i,["durationSeconds"]);if(n!==void 0&&f!=null&&u(n,["parameters","durationSeconds"],f),h(i,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const d=h(i,["aspectRatio"]);if(n!==void 0&&d!=null&&u(n,["parameters","aspectRatio"],d),h(i,["resolution"])!==void 0)throw new Error("resolution parameter is not supported in Gemini API.");const p=h(i,["personGeneration"]);if(n!==void 0&&p!=null&&u(n,["parameters","personGeneration"],p),h(i,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const _=h(i,["negativePrompt"]);if(n!==void 0&&_!=null&&u(n,["parameters","negativePrompt"],_),h(i,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return s}function sl(r,i){const n={},s=h(i,["model"]);s!=null&&u(n,["_url","model"],pt(r,s));const l=h(i,["prompt"]);l!=null&&u(n,["instances[0]","prompt"],l);const f=h(i,["image"]);f!=null&&u(n,["instances[0]","image"],il(r,f));const d=h(i,["config"]);return d!=null&&u(n,["config"],ol(r,d,n)),n}function rl(r,i){const n={},s=h(i,["videoMetadata"]);s!=null&&u(n,["videoMetadata"],s);const l=h(i,["thought"]);l!=null&&u(n,["thought"],l);const f=h(i,["codeExecutionResult"]);f!=null&&u(n,["codeExecutionResult"],f);const d=h(i,["executableCode"]);d!=null&&u(n,["executableCode"],d);const p=h(i,["fileData"]);p!=null&&u(n,["fileData"],p);const _=h(i,["functionCall"]);_!=null&&u(n,["functionCall"],_);const v=h(i,["functionResponse"]);v!=null&&u(n,["functionResponse"],v);const T=h(i,["inlineData"]);T!=null&&u(n,["inlineData"],T);const w=h(i,["text"]);return w!=null&&u(n,["text"],w),n}function Ht(r,i){const n={},s=h(i,["parts"]);s!=null&&(Array.isArray(s)?u(n,["parts"],s.map(f=>rl(r,f))):u(n,["parts"],s));const l=h(i,["role"]);return l!=null&&u(n,["role"],l),n}function Qo(r,i){const n={},s=h(i,["example"]);s!=null&&u(n,["example"],s);const l=h(i,["pattern"]);l!=null&&u(n,["pattern"],l);const f=h(i,["default"]);f!=null&&u(n,["default"],f);const d=h(i,["maxLength"]);d!=null&&u(n,["maxLength"],d);const p=h(i,["minLength"]);p!=null&&u(n,["minLength"],p);const _=h(i,["minProperties"]);_!=null&&u(n,["minProperties"],_);const v=h(i,["maxProperties"]);v!=null&&u(n,["maxProperties"],v);const T=h(i,["anyOf"]);T!=null&&u(n,["anyOf"],T);const w=h(i,["description"]);w!=null&&u(n,["description"],w);const x=h(i,["enum"]);x!=null&&u(n,["enum"],x);const E=h(i,["format"]);E!=null&&u(n,["format"],E);const I=h(i,["items"]);I!=null&&u(n,["items"],I);const S=h(i,["maxItems"]);S!=null&&u(n,["maxItems"],S);const D=h(i,["maximum"]);D!=null&&u(n,["maximum"],D);const G=h(i,["minItems"]);G!=null&&u(n,["minItems"],G);const O=h(i,["minimum"]);O!=null&&u(n,["minimum"],O);const F=h(i,["nullable"]);F!=null&&u(n,["nullable"],F);const et=h(i,["properties"]);et!=null&&u(n,["properties"],et);const ot=h(i,["propertyOrdering"]);ot!=null&&u(n,["propertyOrdering"],ot);const st=h(i,["required"]);st!=null&&u(n,["required"],st);const lt=h(i,["title"]);lt!=null&&u(n,["title"],lt);const ut=h(i,["type"]);return ut!=null&&u(n,["type"],ut),n}function al(r,i){const n={},s=h(i,["method"]);s!=null&&u(n,["method"],s);const l=h(i,["category"]);l!=null&&u(n,["category"],l);const f=h(i,["threshold"]);return f!=null&&u(n,["threshold"],f),n}function ll(r,i){const n={},s=h(i,["response"]);s!=null&&u(n,["response"],Qo(r,s));const l=h(i,["description"]);l!=null&&u(n,["description"],l);const f=h(i,["name"]);f!=null&&u(n,["name"],f);const d=h(i,["parameters"]);return d!=null&&u(n,["parameters"],d),n}function ul(){return{}}function hl(r,i){const n={},s=h(i,["mode"]);s!=null&&u(n,["mode"],s);const l=h(i,["dynamicThreshold"]);return l!=null&&u(n,["dynamicThreshold"],l),n}function cl(r,i){const n={},s=h(i,["dynamicRetrievalConfig"]);return s!=null&&u(n,["dynamicRetrievalConfig"],hl(r,s)),n}function On(r,i){const n={},s=h(i,["functionDeclarations"]);s!=null&&(Array.isArray(s)?u(n,["functionDeclarations"],s.map(_=>ll(r,_))):u(n,["functionDeclarations"],s));const l=h(i,["retrieval"]);l!=null&&u(n,["retrieval"],l),h(i,["googleSearch"])!=null&&u(n,["googleSearch"],ul());const d=h(i,["googleSearchRetrieval"]);d!=null&&u(n,["googleSearchRetrieval"],cl(r,d));const p=h(i,["codeExecution"]);return p!=null&&u(n,["codeExecution"],p),n}function fl(r,i){const n={},s=h(i,["mode"]);s!=null&&u(n,["mode"],s);const l=h(i,["allowedFunctionNames"]);return l!=null&&u(n,["allowedFunctionNames"],l),n}function dl(r,i){const n={},s=h(i,["functionCallingConfig"]);return s!=null&&u(n,["functionCallingConfig"],fl(r,s)),n}function pl(r,i){const n={},s=h(i,["voiceName"]);return s!=null&&u(n,["voiceName"],s),n}function ml(r,i){const n={},s=h(i,["prebuiltVoiceConfig"]);return s!=null&&u(n,["prebuiltVoiceConfig"],pl(r,s)),n}function _l(r,i){const n={},s=h(i,["voiceConfig"]);return s!=null&&u(n,["voiceConfig"],ml(r,s)),n}function gl(r,i){const n={},s=h(i,["includeThoughts"]);return s!=null&&u(n,["includeThoughts"],s),n}function vl(r,i,n){const s={},l=h(i,["systemInstruction"]);n!==void 0&&l!=null&&u(n,["systemInstruction"],Ht(r,yt(r,l)));const f=h(i,["temperature"]);f!=null&&u(s,["temperature"],f);const d=h(i,["topP"]);d!=null&&u(s,["topP"],d);const p=h(i,["topK"]);p!=null&&u(s,["topK"],p);const _=h(i,["candidateCount"]);_!=null&&u(s,["candidateCount"],_);const v=h(i,["maxOutputTokens"]);v!=null&&u(s,["maxOutputTokens"],v);const T=h(i,["stopSequences"]);T!=null&&u(s,["stopSequences"],T);const w=h(i,["responseLogprobs"]);w!=null&&u(s,["responseLogprobs"],w);const x=h(i,["logprobs"]);x!=null&&u(s,["logprobs"],x);const E=h(i,["presencePenalty"]);E!=null&&u(s,["presencePenalty"],E);const I=h(i,["frequencyPenalty"]);I!=null&&u(s,["frequencyPenalty"],I);const S=h(i,["seed"]);S!=null&&u(s,["seed"],S);const D=h(i,["responseMimeType"]);D!=null&&u(s,["responseMimeType"],D);const G=h(i,["responseSchema"]);G!=null&&u(s,["responseSchema"],Qo(r,Go(r,G)));const O=h(i,["routingConfig"]);O!=null&&u(s,["routingConfig"],O);const F=h(i,["safetySettings"]);n!==void 0&&F!=null&&(Array.isArray(F)?u(n,["safetySettings"],F.map(ie=>al(r,ie))):u(n,["safetySettings"],F));const et=h(i,["tools"]);n!==void 0&&et!=null&&(Array.isArray(et)?u(n,["tools"],ne(r,ne(r,et).map(ie=>On(r,Wo(r,ie))))):u(n,["tools"],ne(r,et)));const ot=h(i,["toolConfig"]);n!==void 0&&ot!=null&&u(n,["toolConfig"],dl(r,ot));const st=h(i,["labels"]);n!==void 0&&st!=null&&u(n,["labels"],st);const lt=h(i,["cachedContent"]);n!==void 0&&lt!=null&&u(n,["cachedContent"],Ot(r,lt));const ut=h(i,["responseModalities"]);ut!=null&&u(s,["responseModalities"],ut);const Mt=h(i,["mediaResolution"]);Mt!=null&&u(s,["mediaResolution"],Mt);const Lt=h(i,["speechConfig"]);Lt!=null&&u(s,["speechConfig"],_l(r,Ho(r,Lt)));const nt=h(i,["audioTimestamp"]);nt!=null&&u(s,["audioTimestamp"],nt);const rt=h(i,["thinkingConfig"]);return rt!=null&&u(s,["thinkingConfig"],gl(r,rt)),s}function Ro(r,i){const n={},s=h(i,["model"]);s!=null&&u(n,["_url","model"],pt(r,s));const l=h(i,["contents"]);l!=null&&(Array.isArray(l)?u(n,["contents"],$(r,$(r,l).map(d=>Ht(r,d)))):u(n,["contents"],$(r,l)));const f=h(i,["config"]);return f!=null&&u(n,["generationConfig"],vl(r,f,n)),n}function yl(r,i,n){const s={},l=h(i,["taskType"]);n!==void 0&&l!=null&&u(n,["instances[]","task_type"],l);const f=h(i,["title"]);n!==void 0&&f!=null&&u(n,["instances[]","title"],f);const d=h(i,["outputDimensionality"]);n!==void 0&&d!=null&&u(n,["parameters","outputDimensionality"],d);const p=h(i,["mimeType"]);n!==void 0&&p!=null&&u(n,["instances[]","mimeType"],p);const _=h(i,["autoTruncate"]);return n!==void 0&&_!=null&&u(n,["parameters","autoTruncate"],_),s}function Tl(r,i){const n={},s=h(i,["model"]);s!=null&&u(n,["_url","model"],pt(r,s));const l=h(i,["contents"]);l!=null&&u(n,["instances[]","content"],qo(r,l));const f=h(i,["config"]);return f!=null&&u(n,["config"],yl(r,f,n)),n}function Cl(r,i,n){const s={},l=h(i,["outputGcsUri"]);n!==void 0&&l!=null&&u(n,["parameters","storageUri"],l);const f=h(i,["negativePrompt"]);n!==void 0&&f!=null&&u(n,["parameters","negativePrompt"],f);const d=h(i,["numberOfImages"]);n!==void 0&&d!=null&&u(n,["parameters","sampleCount"],d);const p=h(i,["aspectRatio"]);n!==void 0&&p!=null&&u(n,["parameters","aspectRatio"],p);const _=h(i,["guidanceScale"]);n!==void 0&&_!=null&&u(n,["parameters","guidanceScale"],_);const v=h(i,["seed"]);n!==void 0&&v!=null&&u(n,["parameters","seed"],v);const T=h(i,["safetyFilterLevel"]);n!==void 0&&T!=null&&u(n,["parameters","safetySetting"],T);const w=h(i,["personGeneration"]);n!==void 0&&w!=null&&u(n,["parameters","personGeneration"],w);const x=h(i,["includeSafetyAttributes"]);n!==void 0&&x!=null&&u(n,["parameters","includeSafetyAttributes"],x);const E=h(i,["includeRaiReason"]);n!==void 0&&E!=null&&u(n,["parameters","includeRaiReason"],E);const I=h(i,["language"]);n!==void 0&&I!=null&&u(n,["parameters","language"],I);const S=h(i,["outputMimeType"]);n!==void 0&&S!=null&&u(n,["parameters","outputOptions","mimeType"],S);const D=h(i,["outputCompressionQuality"]);n!==void 0&&D!=null&&u(n,["parameters","outputOptions","compressionQuality"],D);const G=h(i,["addWatermark"]);n!==void 0&&G!=null&&u(n,["parameters","addWatermark"],G);const O=h(i,["enhancePrompt"]);return n!==void 0&&O!=null&&u(n,["parameters","enhancePrompt"],O),s}function wl(r,i){const n={},s=h(i,["model"]);s!=null&&u(n,["_url","model"],pt(r,s));const l=h(i,["prompt"]);l!=null&&u(n,["instances[0]","prompt"],l);const f=h(i,["config"]);return f!=null&&u(n,["config"],Cl(r,f,n)),n}function Pl(r,i,n){const s={},l=h(i,["systemInstruction"]);n!==void 0&&l!=null&&u(n,["systemInstruction"],Ht(r,yt(r,l)));const f=h(i,["tools"]);n!==void 0&&f!=null&&(Array.isArray(f)?u(n,["tools"],f.map(p=>On(r,p))):u(n,["tools"],f));const d=h(i,["generationConfig"]);return n!==void 0&&d!=null&&u(n,["generationConfig"],d),s}function xl(r,i){const n={},s=h(i,["model"]);s!=null&&u(n,["_url","model"],pt(r,s));const l=h(i,["contents"]);l!=null&&(Array.isArray(l)?u(n,["contents"],$(r,$(r,l).map(d=>Ht(r,d)))):u(n,["contents"],$(r,l)));const f=h(i,["config"]);return f!=null&&u(n,["config"],Pl(r,f,n)),n}function El(r,i){const n={},s=h(i,["model"]);s!=null&&u(n,["_url","model"],pt(r,s));const l=h(i,["contents"]);l!=null&&(Array.isArray(l)?u(n,["contents"],$(r,$(r,l).map(d=>Ht(r,d)))):u(n,["contents"],$(r,l)));const f=h(i,["config"]);return f!=null&&u(n,["config"],f),n}function Ml(r,i){const n={},s=h(i,["gcsUri"]);s!=null&&u(n,["gcsUri"],s);const l=h(i,["imageBytes"]);l!=null&&u(n,["bytesBase64Encoded"],Ft(r,l));const f=h(i,["mimeType"]);return f!=null&&u(n,["mimeType"],f),n}function Ll(r,i,n){const s={},l=h(i,["numberOfVideos"]);n!==void 0&&l!=null&&u(n,["parameters","sampleCount"],l);const f=h(i,["outputGcsUri"]);n!==void 0&&f!=null&&u(n,["parameters","storageUri"],f);const d=h(i,["fps"]);n!==void 0&&d!=null&&u(n,["parameters","fps"],d);const p=h(i,["durationSeconds"]);n!==void 0&&p!=null&&u(n,["parameters","durationSeconds"],p);const _=h(i,["seed"]);n!==void 0&&_!=null&&u(n,["parameters","seed"],_);const v=h(i,["aspectRatio"]);n!==void 0&&v!=null&&u(n,["parameters","aspectRatio"],v);const T=h(i,["resolution"]);n!==void 0&&T!=null&&u(n,["parameters","resolution"],T);const w=h(i,["personGeneration"]);n!==void 0&&w!=null&&u(n,["parameters","personGeneration"],w);const x=h(i,["pubsubTopic"]);n!==void 0&&x!=null&&u(n,["parameters","pubsubTopic"],x);const E=h(i,["negativePrompt"]);n!==void 0&&E!=null&&u(n,["parameters","negativePrompt"],E);const I=h(i,["enhancePrompt"]);return n!==void 0&&I!=null&&u(n,["parameters","enhancePrompt"],I),s}function Sl(r,i){const n={},s=h(i,["model"]);s!=null&&u(n,["_url","model"],pt(r,s));const l=h(i,["prompt"]);l!=null&&u(n,["instances[0]","prompt"],l);const f=h(i,["image"]);f!=null&&u(n,["instances[0]","image"],Ml(r,f));const d=h(i,["config"]);return d!=null&&u(n,["config"],Ll(r,d,n)),n}function Il(r,i){const n={},s=h(i,["thought"]);s!=null&&u(n,["thought"],s);const l=h(i,["codeExecutionResult"]);l!=null&&u(n,["codeExecutionResult"],l);const f=h(i,["executableCode"]);f!=null&&u(n,["executableCode"],f);const d=h(i,["fileData"]);d!=null&&u(n,["fileData"],d);const p=h(i,["functionCall"]);p!=null&&u(n,["functionCall"],p);const _=h(i,["functionResponse"]);_!=null&&u(n,["functionResponse"],_);const v=h(i,["inlineData"]);v!=null&&u(n,["inlineData"],v);const T=h(i,["text"]);return T!=null&&u(n,["text"],T),n}function jo(r,i){const n={},s=h(i,["parts"]);s!=null&&(Array.isArray(s)?u(n,["parts"],s.map(f=>Il(r,f))):u(n,["parts"],s));const l=h(i,["role"]);return l!=null&&u(n,["role"],l),n}function Al(r,i){const n={},s=h(i,["citationSources"]);return s!=null&&u(n,["citations"],s),n}function Rl(r,i){const n={},s=h(i,["content"]);s!=null&&u(n,["content"],jo(r,s));const l=h(i,["citationMetadata"]);l!=null&&u(n,["citationMetadata"],Al(r,l));const f=h(i,["tokenCount"]);f!=null&&u(n,["tokenCount"],f);const d=h(i,["finishReason"]);d!=null&&u(n,["finishReason"],d);const p=h(i,["avgLogprobs"]);p!=null&&u(n,["avgLogprobs"],p);const _=h(i,["groundingMetadata"]);_!=null&&u(n,["groundingMetadata"],_);const v=h(i,["index"]);v!=null&&u(n,["index"],v);const T=h(i,["logprobsResult"]);T!=null&&u(n,["logprobsResult"],T);const w=h(i,["safetyRatings"]);return w!=null&&u(n,["safetyRatings"],w),n}function ko(r,i){const n={},s=h(i,["candidates"]);s!=null&&(Array.isArray(s)?u(n,["candidates"],s.map(p=>Rl(r,p))):u(n,["candidates"],s));const l=h(i,["modelVersion"]);l!=null&&u(n,["modelVersion"],l);const f=h(i,["promptFeedback"]);f!=null&&u(n,["promptFeedback"],f);const d=h(i,["usageMetadata"]);return d!=null&&u(n,["usageMetadata"],d),n}function kl(r,i){const n={},s=h(i,["values"]);return s!=null&&u(n,["values"],s),n}function Nl(){return{}}function bl(r,i){const n={},s=h(i,["embeddings"]);return s!=null&&(Array.isArray(s)?u(n,["embeddings"],s.map(f=>kl(r,f))):u(n,["embeddings"],s)),h(i,["metadata"])!=null&&u(n,["metadata"],Nl()),n}function Dl(r,i){const n={},s=h(i,["bytesBase64Encoded"]);s!=null&&u(n,["imageBytes"],Ft(r,s));const l=h(i,["mimeType"]);return l!=null&&u(n,["mimeType"],l),n}function ts(r,i){const n={},s=h(i,["safetyAttributes","categories"]);s!=null&&u(n,["categories"],s);const l=h(i,["safetyAttributes","scores"]);l!=null&&u(n,["scores"],l);const f=h(i,["contentType"]);return f!=null&&u(n,["contentType"],f),n}function Bl(r,i){const n={},s=h(i,["_self"]);s!=null&&u(n,["image"],Dl(r,s));const l=h(i,["raiFilteredReason"]);l!=null&&u(n,["raiFilteredReason"],l);const f=h(i,["_self"]);return f!=null&&u(n,["safetyAttributes"],ts(r,f)),n}function zl(r,i){const n={},s=h(i,["predictions"]);s!=null&&(Array.isArray(s)?u(n,["generatedImages"],s.map(f=>Bl(r,f))):u(n,["generatedImages"],s));const l=h(i,["positivePromptSafetyAttributes"]);return l!=null&&u(n,["positivePromptSafetyAttributes"],ts(r,l)),n}function Ol(r,i){const n={},s=h(i,["totalTokens"]);s!=null&&u(n,["totalTokens"],s);const l=h(i,["cachedContentTokenCount"]);return l!=null&&u(n,["cachedContentTokenCount"],l),n}function Fl(r,i){const n={},s=h(i,["video","uri"]);s!=null&&u(n,["uri"],s);const l=h(i,["video","encodedVideo"]);l!=null&&u(n,["videoBytes"],Ft(r,l));const f=h(i,["encoding"]);return f!=null&&u(n,["mimeType"],f),n}function Zl(r,i){const n={},s=h(i,["_self"]);return s!=null&&u(n,["video"],Fl(r,s)),n}function Vl(r,i){const n={},s=h(i,["generatedSamples"]);s!=null&&(Array.isArray(s)?u(n,["generatedVideos"],s.map(d=>Zl(r,d))):u(n,["generatedVideos"],s));const l=h(i,["raiMediaFilteredCount"]);l!=null&&u(n,["raiMediaFilteredCount"],l);const f=h(i,["raiMediaFilteredReasons"]);return f!=null&&u(n,["raiMediaFilteredReasons"],f),n}function Ul(r,i){const n={},s=h(i,["name"]);s!=null&&u(n,["name"],s);const l=h(i,["metadata"]);l!=null&&u(n,["metadata"],l);const f=h(i,["done"]);f!=null&&u(n,["done"],f);const d=h(i,["error"]);d!=null&&u(n,["error"],d);const p=h(i,["response"]);p!=null&&u(n,["response"],p);const _=h(i,["response","generateVideoResponse"]);return _!=null&&u(n,["result"],Vl(r,_)),n}function ql(r,i){const n={},s=h(i,["videoMetadata"]);s!=null&&u(n,["videoMetadata"],s);const l=h(i,["thought"]);l!=null&&u(n,["thought"],l);const f=h(i,["codeExecutionResult"]);f!=null&&u(n,["codeExecutionResult"],f);const d=h(i,["executableCode"]);d!=null&&u(n,["executableCode"],d);const p=h(i,["fileData"]);p!=null&&u(n,["fileData"],p);const _=h(i,["functionCall"]);_!=null&&u(n,["functionCall"],_);const v=h(i,["functionResponse"]);v!=null&&u(n,["functionResponse"],v);const T=h(i,["inlineData"]);T!=null&&u(n,["inlineData"],T);const w=h(i,["text"]);return w!=null&&u(n,["text"],w),n}function es(r,i){const n={},s=h(i,["parts"]);s!=null&&(Array.isArray(s)?u(n,["parts"],s.map(f=>ql(r,f))):u(n,["parts"],s));const l=h(i,["role"]);return l!=null&&u(n,["role"],l),n}function Gl(r,i){const n={},s=h(i,["citations"]);return s!=null&&u(n,["citations"],s),n}function Hl(r,i){const n={},s=h(i,["content"]);s!=null&&u(n,["content"],es(r,s));const l=h(i,["citationMetadata"]);l!=null&&u(n,["citationMetadata"],Gl(r,l));const f=h(i,["finishMessage"]);f!=null&&u(n,["finishMessage"],f);const d=h(i,["finishReason"]);d!=null&&u(n,["finishReason"],d);const p=h(i,["avgLogprobs"]);p!=null&&u(n,["avgLogprobs"],p);const _=h(i,["groundingMetadata"]);_!=null&&u(n,["groundingMetadata"],_);const v=h(i,["index"]);v!=null&&u(n,["index"],v);const T=h(i,["logprobsResult"]);T!=null&&u(n,["logprobsResult"],T);const w=h(i,["safetyRatings"]);return w!=null&&u(n,["safetyRatings"],w),n}function No(r,i){const n={},s=h(i,["candidates"]);s!=null&&(Array.isArray(s)?u(n,["candidates"],s.map(v=>Hl(r,v))):u(n,["candidates"],s));const l=h(i,["createTime"]);l!=null&&u(n,["createTime"],l);const f=h(i,["responseId"]);f!=null&&u(n,["responseId"],f);const d=h(i,["modelVersion"]);d!=null&&u(n,["modelVersion"],d);const p=h(i,["promptFeedback"]);p!=null&&u(n,["promptFeedback"],p);const _=h(i,["usageMetadata"]);return _!=null&&u(n,["usageMetadata"],_),n}function Wl(r,i){const n={},s=h(i,["truncated"]);s!=null&&u(n,["truncated"],s);const l=h(i,["token_count"]);return l!=null&&u(n,["tokenCount"],l),n}function Kl(r,i){const n={},s=h(i,["values"]);s!=null&&u(n,["values"],s);const l=h(i,["statistics"]);return l!=null&&u(n,["statistics"],Wl(r,l)),n}function Yl(r,i){const n={},s=h(i,["billableCharacterCount"]);return s!=null&&u(n,["billableCharacterCount"],s),n}function $l(r,i){const n={},s=h(i,["predictions[]","embeddings"]);s!=null&&(Array.isArray(s)?u(n,["embeddings"],s.map(f=>Kl(r,f))):u(n,["embeddings"],s));const l=h(i,["metadata"]);return l!=null&&u(n,["metadata"],Yl(r,l)),n}function Jl(r,i){const n={},s=h(i,["gcsUri"]);s!=null&&u(n,["gcsUri"],s);const l=h(i,["bytesBase64Encoded"]);l!=null&&u(n,["imageBytes"],Ft(r,l));const f=h(i,["mimeType"]);return f!=null&&u(n,["mimeType"],f),n}function ns(r,i){const n={},s=h(i,["safetyAttributes","categories"]);s!=null&&u(n,["categories"],s);const l=h(i,["safetyAttributes","scores"]);l!=null&&u(n,["scores"],l);const f=h(i,["contentType"]);return f!=null&&u(n,["contentType"],f),n}function Xl(r,i){const n={},s=h(i,["_self"]);s!=null&&u(n,["image"],Jl(r,s));const l=h(i,["raiFilteredReason"]);l!=null&&u(n,["raiFilteredReason"],l);const f=h(i,["_self"]);f!=null&&u(n,["safetyAttributes"],ns(r,f));const d=h(i,["prompt"]);return d!=null&&u(n,["enhancedPrompt"],d),n}function Ql(r,i){const n={},s=h(i,["predictions"]);s!=null&&(Array.isArray(s)?u(n,["generatedImages"],s.map(f=>Xl(r,f))):u(n,["generatedImages"],s));const l=h(i,["positivePromptSafetyAttributes"]);return l!=null&&u(n,["positivePromptSafetyAttributes"],ns(r,l)),n}function jl(r,i){const n={},s=h(i,["totalTokens"]);return s!=null&&u(n,["totalTokens"],s),n}function tu(r,i){const n={},s=h(i,["tokensInfo"]);return s!=null&&u(n,["tokensInfo"],s),n}function eu(r,i){const n={},s=h(i,["gcsUri"]);s!=null&&u(n,["uri"],s);const l=h(i,["bytesBase64Encoded"]);l!=null&&u(n,["videoBytes"],Ft(r,l));const f=h(i,["mimeType"]);return f!=null&&u(n,["mimeType"],f),n}function nu(r,i){const n={},s=h(i,["_self"]);return s!=null&&u(n,["video"],eu(r,s)),n}function iu(r,i){const n={},s=h(i,["videos"]);s!=null&&(Array.isArray(s)?u(n,["generatedVideos"],s.map(d=>nu(r,d))):u(n,["generatedVideos"],s));const l=h(i,["raiMediaFilteredCount"]);l!=null&&u(n,["raiMediaFilteredCount"],l);const f=h(i,["raiMediaFilteredReasons"]);return f!=null&&u(n,["raiMediaFilteredReasons"],f),n}function ou(r,i){const n={},s=h(i,["name"]);s!=null&&u(n,["name"],s);const l=h(i,["metadata"]);l!=null&&u(n,["metadata"],l);const f=h(i,["done"]);f!=null&&u(n,["done"],f);const d=h(i,["error"]);d!=null&&u(n,["error"],d);const p=h(i,["response"]);p!=null&&u(n,["response"],p);const _=h(i,["response"]);return _!=null&&u(n,["result"],iu(r,_)),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function su(r,i){const n={},s=h(i,["config"]);s!=null&&u(n,["setup"],uu(r,s));const l=h(i,["model"]);return l!==void 0&&u(n,["setup","model"],l),n}function ru(r,i){const n={},s=h(i,["config"]);s!=null&&u(n,["setup"],hu(r,s));const l=h(i,["model"]);return l!==void 0&&u(n,["setup","model"],l),n}function au(r,i){const n={},s=h(i,["setupComplete"]);s!==void 0&&u(n,["setupComplete"],s);const l=h(i,["serverContent"]);l!=null&&u(n,["serverContent"],cu(r,l));const f=h(i,["toolCall"]);f!=null&&u(n,["toolCall"],mu(r,f));const d=h(i,["toolCallCancellation"]);return d!=null&&u(n,["toolCallCancellation"],gu(r,d)),n}function lu(r,i){const n={},s=h(i,["setupComplete"]);s!==void 0&&u(n,["setupComplete"],s);const l=h(i,["serverContent"]);l!=null&&u(n,["serverContent"],fu(r,l));const f=h(i,["toolCall"]);f!=null&&u(n,["toolCall"],_u(r,f));const d=h(i,["toolCallCancellation"]);return d!=null&&u(n,["toolCallCancellation"],vu(r,d)),n}function uu(r,i){const n={},s=h(i,["generationConfig"]);s!==void 0&&u(n,["generationConfig"],s);const l=h(i,["responseModalities"]);l!==void 0&&u(n,["generationConfig","responseModalities"],l);const f=h(i,["speechConfig"]);f!==void 0&&u(n,["generationConfig","speechConfig"],f);const d=h(i,["systemInstruction"]);d!=null&&u(n,["systemInstruction"],xe(r,d));const p=h(i,["tools"]);return p!=null&&Array.isArray(p)&&u(n,["tools"],p.map(_=>Xo(r,_))),n}function hu(r,i){const n={},s=h(i,["generationConfig"]);s!==void 0&&u(n,["generationConfig"],s);const l=h(i,["responseModalities"]);l!==void 0?u(n,["generationConfig","responseModalities"],l):u(n,["generationConfig","responseModalities"],["AUDIO"]);const f=h(i,["speechConfig"]);f!==void 0&&u(n,["generationConfig","speechConfig"],f);const d=h(i,["systemInstruction"]);d!=null&&u(n,["systemInstruction"],Ht(r,d));const p=h(i,["tools"]);return p!=null&&Array.isArray(p)&&u(n,["tools"],p.map(_=>On(r,_))),n}function cu(r,i){const n={},s=h(i,["modelTurn"]);s!=null&&u(n,["modelTurn"],jo(r,s));const l=h(i,["turnComplete"]);l!==void 0&&u(n,["turnComplete"],l);const f=h(i,["interrupted"]);return f!==void 0&&u(n,["interrupted"],f),n}function fu(r,i){const n={},s=h(i,["modelTurn"]);s!=null&&u(n,["modelTurn"],es(r,s));const l=h(i,["turnComplete"]);l!==void 0&&u(n,["turnComplete"],l);const f=h(i,["interrupted"]);return f!==void 0&&u(n,["interrupted"],f),n}function du(r,i){const n={},s=h(i,["id"]);s!==void 0&&u(n,["id"],s);const l=h(i,["args"]);l!==void 0&&u(n,["args"],l);const f=h(i,["name"]);return f!==void 0&&u(n,["name"],f),n}function pu(r,i){const n={},s=h(i,["args"]);s!==void 0&&u(n,["args"],s);const l=h(i,["name"]);return l!==void 0&&u(n,["name"],l),n}function mu(r,i){const n={},s=h(i,["functionCalls"]);return s!=null&&Array.isArray(s)&&u(n,["functionCalls"],s.map(l=>du(r,l))),n}function _u(r,i){const n={},s=h(i,["functionCalls"]);return s!=null&&Array.isArray(s)&&u(n,["functionCalls"],s.map(l=>pu(r,l))),n}function gu(r,i){const n={},s=h(i,["ids"]);return s!==void 0&&u(n,["ids"],s),n}function vu(r,i){const n={},s=h(i,["ids"]);return s!==void 0&&u(n,["ids"],s),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const yu="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function Tu(r,i,n){let s,l;n.data instanceof Blob?l=JSON.parse(await n.data.text()):l=JSON.parse(n.data),r.isVertexAI()?s=lu(r,l):s=au(r,l),i(s)}class Cu{constructor(i,n,s){this.apiClient=i,this.auth=n,this.webSocketFactory=s}async connect(i){var n,s;const l=this.apiClient.getWebsocketBaseUrl(),f=this.apiClient.getApiVersion();let d;const p=Eu(this.apiClient.getDefaultHeaders());if(this.apiClient.isVertexAI())d=`${l}/ws/google.cloud.aiplatform.${f}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(p);else{const O=this.apiClient.getApiKey();d=`${l}/ws/google.ai.generativelanguage.${f}.GenerativeService.BidiGenerateContent?key=${O}`}let _=()=>{};const v=new Promise(O=>{_=O}),T=i.callbacks,w=function(){var O;(O=T==null?void 0:T.onopen)===null||O===void 0||O.call(T),_({})},x=this.apiClient,E={onopen:w,onmessage:O=>{Tu(x,T.onmessage,O)},onerror:(n=T==null?void 0:T.onerror)!==null&&n!==void 0?n:function(O){},onclose:(s=T==null?void 0:T.onclose)!==null&&s!==void 0?s:function(O){}},I=this.webSocketFactory.create(d,xu(p),E);I.connect(),await v;let S=pt(this.apiClient,i.model);if(this.apiClient.isVertexAI()&&S.startsWith("publishers/")){const O=this.apiClient.getProject(),F=this.apiClient.getLocation();S=`projects/${O}/locations/${F}/`+S}let D={};const G={model:S,config:i.config,callbacks:i.callbacks};return this.apiClient.isVertexAI()?D=ru(this.apiClient,G):D=su(this.apiClient,G),I.send(JSON.stringify(D)),new Pu(I,this.apiClient)}}const wu={turnComplete:!0};class Pu{constructor(i,n){this.conn=i,this.apiClient=n}tLiveClientContent(i,n){if(n.turns!==null&&n.turns!==void 0){let s=[];try{s=$(i,n.turns),i.isVertexAI()?s=s.map(l=>Ht(i,l)):s=s.map(l=>xe(i,l))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof n.turns}'`)}return{clientContent:{turns:s,turnComplete:n.turnComplete}}}return{clientContent:{turnComplete:n.turnComplete}}}tLiveClientRealtimeInput(i,n){let s={};if(!("media"in n)||!n.media)throw new Error(`Failed to convert realtime input "media", type: '${typeof n.media}'`);return s={realtimeInput:{mediaChunks:[n.media]}},s}tLiveClienttToolResponse(i,n){let s=[];if(n.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(n.functionResponses)?s=n.functionResponses:s=[n.functionResponses],s.length===0)throw new Error("functionResponses is required.");for(const f of s){if(typeof f!="object"||f===null||!("name"in f)||!("response"in f))throw new Error(`Could not parse function response, type '${typeof f}'.`);if(!i.isVertexAI()&&!("id"in f))throw new Error(yu)}return{toolResponse:{functionResponses:s}}}sendClientContent(i){i=Object.assign(Object.assign({},wu),i);const n=this.tLiveClientContent(this.apiClient,i);this.conn.send(JSON.stringify(n))}sendRealtimeInput(i){if(i.media==null)throw new Error("Media is required.");const n=this.tLiveClientRealtimeInput(this.apiClient,i);this.conn.send(JSON.stringify(n))}sendToolResponse(i){if(i.functionResponses==null)throw new Error("Tool response parameters are required.");const n=this.tLiveClienttToolResponse(this.apiClient,i);this.conn.send(JSON.stringify(n))}close(){this.conn.close()}}function xu(r){const i={};return r.forEach((n,s)=>{i[s]=n}),i}function Eu(r){const i=new Headers;for(const[n,s]of Object.entries(r))i.append(n,s);return i}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Mu extends Xe{constructor(i){super(),this.apiClient=i,this.generateContent=async n=>await this.generateContentInternal(n),this.generateContentStream=async n=>await this.generateContentStreamInternal(n),this.generateImages=async n=>await this.generateImagesInternal(n).then(s=>{var l;let f;const d=[];if(s!=null&&s.generatedImages)for(const _ of s.generatedImages)_&&(_!=null&&_.safetyAttributes)&&((l=_==null?void 0:_.safetyAttributes)===null||l===void 0?void 0:l.contentType)==="Positive Prompt"?f=_==null?void 0:_.safetyAttributes:d.push(_);let p;return f?p={generatedImages:d,positivePromptSafetyAttributes:f}:p={generatedImages:d},p})}async generateContentInternal(i){var n,s;let l,f="",d={};if(this.apiClient.isVertexAI()){const p=Ro(this.apiClient,i);return f=q("{model}:generateContent",p._url),d=p._query,delete p.config,delete p._url,delete p._query,l=this.apiClient.request({path:f,queryParams:d,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(n=i.config)===null||n===void 0?void 0:n.httpOptions}).then(_=>_.json()),l.then(_=>{const v=No(this.apiClient,_),T=new Ge;return Object.assign(T,v),T})}else{const p=Ao(this.apiClient,i);return f=q("{model}:generateContent",p._url),d=p._query,delete p.config,delete p._url,delete p._query,l=this.apiClient.request({path:f,queryParams:d,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(s=i.config)===null||s===void 0?void 0:s.httpOptions}).then(_=>_.json()),l.then(_=>{const v=ko(this.apiClient,_),T=new Ge;return Object.assign(T,v),T})}}async generateContentStreamInternal(i){var n,s;let l,f="",d={};if(this.apiClient.isVertexAI()){const p=Ro(this.apiClient,i);f=q("{model}:streamGenerateContent?alt=sse",p._url),d=p._query,delete p.config,delete p._url,delete p._query;const _=this.apiClient;return l=_.requestStream({path:f,queryParams:d,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(n=i.config)===null||n===void 0?void 0:n.httpOptions}),l.then(function(v){return Je(this,arguments,function*(){var T,w,x,E;try{for(var I=!0,S=Dn(v),D;D=yield dt(S.next()),T=D.done,!T;I=!0){E=D.value,I=!1;const O=No(_,E),F=new Ge;Object.assign(F,O),yield yield dt(F)}}catch(G){w={error:G}}finally{try{!I&&!T&&(x=S.return)&&(yield dt(x.call(S)))}finally{if(w)throw w.error}}})})}else{const p=Ao(this.apiClient,i);f=q("{model}:streamGenerateContent?alt=sse",p._url),d=p._query,delete p.config,delete p._url,delete p._query;const _=this.apiClient;return l=_.requestStream({path:f,queryParams:d,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(s=i.config)===null||s===void 0?void 0:s.httpOptions}),l.then(function(v){return Je(this,arguments,function*(){var T,w,x,E;try{for(var I=!0,S=Dn(v),D;D=yield dt(S.next()),T=D.done,!T;I=!0){E=D.value,I=!1;const O=ko(_,E),F=new Ge;Object.assign(F,O),yield yield dt(F)}}catch(G){w={error:G}}finally{try{!I&&!T&&(x=S.return)&&(yield dt(x.call(S)))}finally{if(w)throw w.error}}})})}}async embedContent(i){var n,s;let l,f="",d={};if(this.apiClient.isVertexAI()){const p=Tl(this.apiClient,i);return f=q("{model}:predict",p._url),d=p._query,delete p.config,delete p._url,delete p._query,l=this.apiClient.request({path:f,queryParams:d,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(n=i.config)===null||n===void 0?void 0:n.httpOptions}).then(_=>_.json()),l.then(_=>{const v=$l(this.apiClient,_),T=new xo;return Object.assign(T,v),T})}else{const p=Qa(this.apiClient,i);return f=q("{model}:batchEmbedContents",p._url),d=p._query,delete p.config,delete p._url,delete p._query,l=this.apiClient.request({path:f,queryParams:d,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(s=i.config)===null||s===void 0?void 0:s.httpOptions}).then(_=>_.json()),l.then(_=>{const v=bl(this.apiClient,_),T=new xo;return Object.assign(T,v),T})}}async generateImagesInternal(i){var n,s;let l,f="",d={};if(this.apiClient.isVertexAI()){const p=wl(this.apiClient,i);return f=q("{model}:predict",p._url),d=p._query,delete p.config,delete p._url,delete p._query,l=this.apiClient.request({path:f,queryParams:d,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(n=i.config)===null||n===void 0?void 0:n.httpOptions}).then(_=>_.json()),l.then(_=>{const v=Ql(this.apiClient,_),T=new Eo;return Object.assign(T,v),T})}else{const p=tl(this.apiClient,i);return f=q("{model}:predict",p._url),d=p._query,delete p.config,delete p._url,delete p._query,l=this.apiClient.request({path:f,queryParams:d,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(s=i.config)===null||s===void 0?void 0:s.httpOptions}).then(_=>_.json()),l.then(_=>{const v=zl(this.apiClient,_),T=new Eo;return Object.assign(T,v),T})}}async countTokens(i){var n,s;let l,f="",d={};if(this.apiClient.isVertexAI()){const p=xl(this.apiClient,i);return f=q("{model}:countTokens",p._url),d=p._query,delete p.config,delete p._url,delete p._query,l=this.apiClient.request({path:f,queryParams:d,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(n=i.config)===null||n===void 0?void 0:n.httpOptions}).then(_=>_.json()),l.then(_=>{const v=jl(this.apiClient,_),T=new Mo;return Object.assign(T,v),T})}else{const p=nl(this.apiClient,i);return f=q("{model}:countTokens",p._url),d=p._query,delete p.config,delete p._url,delete p._query,l=this.apiClient.request({path:f,queryParams:d,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(s=i.config)===null||s===void 0?void 0:s.httpOptions}).then(_=>_.json()),l.then(_=>{const v=Ol(this.apiClient,_),T=new Mo;return Object.assign(T,v),T})}}async computeTokens(i){var n;let s,l="",f={};if(this.apiClient.isVertexAI()){const d=El(this.apiClient,i);return l=q("{model}:computeTokens",d._url),f=d._query,delete d.config,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:f,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=i.config)===null||n===void 0?void 0:n.httpOptions}).then(p=>p.json()),s.then(p=>{const _=tu(this.apiClient,p),v=new ma;return Object.assign(v,_),v})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideos(i){var n,s;let l,f="",d={};if(this.apiClient.isVertexAI()){const p=Sl(this.apiClient,i);return f=q("{model}:predictLongRunning",p._url),d=p._query,delete p.config,delete p._url,delete p._query,l=this.apiClient.request({path:f,queryParams:d,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(n=i.config)===null||n===void 0?void 0:n.httpOptions}).then(_=>_.json()),l.then(_=>ou(this.apiClient,_))}else{const p=sl(this.apiClient,i);return f=q("{model}:predictLongRunning",p._url),d=p._query,delete p.config,delete p._url,delete p._query,l=this.apiClient.request({path:f,queryParams:d,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(s=i.config)===null||s===void 0?void 0:s.httpOptions}).then(_=>_.json()),l.then(_=>Ul(this.apiClient,_))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Lu(r,i){const n={},s=h(i,["operationName"]);s!=null&&u(n,["_url","operationName"],s);const l=h(i,["config"]);return l!=null&&u(n,["config"],l),n}function Su(r,i){const n={},s=h(i,["operationName"]);s!=null&&u(n,["_url","operationName"],s);const l=h(i,["config"]);return l!=null&&u(n,["config"],l),n}function Iu(r,i){const n={},s=h(i,["operationName"]);s!=null&&u(n,["operationName"],s);const l=h(i,["resourceName"]);l!=null&&u(n,["_url","resourceName"],l);const f=h(i,["config"]);return f!=null&&u(n,["config"],f),n}function Au(r,i){const n={},s=h(i,["video","uri"]);s!=null&&u(n,["uri"],s);const l=h(i,["video","encodedVideo"]);l!=null&&u(n,["videoBytes"],Ft(r,l));const f=h(i,["encoding"]);return f!=null&&u(n,["mimeType"],f),n}function Ru(r,i){const n={},s=h(i,["_self"]);return s!=null&&u(n,["video"],Au(r,s)),n}function ku(r,i){const n={},s=h(i,["generatedSamples"]);s!=null&&(Array.isArray(s)?u(n,["generatedVideos"],s.map(d=>Ru(r,d))):u(n,["generatedVideos"],s));const l=h(i,["raiMediaFilteredCount"]);l!=null&&u(n,["raiMediaFilteredCount"],l);const f=h(i,["raiMediaFilteredReasons"]);return f!=null&&u(n,["raiMediaFilteredReasons"],f),n}function Nu(r,i){const n={},s=h(i,["name"]);s!=null&&u(n,["name"],s);const l=h(i,["metadata"]);l!=null&&u(n,["metadata"],l);const f=h(i,["done"]);f!=null&&u(n,["done"],f);const d=h(i,["error"]);d!=null&&u(n,["error"],d);const p=h(i,["response"]);p!=null&&u(n,["response"],p);const _=h(i,["response","generateVideoResponse"]);return _!=null&&u(n,["result"],ku(r,_)),n}function bu(r,i){const n={},s=h(i,["gcsUri"]);s!=null&&u(n,["uri"],s);const l=h(i,["bytesBase64Encoded"]);l!=null&&u(n,["videoBytes"],Ft(r,l));const f=h(i,["mimeType"]);return f!=null&&u(n,["mimeType"],f),n}function Du(r,i){const n={},s=h(i,["_self"]);return s!=null&&u(n,["video"],bu(r,s)),n}function Bu(r,i){const n={},s=h(i,["videos"]);s!=null&&(Array.isArray(s)?u(n,["generatedVideos"],s.map(d=>Du(r,d))):u(n,["generatedVideos"],s));const l=h(i,["raiMediaFilteredCount"]);l!=null&&u(n,["raiMediaFilteredCount"],l);const f=h(i,["raiMediaFilteredReasons"]);return f!=null&&u(n,["raiMediaFilteredReasons"],f),n}function bo(r,i){const n={},s=h(i,["name"]);s!=null&&u(n,["name"],s);const l=h(i,["metadata"]);l!=null&&u(n,["metadata"],l);const f=h(i,["done"]);f!=null&&u(n,["done"],f);const d=h(i,["error"]);d!=null&&u(n,["error"],d);const p=h(i,["response"]);p!=null&&u(n,["response"],p);const _=h(i,["response"]);return _!=null&&u(n,["result"],Bu(r,_)),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class zu extends Xe{constructor(i){super(),this.apiClient=i}async get(i){const n=i.operation,s=i.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const f=n.name.split("/operations/")[0];var l=void 0;return s&&"httpOptions"in s&&(l=s.httpOptions),this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:f,config:{httpOptions:l}})}else return this.getVideosOperationInternal({operationName:n.name,config:s})}async getVideosOperationInternal(i){var n,s;let l,f="",d={};if(this.apiClient.isVertexAI()){const p=Su(this.apiClient,i);return f=q("{operationName}",p._url),d=p._query,delete p.config,delete p._url,delete p._query,l=this.apiClient.request({path:f,queryParams:d,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(n=i.config)===null||n===void 0?void 0:n.httpOptions}).then(_=>_.json()),l.then(_=>bo(this.apiClient,_))}else{const p=Lu(this.apiClient,i);return f=q("{operationName}",p._url),d=p._query,delete p.config,delete p._url,delete p._query,l=this.apiClient.request({path:f,queryParams:d,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(s=i.config)===null||s===void 0?void 0:s.httpOptions}).then(_=>_.json()),l.then(_=>Nu(this.apiClient,_))}}async fetchPredictVideosOperationInternal(i){var n;let s,l="",f={};if(this.apiClient.isVertexAI()){const d=Iu(this.apiClient,i);return l=q("{resourceName}:fetchPredictOperation",d._url),f=d._query,delete d.config,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:f,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=i.config)===null||n===void 0?void 0:n.httpOptions}).then(p=>p.json()),s.then(p=>bo(this.apiClient,p))}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Ou="Content-Type",Fu="User-Agent",Zu="x-goog-api-client",Vu="0.7.0",Uu=`google-genai-sdk/${Vu}`,qu="v1beta1",Gu="v1beta",Do=/^data: (.*)(?:\n\n|\r\r|\r\n\r\n)/;class Hu extends Error{constructor(i,n){n?super(i,{cause:n}):super(i,{cause:new Error().stack}),this.message=i,this.name="ClientError"}}class Bo extends Error{constructor(i,n){n?super(i,{cause:n}):super(i,{cause:new Error().stack}),this.message=i,this.name="ServerError"}}class Wu{constructor(i){var n,s;this.clientOptions=Object.assign(Object.assign({},i),{project:i.project,location:i.location,apiKey:i.apiKey,vertexai:i.vertexai});const l={};this.clientOptions.vertexai?(l.apiVersion=(n=this.clientOptions.apiVersion)!==null&&n!==void 0?n:qu,this.getProject()||this.getLocation()?(l.baseUrl=`https://${this.clientOptions.location}-aiplatform.googleapis.com/`,this.clientOptions.apiKey=void 0):(l.baseUrl="https://aiplatform.googleapis.com/",this.clientOptions.project=void 0,this.clientOptions.location=void 0)):(l.apiVersion=(s=this.clientOptions.apiVersion)!==null&&s!==void 0?s:Gu,l.baseUrl="https://generativelanguage.googleapis.com/"),l.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=l,i.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(l,i.httpOptions))}isVertexAI(){var i;return(i=this.clientOptions.vertexai)!==null&&i!==void 0?i:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(i){if(!i||i.baseUrl===void 0||i.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const s=[i.baseUrl.endsWith("/")?i.baseUrl.slice(0,-1):i.baseUrl];return i.apiVersion&&i.apiVersion!==""&&s.push(i.apiVersion),s.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const i=this.getBaseUrl(),n=new URL(i);return n.protocol="wss",n.toString()}setBaseUrl(i){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=i;else throw new Error("HTTP options are not correctly set.")}constructUrl(i,n){const s=[this.getRequestUrlInternal(n)];return this.clientOptions.vertexai&&!this.clientOptions.apiKey&&!i.startsWith("projects/")&&s.push(this.getBaseResourcePath()),i!==""&&s.push(i),new URL(`${s.join("/")}`)}async request(i){let n=this.clientOptions.httpOptions;i.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,i.httpOptions));const s=this.constructUrl(i.path,n);if(i.queryParams)for(const[f,d]of Object.entries(i.queryParams))s.searchParams.append(f,String(d));let l={};if(i.httpMethod==="GET"){if(i.body&&i.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else l.body=i.body;return l=await this.includeExtraHttpOptionsToRequestInit(l,n),this.unaryApiCall(s,l,i.httpMethod)}patchHttpOptions(i,n){const s=JSON.parse(JSON.stringify(i));for(const[l,f]of Object.entries(n))typeof f=="object"?s[l]=Object.assign(Object.assign({},s[l]),f):f!==void 0&&(s[l]=f);return s}async requestStream(i){let n=this.clientOptions.httpOptions;i.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,i.httpOptions));const s=this.constructUrl(i.path,n);(!s.searchParams.has("alt")||s.searchParams.get("alt")!=="sse")&&s.searchParams.set("alt","sse");let l={};return l.body=i.body,l=await this.includeExtraHttpOptionsToRequestInit(l,n),this.streamApiCall(s,l,i.httpMethod)}async includeExtraHttpOptionsToRequestInit(i,n){if(n&&n.timeout&&n.timeout>0){const s=new AbortController,l=s.signal;setTimeout(()=>s.abort(),n.timeout),i.signal=l}return i.headers=await this.getHeadersInternal(n),i}async unaryApiCall(i,n,s){return this.apiCall(i.toString(),Object.assign(Object.assign({},n),{method:s})).then(async l=>(await zo(l),new $o(l))).catch(l=>{throw l instanceof Error?l:new Error(JSON.stringify(l))})}async streamApiCall(i,n,s){return this.apiCall(i.toString(),Object.assign(Object.assign({},n),{method:s})).then(async l=>(await zo(l),this.processStreamResponse(l))).catch(l=>{throw l instanceof Error?l:new Error(JSON.stringify(l))})}processStreamResponse(i){var n;return Je(this,arguments,function*(){const l=(n=i==null?void 0:i.body)===null||n===void 0?void 0:n.getReader(),f=new TextDecoder("utf-8");if(!l)throw new Error("Response body is empty");try{let d="";for(;;){const{done:p,value:_}=yield dt(l.read());if(p){if(d.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const v=f.decode(_);d+=v;let T=d.match(Do);for(;T;){const w=T[1];try{const x=JSON.parse(w);yield yield dt(x),d=d.slice(T[0].length),T=d.match(Do)}catch(x){throw new Error(`exception parsing stream chunk ${w}. ${x}`)}}}}finally{l.releaseLock()}})}async apiCall(i,n){return fetch(i,n).catch(s=>{throw new Error(`exception ${s} sending request`)})}getDefaultHeaders(){const i={},n=Uu+" "+this.clientOptions.userAgentExtra;return i[Fu]=n,i[Zu]=n,i[Ou]="application/json",i}async getHeadersInternal(i){const n=new Headers;if(i&&i.headers)for(const[s,l]of Object.entries(i.headers))n.append(s,l);return await this.clientOptions.auth.addAuthHeaders(n),n}async uploadFile(i,n){var s;const l={};n!=null&&(l.mimeType=n.mimeType,l.name=n.name,l.displayName=n.displayName),l.name&&!l.name.startsWith("files/")&&(l.name=`files/${l.name}`);const f=this.clientOptions.uploader,d=await f.stat(i);l.sizeBytes=String(d.size);const p=(s=n==null?void 0:n.mimeType)!==null&&s!==void 0?s:d.type;if(p===void 0||p==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");l.mimeType=p;const _=await this.fetchUploadUrl(l,n);return f.upload(i,_,this)}async fetchUploadUrl(i,n){var s;let l={};n!=null&&n.httpOptions?l=n.httpOptions:l={apiVersion:"",headers:{"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${i.sizeBytes}`,"X-Goog-Upload-Header-Content-Type":`${i.mimeType}`}};const f={file:i},d=await this.request({path:q("upload/v1beta/files",f._url),body:JSON.stringify(f),httpMethod:"POST",httpOptions:l});if(!d||!(d!=null&&d.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const p=(s=d==null?void 0:d.headers)===null||s===void 0?void 0:s["x-goog-upload-url"];if(p===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return p}}async function zo(r){var i;if(r===void 0)throw new Bo("response is undefined");if(!r.ok){const n=r.status,s=r.statusText;let l;!((i=r.headers.get("content-type"))===null||i===void 0)&&i.includes("application/json")?l=await r.json():l={error:{message:"exception parsing response",code:r.status,status:r.statusText}};const f=`got status: ${n} ${s}. ${JSON.stringify(l)}`;throw n>=400&&n<500?new Hu(f):n>=500&&n<600?new Bo(f):new Error(f)}}const Ku=1024*1024*8;async function Yu(r,i,n){var s,l;let f=0,d=0,p=new $o(new Response),_="upload";for(f=r.size;d<f;){const T=Math.min(Ku,f-d),w=r.slice(d,d+T);if(d+T>=f&&(_+=", finalize"),p=await n.request({path:"",body:w,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:i,headers:{"X-Goog-Upload-Command":_,"X-Goog-Upload-Offset":String(d),"Content-Length":String(T)}}}),d+=T,((s=p==null?void 0:p.headers)===null||s===void 0?void 0:s["x-goog-upload-status"])!=="active")break;if(f<=d)throw new Error("All content has been uploaded, but the upload status is not finalized.")}const v=await(p==null?void 0:p.json());if(((l=p==null?void 0:p.headers)===null||l===void 0?void 0:l["x-goog-upload-status"])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return v.file}async function $u(r){return{size:r.size,type:r.type}}class Ju{async upload(i,n,s){if(typeof i=="string")throw new Error("File path is not supported in browser uploader.");return await Yu(i,n,s)}async stat(i){if(typeof i=="string")throw new Error("File path is not supported in browser uploader.");return await $u(i)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Xu{create(i,n,s){return new Qu(i,n,s)}}class Qu{constructor(i,n,s){this.url=i,this.headers=n,this.callbacks=s}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(i){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(i)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Oo="x-goog-api-key";class ju{constructor(i){this.apiKey=i}async addAuthHeaders(i){i.get(Oo)===null&&i.append(Oo,this.apiKey)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const th="gl-node/";class eh{constructor(i){var n;if(i.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(i.project||i.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(n=i.vertexai)!==null&&n!==void 0?n:!1,this.apiKey=i.apiKey,this.apiVersion=i.apiVersion;const s=new ju(this.apiKey);this.apiClient=new Wu({auth:s,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:i.httpOptions,userAgentExtra:th+"web",uploader:new Ju}),this.models=new Mu(this.apiClient),this.live=new Cu(this.apiClient,s,new Xu),this.chats=new Pa(this.models,this.apiClient),this.caches=new ya(this.apiClient),this.files=new Ba(this.apiClient),this.operations=new zu(this.apiClient)}}var ye={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */var nh=ye.exports,Fo;function ih(){return Fo||(Fo=1,function(r,i){(function(n,s){s(i)})(nh,function(n){var s="1.9.4";function l(t){var e,o,a,c;for(o=1,a=arguments.length;o<a;o++){c=arguments[o];for(e in c)t[e]=c[e]}return t}var f=Object.create||function(){function t(){}return function(e){return t.prototype=e,new t}}();function d(t,e){var o=Array.prototype.slice;if(t.bind)return t.bind.apply(t,o.call(arguments,1));var a=o.call(arguments,2);return function(){return t.apply(e,a.length?a.concat(o.call(arguments)):arguments)}}var p=0;function _(t){return"_leaflet_id"in t||(t._leaflet_id=++p),t._leaflet_id}function v(t,e,o){var a,c,m,g;return g=function(){a=!1,c&&(m.apply(o,c),c=!1)},m=function(){a?c=arguments:(t.apply(o,arguments),setTimeout(g,e),a=!0)},m}function T(t,e,o){var a=e[1],c=e[0],m=a-c;return t===a&&o?t:((t-c)%m+m)%m+c}function w(){return!1}function x(t,e){if(e===!1)return t;var o=Math.pow(10,e===void 0?6:e);return Math.round(t*o)/o}function E(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function I(t){return E(t).split(/\s+/)}function S(t,e){Object.prototype.hasOwnProperty.call(t,"options")||(t.options=t.options?f(t.options):{});for(var o in e)t.options[o]=e[o];return t.options}function D(t,e,o){var a=[];for(var c in t)a.push(encodeURIComponent(o?c.toUpperCase():c)+"="+encodeURIComponent(t[c]));return(!e||e.indexOf("?")===-1?"?":"&")+a.join("&")}var G=/\{ *([\w_ -]+) *\}/g;function O(t,e){return t.replace(G,function(o,a){var c=e[a];if(c===void 0)throw new Error("No value provided for variable "+o);return typeof c=="function"&&(c=c(e)),c})}var F=Array.isArray||function(t){return Object.prototype.toString.call(t)==="[object Array]"};function et(t,e){for(var o=0;o<t.length;o++)if(t[o]===e)return o;return-1}var ot="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function st(t){return window["webkit"+t]||window["moz"+t]||window["ms"+t]}var lt=0;function ut(t){var e=+new Date,o=Math.max(0,16-(e-lt));return lt=e+o,window.setTimeout(t,o)}var Mt=window.requestAnimationFrame||st("RequestAnimationFrame")||ut,Lt=window.cancelAnimationFrame||st("CancelAnimationFrame")||st("CancelRequestAnimationFrame")||function(t){window.clearTimeout(t)};function nt(t,e,o){if(o&&Mt===ut)t.call(e);else return Mt.call(window,d(t,e))}function rt(t){t&&Lt.call(window,t)}var ie={__proto__:null,extend:l,create:f,bind:d,get lastId(){return p},stamp:_,throttle:v,wrapNum:T,falseFn:w,formatNum:x,trim:E,splitWords:I,setOptions:S,getParamString:D,template:O,isArray:F,indexOf:et,emptyImageUrl:ot,requestFn:Mt,cancelFn:Lt,requestAnimFrame:nt,cancelAnimFrame:rt};function St(){}St.extend=function(t){var e=function(){S(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},o=e.__super__=this.prototype,a=f(o);a.constructor=e,e.prototype=a;for(var c in this)Object.prototype.hasOwnProperty.call(this,c)&&c!=="prototype"&&c!=="__super__"&&(e[c]=this[c]);return t.statics&&l(e,t.statics),t.includes&&(os(t.includes),l.apply(null,[a].concat(t.includes))),l(a,t),delete a.statics,delete a.includes,a.options&&(a.options=o.options?f(o.options):{},l(a.options,t.options)),a._initHooks=[],a.callInitHooks=function(){if(!this._initHooksCalled){o.callInitHooks&&o.callInitHooks.call(this),this._initHooksCalled=!0;for(var m=0,g=a._initHooks.length;m<g;m++)a._initHooks[m].call(this)}},e},St.include=function(t){var e=this.prototype.options;return l(this.prototype,t),t.options&&(this.prototype.options=e,this.mergeOptions(t.options)),this},St.mergeOptions=function(t){return l(this.prototype.options,t),this},St.addInitHook=function(t){var e=Array.prototype.slice.call(arguments,1),o=typeof t=="function"?t:function(){this[t].apply(this,e)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(o),this};function os(t){if(!(typeof L>"u"||!L||!L.Mixin)){t=F(t)?t:[t];for(var e=0;e<t.length;e++)t[e]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var mt={on:function(t,e,o){if(typeof t=="object")for(var a in t)this._on(a,t[a],e);else{t=I(t);for(var c=0,m=t.length;c<m;c++)this._on(t[c],e,o)}return this},off:function(t,e,o){if(!arguments.length)delete this._events;else if(typeof t=="object")for(var a in t)this._off(a,t[a],e);else{t=I(t);for(var c=arguments.length===1,m=0,g=t.length;m<g;m++)c?this._off(t[m]):this._off(t[m],e,o)}return this},_on:function(t,e,o,a){if(typeof e!="function"){console.warn("wrong listener type: "+typeof e);return}if(this._listens(t,e,o)===!1){o===this&&(o=void 0);var c={fn:e,ctx:o};a&&(c.once=!0),this._events=this._events||{},this._events[t]=this._events[t]||[],this._events[t].push(c)}},_off:function(t,e,o){var a,c,m;if(this._events&&(a=this._events[t],!!a)){if(arguments.length===1){if(this._firingCount)for(c=0,m=a.length;c<m;c++)a[c].fn=w;delete this._events[t];return}if(typeof e!="function"){console.warn("wrong listener type: "+typeof e);return}var g=this._listens(t,e,o);if(g!==!1){var y=a[g];this._firingCount&&(y.fn=w,this._events[t]=a=a.slice()),a.splice(g,1)}}},fire:function(t,e,o){if(!this.listens(t,o))return this;var a=l({},e,{type:t,target:this,sourceTarget:e&&e.sourceTarget||this});if(this._events){var c=this._events[t];if(c){this._firingCount=this._firingCount+1||1;for(var m=0,g=c.length;m<g;m++){var y=c[m],C=y.fn;y.once&&this.off(t,C,y.ctx),C.call(y.ctx||this,a)}this._firingCount--}}return o&&this._propagateEvent(a),this},listens:function(t,e,o,a){typeof t!="string"&&console.warn('"string" type argument expected');var c=e;typeof e!="function"&&(a=!!e,c=void 0,o=void 0);var m=this._events&&this._events[t];if(m&&m.length&&this._listens(t,c,o)!==!1)return!0;if(a){for(var g in this._eventParents)if(this._eventParents[g].listens(t,e,o,a))return!0}return!1},_listens:function(t,e,o){if(!this._events)return!1;var a=this._events[t]||[];if(!e)return!!a.length;o===this&&(o=void 0);for(var c=0,m=a.length;c<m;c++)if(a[c].fn===e&&a[c].ctx===o)return c;return!1},once:function(t,e,o){if(typeof t=="object")for(var a in t)this._on(a,t[a],e,!0);else{t=I(t);for(var c=0,m=t.length;c<m;c++)this._on(t[c],e,o,!0)}return this},addEventParent:function(t){return this._eventParents=this._eventParents||{},this._eventParents[_(t)]=t,this},removeEventParent:function(t){return this._eventParents&&delete this._eventParents[_(t)],this},_propagateEvent:function(t){for(var e in this._eventParents)this._eventParents[e].fire(t.type,l({layer:t.target,propagatedFrom:t.target},t),!0)}};mt.addEventListener=mt.on,mt.removeEventListener=mt.clearAllEventListeners=mt.off,mt.addOneTimeEventListener=mt.once,mt.fireEvent=mt.fire,mt.hasEventListeners=mt.listens;var oe=St.extend(mt);function N(t,e,o){this.x=o?Math.round(t):t,this.y=o?Math.round(e):e}var Fn=Math.trunc||function(t){return t>0?Math.floor(t):Math.ceil(t)};N.prototype={clone:function(){return new N(this.x,this.y)},add:function(t){return this.clone()._add(k(t))},_add:function(t){return this.x+=t.x,this.y+=t.y,this},subtract:function(t){return this.clone()._subtract(k(t))},_subtract:function(t){return this.x-=t.x,this.y-=t.y,this},divideBy:function(t){return this.clone()._divideBy(t)},_divideBy:function(t){return this.x/=t,this.y/=t,this},multiplyBy:function(t){return this.clone()._multiplyBy(t)},_multiplyBy:function(t){return this.x*=t,this.y*=t,this},scaleBy:function(t){return new N(this.x*t.x,this.y*t.y)},unscaleBy:function(t){return new N(this.x/t.x,this.y/t.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=Fn(this.x),this.y=Fn(this.y),this},distanceTo:function(t){t=k(t);var e=t.x-this.x,o=t.y-this.y;return Math.sqrt(e*e+o*o)},equals:function(t){return t=k(t),t.x===this.x&&t.y===this.y},contains:function(t){return t=k(t),Math.abs(t.x)<=Math.abs(this.x)&&Math.abs(t.y)<=Math.abs(this.y)},toString:function(){return"Point("+x(this.x)+", "+x(this.y)+")"}};function k(t,e,o){return t instanceof N?t:F(t)?new N(t[0],t[1]):t==null?t:typeof t=="object"&&"x"in t&&"y"in t?new N(t.x,t.y):new N(t,e,o)}function K(t,e){if(t)for(var o=e?[t,e]:t,a=0,c=o.length;a<c;a++)this.extend(o[a])}K.prototype={extend:function(t){var e,o;if(!t)return this;if(t instanceof N||typeof t[0]=="number"||"x"in t)e=o=k(t);else if(t=ht(t),e=t.min,o=t.max,!e||!o)return this;return!this.min&&!this.max?(this.min=e.clone(),this.max=o.clone()):(this.min.x=Math.min(e.x,this.min.x),this.max.x=Math.max(o.x,this.max.x),this.min.y=Math.min(e.y,this.min.y),this.max.y=Math.max(o.y,this.max.y)),this},getCenter:function(t){return k((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,t)},getBottomLeft:function(){return k(this.min.x,this.max.y)},getTopRight:function(){return k(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(t){var e,o;return typeof t[0]=="number"||t instanceof N?t=k(t):t=ht(t),t instanceof K?(e=t.min,o=t.max):e=o=t,e.x>=this.min.x&&o.x<=this.max.x&&e.y>=this.min.y&&o.y<=this.max.y},intersects:function(t){t=ht(t);var e=this.min,o=this.max,a=t.min,c=t.max,m=c.x>=e.x&&a.x<=o.x,g=c.y>=e.y&&a.y<=o.y;return m&&g},overlaps:function(t){t=ht(t);var e=this.min,o=this.max,a=t.min,c=t.max,m=c.x>e.x&&a.x<o.x,g=c.y>e.y&&a.y<o.y;return m&&g},isValid:function(){return!!(this.min&&this.max)},pad:function(t){var e=this.min,o=this.max,a=Math.abs(e.x-o.x)*t,c=Math.abs(e.y-o.y)*t;return ht(k(e.x-a,e.y-c),k(o.x+a,o.y+c))},equals:function(t){return t?(t=ht(t),this.min.equals(t.getTopLeft())&&this.max.equals(t.getBottomRight())):!1}};function ht(t,e){return!t||t instanceof K?t:new K(t,e)}function ct(t,e){if(t)for(var o=e?[t,e]:t,a=0,c=o.length;a<c;a++)this.extend(o[a])}ct.prototype={extend:function(t){var e=this._southWest,o=this._northEast,a,c;if(t instanceof H)a=t,c=t;else if(t instanceof ct){if(a=t._southWest,c=t._northEast,!a||!c)return this}else return t?this.extend(Z(t)||X(t)):this;return!e&&!o?(this._southWest=new H(a.lat,a.lng),this._northEast=new H(c.lat,c.lng)):(e.lat=Math.min(a.lat,e.lat),e.lng=Math.min(a.lng,e.lng),o.lat=Math.max(c.lat,o.lat),o.lng=Math.max(c.lng,o.lng)),this},pad:function(t){var e=this._southWest,o=this._northEast,a=Math.abs(e.lat-o.lat)*t,c=Math.abs(e.lng-o.lng)*t;return new ct(new H(e.lat-a,e.lng-c),new H(o.lat+a,o.lng+c))},getCenter:function(){return new H((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new H(this.getNorth(),this.getWest())},getSouthEast:function(){return new H(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(t){typeof t[0]=="number"||t instanceof H||"lat"in t?t=Z(t):t=X(t);var e=this._southWest,o=this._northEast,a,c;return t instanceof ct?(a=t.getSouthWest(),c=t.getNorthEast()):a=c=t,a.lat>=e.lat&&c.lat<=o.lat&&a.lng>=e.lng&&c.lng<=o.lng},intersects:function(t){t=X(t);var e=this._southWest,o=this._northEast,a=t.getSouthWest(),c=t.getNorthEast(),m=c.lat>=e.lat&&a.lat<=o.lat,g=c.lng>=e.lng&&a.lng<=o.lng;return m&&g},overlaps:function(t){t=X(t);var e=this._southWest,o=this._northEast,a=t.getSouthWest(),c=t.getNorthEast(),m=c.lat>e.lat&&a.lat<o.lat,g=c.lng>e.lng&&a.lng<o.lng;return m&&g},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(t,e){return t?(t=X(t),this._southWest.equals(t.getSouthWest(),e)&&this._northEast.equals(t.getNorthEast(),e)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function X(t,e){return t instanceof ct?t:new ct(t,e)}function H(t,e,o){if(isNaN(t)||isNaN(e))throw new Error("Invalid LatLng object: ("+t+", "+e+")");this.lat=+t,this.lng=+e,o!==void 0&&(this.alt=+o)}H.prototype={equals:function(t,e){if(!t)return!1;t=Z(t);var o=Math.max(Math.abs(this.lat-t.lat),Math.abs(this.lng-t.lng));return o<=(e===void 0?1e-9:e)},toString:function(t){return"LatLng("+x(this.lat,t)+", "+x(this.lng,t)+")"},distanceTo:function(t){return Dt.distance(this,Z(t))},wrap:function(){return Dt.wrapLatLng(this)},toBounds:function(t){var e=180*t/40075017,o=e/Math.cos(Math.PI/180*this.lat);return X([this.lat-e,this.lng-o],[this.lat+e,this.lng+o])},clone:function(){return new H(this.lat,this.lng,this.alt)}};function Z(t,e,o){return t instanceof H?t:F(t)&&typeof t[0]!="object"?t.length===3?new H(t[0],t[1],t[2]):t.length===2?new H(t[0],t[1]):null:t==null?t:typeof t=="object"&&"lat"in t?new H(t.lat,"lng"in t?t.lng:t.lon,t.alt):e===void 0?null:new H(t,e,o)}var It={latLngToPoint:function(t,e){var o=this.projection.project(t),a=this.scale(e);return this.transformation._transform(o,a)},pointToLatLng:function(t,e){var o=this.scale(e),a=this.transformation.untransform(t,o);return this.projection.unproject(a)},project:function(t){return this.projection.project(t)},unproject:function(t){return this.projection.unproject(t)},scale:function(t){return 256*Math.pow(2,t)},zoom:function(t){return Math.log(t/256)/Math.LN2},getProjectedBounds:function(t){if(this.infinite)return null;var e=this.projection.bounds,o=this.scale(t),a=this.transformation.transform(e.min,o),c=this.transformation.transform(e.max,o);return new K(a,c)},infinite:!1,wrapLatLng:function(t){var e=this.wrapLng?T(t.lng,this.wrapLng,!0):t.lng,o=this.wrapLat?T(t.lat,this.wrapLat,!0):t.lat,a=t.alt;return new H(o,e,a)},wrapLatLngBounds:function(t){var e=t.getCenter(),o=this.wrapLatLng(e),a=e.lat-o.lat,c=e.lng-o.lng;if(a===0&&c===0)return t;var m=t.getSouthWest(),g=t.getNorthEast(),y=new H(m.lat-a,m.lng-c),C=new H(g.lat-a,g.lng-c);return new ct(y,C)}},Dt=l({},It,{wrapLng:[-180,180],R:6371e3,distance:function(t,e){var o=Math.PI/180,a=t.lat*o,c=e.lat*o,m=Math.sin((e.lat-t.lat)*o/2),g=Math.sin((e.lng-t.lng)*o/2),y=m*m+Math.cos(a)*Math.cos(c)*g*g,C=2*Math.atan2(Math.sqrt(y),Math.sqrt(1-y));return this.R*C}}),Zn=6378137,Qe={R:Zn,MAX_LATITUDE:85.0511287798,project:function(t){var e=Math.PI/180,o=this.MAX_LATITUDE,a=Math.max(Math.min(o,t.lat),-o),c=Math.sin(a*e);return new N(this.R*t.lng*e,this.R*Math.log((1+c)/(1-c))/2)},unproject:function(t){var e=180/Math.PI;return new H((2*Math.atan(Math.exp(t.y/this.R))-Math.PI/2)*e,t.x*e/this.R)},bounds:function(){var t=Zn*Math.PI;return new K([-t,-t],[t,t])}()};function je(t,e,o,a){if(F(t)){this._a=t[0],this._b=t[1],this._c=t[2],this._d=t[3];return}this._a=t,this._b=e,this._c=o,this._d=a}je.prototype={transform:function(t,e){return this._transform(t.clone(),e)},_transform:function(t,e){return e=e||1,t.x=e*(this._a*t.x+this._b),t.y=e*(this._c*t.y+this._d),t},untransform:function(t,e){return e=e||1,new N((t.x/e-this._b)/this._a,(t.y/e-this._d)/this._c)}};function se(t,e,o,a){return new je(t,e,o,a)}var tn=l({},Dt,{code:"EPSG:3857",projection:Qe,transformation:function(){var t=.5/(Math.PI*Qe.R);return se(t,.5,-t,.5)}()}),ss=l({},tn,{code:"EPSG:900913"});function Vn(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function Un(t,e){var o="",a,c,m,g,y,C;for(a=0,m=t.length;a<m;a++){for(y=t[a],c=0,g=y.length;c<g;c++)C=y[c],o+=(c?"L":"M")+C.x+" "+C.y;o+=e?A.svg?"z":"x":""}return o||"M0 0"}var en=document.documentElement.style,Ee="ActiveXObject"in window,rs=Ee&&!document.addEventListener,qn="msLaunchUri"in navigator&&!("documentMode"in document),nn=wt("webkit"),Gn=wt("android"),Hn=wt("android 2")||wt("android 3"),as=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),ls=Gn&&wt("Google")&&as<537&&!("AudioNode"in window),on=!!window.opera,Wn=!qn&&wt("chrome"),Kn=wt("gecko")&&!nn&&!on&&!Ee,us=!Wn&&wt("safari"),Yn=wt("phantom"),$n="OTransition"in en,hs=navigator.platform.indexOf("Win")===0,Jn=Ee&&"transition"in en,sn="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!Hn,Xn="MozPerspective"in en,cs=!window.L_DISABLE_3D&&(Jn||sn||Xn)&&!$n&&!Yn,re=typeof orientation<"u"||wt("mobile"),fs=re&&nn,ds=re&&sn,Qn=!window.PointerEvent&&window.MSPointerEvent,jn=!!(window.PointerEvent||Qn),ti="ontouchstart"in window||!!window.TouchEvent,ps=!window.L_NO_TOUCH&&(ti||jn),ms=re&&on,_s=re&&Kn,gs=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,vs=function(){var t=!1;try{var e=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("testPassiveEventSupport",w,e),window.removeEventListener("testPassiveEventSupport",w,e)}catch{}return t}(),ys=function(){return!!document.createElement("canvas").getContext}(),rn=!!(document.createElementNS&&Vn("svg").createSVGRect),Ts=!!rn&&function(){var t=document.createElement("div");return t.innerHTML="<svg/>",(t.firstChild&&t.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),Cs=!rn&&function(){try{var t=document.createElement("div");t.innerHTML='<v:shape adj="1"/>';var e=t.firstChild;return e.style.behavior="url(#default#VML)",e&&typeof e.adj=="object"}catch{return!1}}(),ws=navigator.platform.indexOf("Mac")===0,Ps=navigator.platform.indexOf("Linux")===0;function wt(t){return navigator.userAgent.toLowerCase().indexOf(t)>=0}var A={ie:Ee,ielt9:rs,edge:qn,webkit:nn,android:Gn,android23:Hn,androidStock:ls,opera:on,chrome:Wn,gecko:Kn,safari:us,phantom:Yn,opera12:$n,win:hs,ie3d:Jn,webkit3d:sn,gecko3d:Xn,any3d:cs,mobile:re,mobileWebkit:fs,mobileWebkit3d:ds,msPointer:Qn,pointer:jn,touch:ps,touchNative:ti,mobileOpera:ms,mobileGecko:_s,retina:gs,passiveEvents:vs,canvas:ys,svg:rn,vml:Cs,inlineSvg:Ts,mac:ws,linux:Ps},ei=A.msPointer?"MSPointerDown":"pointerdown",ni=A.msPointer?"MSPointerMove":"pointermove",ii=A.msPointer?"MSPointerUp":"pointerup",oi=A.msPointer?"MSPointerCancel":"pointercancel",an={touchstart:ei,touchmove:ni,touchend:ii,touchcancel:oi},si={touchstart:Is,touchmove:Me,touchend:Me,touchcancel:Me},Wt={},ri=!1;function xs(t,e,o){return e==="touchstart"&&Ss(),si[e]?(o=si[e].bind(this,o),t.addEventListener(an[e],o,!1),o):(console.warn("wrong event specified:",e),w)}function Es(t,e,o){if(!an[e]){console.warn("wrong event specified:",e);return}t.removeEventListener(an[e],o,!1)}function Ms(t){Wt[t.pointerId]=t}function Ls(t){Wt[t.pointerId]&&(Wt[t.pointerId]=t)}function ai(t){delete Wt[t.pointerId]}function Ss(){ri||(document.addEventListener(ei,Ms,!0),document.addEventListener(ni,Ls,!0),document.addEventListener(ii,ai,!0),document.addEventListener(oi,ai,!0),ri=!0)}function Me(t,e){if(e.pointerType!==(e.MSPOINTER_TYPE_MOUSE||"mouse")){e.touches=[];for(var o in Wt)e.touches.push(Wt[o]);e.changedTouches=[e],t(e)}}function Is(t,e){e.MSPOINTER_TYPE_TOUCH&&e.pointerType===e.MSPOINTER_TYPE_TOUCH&&it(e),Me(t,e)}function As(t){var e={},o,a;for(a in t)o=t[a],e[a]=o&&o.bind?o.bind(t):o;return t=e,e.type="dblclick",e.detail=2,e.isTrusted=!1,e._simulated=!0,e}var Rs=200;function ks(t,e){t.addEventListener("dblclick",e);var o=0,a;function c(m){if(m.detail!==1){a=m.detail;return}if(!(m.pointerType==="mouse"||m.sourceCapabilities&&!m.sourceCapabilities.firesTouchEvents)){var g=fi(m);if(!(g.some(function(C){return C instanceof HTMLLabelElement&&C.attributes.for})&&!g.some(function(C){return C instanceof HTMLInputElement||C instanceof HTMLSelectElement}))){var y=Date.now();y-o<=Rs?(a++,a===2&&e(As(m))):a=1,o=y}}}return t.addEventListener("click",c),{dblclick:e,simDblclick:c}}function Ns(t,e){t.removeEventListener("dblclick",e.dblclick),t.removeEventListener("click",e.simDblclick)}var ln=Ie(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),ae=Ie(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),li=ae==="webkitTransition"||ae==="OTransition"?ae+"End":"transitionend";function ui(t){return typeof t=="string"?document.getElementById(t):t}function le(t,e){var o=t.style[e]||t.currentStyle&&t.currentStyle[e];if((!o||o==="auto")&&document.defaultView){var a=document.defaultView.getComputedStyle(t,null);o=a?a[e]:null}return o==="auto"?null:o}function U(t,e,o){var a=document.createElement(t);return a.className=e||"",o&&o.appendChild(a),a}function Y(t){var e=t.parentNode;e&&e.removeChild(t)}function Le(t){for(;t.firstChild;)t.removeChild(t.firstChild)}function Kt(t){var e=t.parentNode;e&&e.lastChild!==t&&e.appendChild(t)}function Yt(t){var e=t.parentNode;e&&e.firstChild!==t&&e.insertBefore(t,e.firstChild)}function un(t,e){if(t.classList!==void 0)return t.classList.contains(e);var o=Se(t);return o.length>0&&new RegExp("(^|\\s)"+e+"(\\s|$)").test(o)}function B(t,e){if(t.classList!==void 0)for(var o=I(e),a=0,c=o.length;a<c;a++)t.classList.add(o[a]);else if(!un(t,e)){var m=Se(t);hn(t,(m?m+" ":"")+e)}}function J(t,e){t.classList!==void 0?t.classList.remove(e):hn(t,E((" "+Se(t)+" ").replace(" "+e+" "," ")))}function hn(t,e){t.className.baseVal===void 0?t.className=e:t.className.baseVal=e}function Se(t){return t.correspondingElement&&(t=t.correspondingElement),t.className.baseVal===void 0?t.className:t.className.baseVal}function _t(t,e){"opacity"in t.style?t.style.opacity=e:"filter"in t.style&&bs(t,e)}function bs(t,e){var o=!1,a="DXImageTransform.Microsoft.Alpha";try{o=t.filters.item(a)}catch{if(e===1)return}e=Math.round(e*100),o?(o.Enabled=e!==100,o.Opacity=e):t.style.filter+=" progid:"+a+"(opacity="+e+")"}function Ie(t){for(var e=document.documentElement.style,o=0;o<t.length;o++)if(t[o]in e)return t[o];return!1}function Zt(t,e,o){var a=e||new N(0,0);t.style[ln]=(A.ie3d?"translate("+a.x+"px,"+a.y+"px)":"translate3d("+a.x+"px,"+a.y+"px,0)")+(o?" scale("+o+")":"")}function Q(t,e){t._leaflet_pos=e,A.any3d?Zt(t,e):(t.style.left=e.x+"px",t.style.top=e.y+"px")}function Vt(t){return t._leaflet_pos||new N(0,0)}var ue,he,cn;if("onselectstart"in document)ue=function(){b(window,"selectstart",it)},he=function(){W(window,"selectstart",it)};else{var ce=Ie(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);ue=function(){if(ce){var t=document.documentElement.style;cn=t[ce],t[ce]="none"}},he=function(){ce&&(document.documentElement.style[ce]=cn,cn=void 0)}}function fn(){b(window,"dragstart",it)}function dn(){W(window,"dragstart",it)}var Ae,pn;function mn(t){for(;t.tabIndex===-1;)t=t.parentNode;t.style&&(Re(),Ae=t,pn=t.style.outlineStyle,t.style.outlineStyle="none",b(window,"keydown",Re))}function Re(){Ae&&(Ae.style.outlineStyle=pn,Ae=void 0,pn=void 0,W(window,"keydown",Re))}function hi(t){do t=t.parentNode;while((!t.offsetWidth||!t.offsetHeight)&&t!==document.body);return t}function _n(t){var e=t.getBoundingClientRect();return{x:e.width/t.offsetWidth||1,y:e.height/t.offsetHeight||1,boundingClientRect:e}}var Ds={__proto__:null,TRANSFORM:ln,TRANSITION:ae,TRANSITION_END:li,get:ui,getStyle:le,create:U,remove:Y,empty:Le,toFront:Kt,toBack:Yt,hasClass:un,addClass:B,removeClass:J,setClass:hn,getClass:Se,setOpacity:_t,testProp:Ie,setTransform:Zt,setPosition:Q,getPosition:Vt,get disableTextSelection(){return ue},get enableTextSelection(){return he},disableImageDrag:fn,enableImageDrag:dn,preventOutline:mn,restoreOutline:Re,getSizedParentNode:hi,getScale:_n};function b(t,e,o,a){if(e&&typeof e=="object")for(var c in e)vn(t,c,e[c],o);else{e=I(e);for(var m=0,g=e.length;m<g;m++)vn(t,e[m],o,a)}return this}var Pt="_leaflet_events";function W(t,e,o,a){if(arguments.length===1)ci(t),delete t[Pt];else if(e&&typeof e=="object")for(var c in e)yn(t,c,e[c],o);else if(e=I(e),arguments.length===2)ci(t,function(y){return et(e,y)!==-1});else for(var m=0,g=e.length;m<g;m++)yn(t,e[m],o,a);return this}function ci(t,e){for(var o in t[Pt]){var a=o.split(/\d/)[0];(!e||e(a))&&yn(t,a,null,null,o)}}var gn={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function vn(t,e,o,a){var c=e+_(o)+(a?"_"+_(a):"");if(t[Pt]&&t[Pt][c])return this;var m=function(y){return o.call(a||t,y||window.event)},g=m;!A.touchNative&&A.pointer&&e.indexOf("touch")===0?m=xs(t,e,m):A.touch&&e==="dblclick"?m=ks(t,m):"addEventListener"in t?e==="touchstart"||e==="touchmove"||e==="wheel"||e==="mousewheel"?t.addEventListener(gn[e]||e,m,A.passiveEvents?{passive:!1}:!1):e==="mouseenter"||e==="mouseleave"?(m=function(y){y=y||window.event,Cn(t,y)&&g(y)},t.addEventListener(gn[e],m,!1)):t.addEventListener(e,g,!1):t.attachEvent("on"+e,m),t[Pt]=t[Pt]||{},t[Pt][c]=m}function yn(t,e,o,a,c){c=c||e+_(o)+(a?"_"+_(a):"");var m=t[Pt]&&t[Pt][c];if(!m)return this;!A.touchNative&&A.pointer&&e.indexOf("touch")===0?Es(t,e,m):A.touch&&e==="dblclick"?Ns(t,m):"removeEventListener"in t?t.removeEventListener(gn[e]||e,m,!1):t.detachEvent("on"+e,m),t[Pt][c]=null}function Ut(t){return t.stopPropagation?t.stopPropagation():t.originalEvent?t.originalEvent._stopped=!0:t.cancelBubble=!0,this}function Tn(t){return vn(t,"wheel",Ut),this}function fe(t){return b(t,"mousedown touchstart dblclick contextmenu",Ut),t._leaflet_disable_click=!0,this}function it(t){return t.preventDefault?t.preventDefault():t.returnValue=!1,this}function qt(t){return it(t),Ut(t),this}function fi(t){if(t.composedPath)return t.composedPath();for(var e=[],o=t.target;o;)e.push(o),o=o.parentNode;return e}function di(t,e){if(!e)return new N(t.clientX,t.clientY);var o=_n(e),a=o.boundingClientRect;return new N((t.clientX-a.left)/o.x-e.clientLeft,(t.clientY-a.top)/o.y-e.clientTop)}var Bs=A.linux&&A.chrome?window.devicePixelRatio:A.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function pi(t){return A.edge?t.wheelDeltaY/2:t.deltaY&&t.deltaMode===0?-t.deltaY/Bs:t.deltaY&&t.deltaMode===1?-t.deltaY*20:t.deltaY&&t.deltaMode===2?-t.deltaY*60:t.deltaX||t.deltaZ?0:t.wheelDelta?(t.wheelDeltaY||t.wheelDelta)/2:t.detail&&Math.abs(t.detail)<32765?-t.detail*20:t.detail?t.detail/-32765*60:0}function Cn(t,e){var o=e.relatedTarget;if(!o)return!0;try{for(;o&&o!==t;)o=o.parentNode}catch{return!1}return o!==t}var zs={__proto__:null,on:b,off:W,stopPropagation:Ut,disableScrollPropagation:Tn,disableClickPropagation:fe,preventDefault:it,stop:qt,getPropagationPath:fi,getMousePosition:di,getWheelDelta:pi,isExternalTarget:Cn,addListener:b,removeListener:W},mi=oe.extend({run:function(t,e,o,a){this.stop(),this._el=t,this._inProgress=!0,this._duration=o||.25,this._easeOutPower=1/Math.max(a||.5,.2),this._startPos=Vt(t),this._offset=e.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=nt(this._animate,this),this._step()},_step:function(t){var e=+new Date-this._startTime,o=this._duration*1e3;e<o?this._runFrame(this._easeOut(e/o),t):(this._runFrame(1),this._complete())},_runFrame:function(t,e){var o=this._startPos.add(this._offset.multiplyBy(t));e&&o._round(),Q(this._el,o),this.fire("step")},_complete:function(){rt(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(t){return 1-Math.pow(1-t,this._easeOutPower)}}),V=oe.extend({options:{crs:tn,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(t,e){e=S(this,e),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(t),this._initLayout(),this._onResize=d(this._onResize,this),this._initEvents(),e.maxBounds&&this.setMaxBounds(e.maxBounds),e.zoom!==void 0&&(this._zoom=this._limitZoom(e.zoom)),e.center&&e.zoom!==void 0&&this.setView(Z(e.center),e.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=ae&&A.any3d&&!A.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),b(this._proxy,li,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(t,e,o){if(e=e===void 0?this._zoom:this._limitZoom(e),t=this._limitCenter(Z(t),e,this.options.maxBounds),o=o||{},this._stop(),this._loaded&&!o.reset&&o!==!0){o.animate!==void 0&&(o.zoom=l({animate:o.animate},o.zoom),o.pan=l({animate:o.animate,duration:o.duration},o.pan));var a=this._zoom!==e?this._tryAnimatedZoom&&this._tryAnimatedZoom(t,e,o.zoom):this._tryAnimatedPan(t,o.pan);if(a)return clearTimeout(this._sizeTimer),this}return this._resetView(t,e,o.pan&&o.pan.noMoveStart),this},setZoom:function(t,e){return this._loaded?this.setView(this.getCenter(),t,{zoom:e}):(this._zoom=t,this)},zoomIn:function(t,e){return t=t||(A.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+t,e)},zoomOut:function(t,e){return t=t||(A.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-t,e)},setZoomAround:function(t,e,o){var a=this.getZoomScale(e),c=this.getSize().divideBy(2),m=t instanceof N?t:this.latLngToContainerPoint(t),g=m.subtract(c).multiplyBy(1-1/a),y=this.containerPointToLatLng(c.add(g));return this.setView(y,e,{zoom:o})},_getBoundsCenterZoom:function(t,e){e=e||{},t=t.getBounds?t.getBounds():X(t);var o=k(e.paddingTopLeft||e.padding||[0,0]),a=k(e.paddingBottomRight||e.padding||[0,0]),c=this.getBoundsZoom(t,!1,o.add(a));if(c=typeof e.maxZoom=="number"?Math.min(e.maxZoom,c):c,c===1/0)return{center:t.getCenter(),zoom:c};var m=a.subtract(o).divideBy(2),g=this.project(t.getSouthWest(),c),y=this.project(t.getNorthEast(),c),C=this.unproject(g.add(y).divideBy(2).add(m),c);return{center:C,zoom:c}},fitBounds:function(t,e){if(t=X(t),!t.isValid())throw new Error("Bounds are not valid.");var o=this._getBoundsCenterZoom(t,e);return this.setView(o.center,o.zoom,e)},fitWorld:function(t){return this.fitBounds([[-90,-180],[90,180]],t)},panTo:function(t,e){return this.setView(t,this._zoom,{pan:e})},panBy:function(t,e){if(t=k(t).round(),e=e||{},!t.x&&!t.y)return this.fire("moveend");if(e.animate!==!0&&!this.getSize().contains(t))return this._resetView(this.unproject(this.project(this.getCenter()).add(t)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new mi,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),e.noMoveStart||this.fire("movestart"),e.animate!==!1){B(this._mapPane,"leaflet-pan-anim");var o=this._getMapPanePos().subtract(t).round();this._panAnim.run(this._mapPane,o,e.duration||.25,e.easeLinearity)}else this._rawPanBy(t),this.fire("move").fire("moveend");return this},flyTo:function(t,e,o){if(o=o||{},o.animate===!1||!A.any3d)return this.setView(t,e,o);this._stop();var a=this.project(this.getCenter()),c=this.project(t),m=this.getSize(),g=this._zoom;t=Z(t),e=e===void 0?g:e;var y=Math.max(m.x,m.y),C=y*this.getZoomScale(g,e),P=c.distanceTo(a)||1,M=1.42,R=M*M;function z(j){var qe=j?-1:1,Er=j?C:y,Mr=C*C-y*y+qe*R*R*P*P,Lr=2*Er*R*P,kn=Mr/Lr,$i=Math.sqrt(kn*kn+1)-kn,Sr=$i<1e-9?-18:Math.log($i);return Sr}function at(j){return(Math.exp(j)-Math.exp(-j))/2}function tt(j){return(Math.exp(j)+Math.exp(-j))/2}function vt(j){return at(j)/tt(j)}var ft=z(0);function te(j){return y*(tt(ft)/tt(ft+M*j))}function Cr(j){return y*(tt(ft)*vt(ft+M*j)-at(ft))/R}function wr(j){return 1-Math.pow(1-j,1.5)}var Pr=Date.now(),Ki=(z(1)-ft)/M,xr=o.duration?1e3*o.duration:1e3*Ki*.8;function Yi(){var j=(Date.now()-Pr)/xr,qe=wr(j)*Ki;j<=1?(this._flyToFrame=nt(Yi,this),this._move(this.unproject(a.add(c.subtract(a).multiplyBy(Cr(qe)/P)),g),this.getScaleZoom(y/te(qe),g),{flyTo:!0})):this._move(t,e)._moveEnd(!0)}return this._moveStart(!0,o.noMoveStart),Yi.call(this),this},flyToBounds:function(t,e){var o=this._getBoundsCenterZoom(t,e);return this.flyTo(o.center,o.zoom,e)},setMaxBounds:function(t){return t=X(t),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),t.isValid()?(this.options.maxBounds=t,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(t){var e=this.options.minZoom;return this.options.minZoom=t,this._loaded&&e!==t&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(t):this},setMaxZoom:function(t){var e=this.options.maxZoom;return this.options.maxZoom=t,this._loaded&&e!==t&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(t):this},panInsideBounds:function(t,e){this._enforcingBounds=!0;var o=this.getCenter(),a=this._limitCenter(o,this._zoom,X(t));return o.equals(a)||this.panTo(a,e),this._enforcingBounds=!1,this},panInside:function(t,e){e=e||{};var o=k(e.paddingTopLeft||e.padding||[0,0]),a=k(e.paddingBottomRight||e.padding||[0,0]),c=this.project(this.getCenter()),m=this.project(t),g=this.getPixelBounds(),y=ht([g.min.add(o),g.max.subtract(a)]),C=y.getSize();if(!y.contains(m)){this._enforcingBounds=!0;var P=m.subtract(y.getCenter()),M=y.extend(m).getSize().subtract(C);c.x+=P.x<0?-M.x:M.x,c.y+=P.y<0?-M.y:M.y,this.panTo(this.unproject(c),e),this._enforcingBounds=!1}return this},invalidateSize:function(t){if(!this._loaded)return this;t=l({animate:!1,pan:!0},t===!0?{animate:!0}:t);var e=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var o=this.getSize(),a=e.divideBy(2).round(),c=o.divideBy(2).round(),m=a.subtract(c);return!m.x&&!m.y?this:(t.animate&&t.pan?this.panBy(m):(t.pan&&this._rawPanBy(m),this.fire("move"),t.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(d(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:e,newSize:o}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(t){if(t=this._locateOptions=l({timeout:1e4,watch:!1},t),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var e=d(this._handleGeolocationResponse,this),o=d(this._handleGeolocationError,this);return t.watch?this._locationWatchId=navigator.geolocation.watchPosition(e,o,t):navigator.geolocation.getCurrentPosition(e,o,t),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(t){if(this._container._leaflet_id){var e=t.code,o=t.message||(e===1?"permission denied":e===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:e,message:"Geolocation error: "+o+"."})}},_handleGeolocationResponse:function(t){if(this._container._leaflet_id){var e=t.coords.latitude,o=t.coords.longitude,a=new H(e,o),c=a.toBounds(t.coords.accuracy*2),m=this._locateOptions;if(m.setView){var g=this.getBoundsZoom(c);this.setView(a,m.maxZoom?Math.min(g,m.maxZoom):g)}var y={latlng:a,bounds:c,timestamp:t.timestamp};for(var C in t.coords)typeof t.coords[C]=="number"&&(y[C]=t.coords[C]);this.fire("locationfound",y)}},addHandler:function(t,e){if(!e)return this;var o=this[t]=new e(this);return this._handlers.push(o),this.options[t]&&o.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),Y(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(rt(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var t;for(t in this._layers)this._layers[t].remove();for(t in this._panes)Y(this._panes[t]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(t,e){var o="leaflet-pane"+(t?" leaflet-"+t.replace("Pane","")+"-pane":""),a=U("div",o,e||this._mapPane);return t&&(this._panes[t]=a),a},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var t=this.getPixelBounds(),e=this.unproject(t.getBottomLeft()),o=this.unproject(t.getTopRight());return new ct(e,o)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(t,e,o){t=X(t),o=k(o||[0,0]);var a=this.getZoom()||0,c=this.getMinZoom(),m=this.getMaxZoom(),g=t.getNorthWest(),y=t.getSouthEast(),C=this.getSize().subtract(o),P=ht(this.project(y,a),this.project(g,a)).getSize(),M=A.any3d?this.options.zoomSnap:1,R=C.x/P.x,z=C.y/P.y,at=e?Math.max(R,z):Math.min(R,z);return a=this.getScaleZoom(at,a),M&&(a=Math.round(a/(M/100))*(M/100),a=e?Math.ceil(a/M)*M:Math.floor(a/M)*M),Math.max(c,Math.min(m,a))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new N(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(t,e){var o=this._getTopLeftPoint(t,e);return new K(o,o.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(t){return this.options.crs.getProjectedBounds(t===void 0?this.getZoom():t)},getPane:function(t){return typeof t=="string"?this._panes[t]:t},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(t,e){var o=this.options.crs;return e=e===void 0?this._zoom:e,o.scale(t)/o.scale(e)},getScaleZoom:function(t,e){var o=this.options.crs;e=e===void 0?this._zoom:e;var a=o.zoom(t*o.scale(e));return isNaN(a)?1/0:a},project:function(t,e){return e=e===void 0?this._zoom:e,this.options.crs.latLngToPoint(Z(t),e)},unproject:function(t,e){return e=e===void 0?this._zoom:e,this.options.crs.pointToLatLng(k(t),e)},layerPointToLatLng:function(t){var e=k(t).add(this.getPixelOrigin());return this.unproject(e)},latLngToLayerPoint:function(t){var e=this.project(Z(t))._round();return e._subtract(this.getPixelOrigin())},wrapLatLng:function(t){return this.options.crs.wrapLatLng(Z(t))},wrapLatLngBounds:function(t){return this.options.crs.wrapLatLngBounds(X(t))},distance:function(t,e){return this.options.crs.distance(Z(t),Z(e))},containerPointToLayerPoint:function(t){return k(t).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(t){return k(t).add(this._getMapPanePos())},containerPointToLatLng:function(t){var e=this.containerPointToLayerPoint(k(t));return this.layerPointToLatLng(e)},latLngToContainerPoint:function(t){return this.layerPointToContainerPoint(this.latLngToLayerPoint(Z(t)))},mouseEventToContainerPoint:function(t){return di(t,this._container)},mouseEventToLayerPoint:function(t){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(t))},mouseEventToLatLng:function(t){return this.layerPointToLatLng(this.mouseEventToLayerPoint(t))},_initContainer:function(t){var e=this._container=ui(t);if(e){if(e._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");b(e,"scroll",this._onScroll,this),this._containerId=_(e)},_initLayout:function(){var t=this._container;this._fadeAnimated=this.options.fadeAnimation&&A.any3d,B(t,"leaflet-container"+(A.touch?" leaflet-touch":"")+(A.retina?" leaflet-retina":"")+(A.ielt9?" leaflet-oldie":"")+(A.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var e=le(t,"position");e!=="absolute"&&e!=="relative"&&e!=="fixed"&&e!=="sticky"&&(t.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var t=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),Q(this._mapPane,new N(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(B(t.markerPane,"leaflet-zoom-hide"),B(t.shadowPane,"leaflet-zoom-hide"))},_resetView:function(t,e,o){Q(this._mapPane,new N(0,0));var a=!this._loaded;this._loaded=!0,e=this._limitZoom(e),this.fire("viewprereset");var c=this._zoom!==e;this._moveStart(c,o)._move(t,e)._moveEnd(c),this.fire("viewreset"),a&&this.fire("load")},_moveStart:function(t,e){return t&&this.fire("zoomstart"),e||this.fire("movestart"),this},_move:function(t,e,o,a){e===void 0&&(e=this._zoom);var c=this._zoom!==e;return this._zoom=e,this._lastCenter=t,this._pixelOrigin=this._getNewPixelOrigin(t),a?o&&o.pinch&&this.fire("zoom",o):((c||o&&o.pinch)&&this.fire("zoom",o),this.fire("move",o)),this},_moveEnd:function(t){return t&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return rt(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(t){Q(this._mapPane,this._getMapPanePos().subtract(t))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(t){this._targets={},this._targets[_(this._container)]=this;var e=t?W:b;e(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&e(window,"resize",this._onResize,this),A.any3d&&this.options.transform3DLimit&&(t?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){rt(this._resizeRequest),this._resizeRequest=nt(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var t=this._getMapPanePos();Math.max(Math.abs(t.x),Math.abs(t.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(t,e){for(var o=[],a,c=e==="mouseout"||e==="mouseover",m=t.target||t.srcElement,g=!1;m;){if(a=this._targets[_(m)],a&&(e==="click"||e==="preclick")&&this._draggableMoved(a)){g=!0;break}if(a&&a.listens(e,!0)&&(c&&!Cn(m,t)||(o.push(a),c))||m===this._container)break;m=m.parentNode}return!o.length&&!g&&!c&&this.listens(e,!0)&&(o=[this]),o},_isClickDisabled:function(t){for(;t&&t!==this._container;){if(t._leaflet_disable_click)return!0;t=t.parentNode}},_handleDOMEvent:function(t){var e=t.target||t.srcElement;if(!(!this._loaded||e._leaflet_disable_events||t.type==="click"&&this._isClickDisabled(e))){var o=t.type;o==="mousedown"&&mn(e),this._fireDOMEvent(t,o)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(t,e,o){if(t.type==="click"){var a=l({},t);a.type="preclick",this._fireDOMEvent(a,a.type,o)}var c=this._findEventTargets(t,e);if(o){for(var m=[],g=0;g<o.length;g++)o[g].listens(e,!0)&&m.push(o[g]);c=m.concat(c)}if(c.length){e==="contextmenu"&&it(t);var y=c[0],C={originalEvent:t};if(t.type!=="keypress"&&t.type!=="keydown"&&t.type!=="keyup"){var P=y.getLatLng&&(!y._radius||y._radius<=10);C.containerPoint=P?this.latLngToContainerPoint(y.getLatLng()):this.mouseEventToContainerPoint(t),C.layerPoint=this.containerPointToLayerPoint(C.containerPoint),C.latlng=P?y.getLatLng():this.layerPointToLatLng(C.layerPoint)}for(g=0;g<c.length;g++)if(c[g].fire(e,C,!0),C.originalEvent._stopped||c[g].options.bubblingMouseEvents===!1&&et(this._mouseEvents,e)!==-1)return}},_draggableMoved:function(t){return t=t.dragging&&t.dragging.enabled()?t:this,t.dragging&&t.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var t=0,e=this._handlers.length;t<e;t++)this._handlers[t].disable()},whenReady:function(t,e){return this._loaded?t.call(e||this,{target:this}):this.on("load",t,e),this},_getMapPanePos:function(){return Vt(this._mapPane)||new N(0,0)},_moved:function(){var t=this._getMapPanePos();return t&&!t.equals([0,0])},_getTopLeftPoint:function(t,e){var o=t&&e!==void 0?this._getNewPixelOrigin(t,e):this.getPixelOrigin();return o.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(t,e){var o=this.getSize()._divideBy(2);return this.project(t,e)._subtract(o)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(t,e,o){var a=this._getNewPixelOrigin(o,e);return this.project(t,e)._subtract(a)},_latLngBoundsToNewLayerBounds:function(t,e,o){var a=this._getNewPixelOrigin(o,e);return ht([this.project(t.getSouthWest(),e)._subtract(a),this.project(t.getNorthWest(),e)._subtract(a),this.project(t.getSouthEast(),e)._subtract(a),this.project(t.getNorthEast(),e)._subtract(a)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(t){return this.latLngToLayerPoint(t).subtract(this._getCenterLayerPoint())},_limitCenter:function(t,e,o){if(!o)return t;var a=this.project(t,e),c=this.getSize().divideBy(2),m=new K(a.subtract(c),a.add(c)),g=this._getBoundsOffset(m,o,e);return Math.abs(g.x)<=1&&Math.abs(g.y)<=1?t:this.unproject(a.add(g),e)},_limitOffset:function(t,e){if(!e)return t;var o=this.getPixelBounds(),a=new K(o.min.add(t),o.max.add(t));return t.add(this._getBoundsOffset(a,e))},_getBoundsOffset:function(t,e,o){var a=ht(this.project(e.getNorthEast(),o),this.project(e.getSouthWest(),o)),c=a.min.subtract(t.min),m=a.max.subtract(t.max),g=this._rebound(c.x,-m.x),y=this._rebound(c.y,-m.y);return new N(g,y)},_rebound:function(t,e){return t+e>0?Math.round(t-e)/2:Math.max(0,Math.ceil(t))-Math.max(0,Math.floor(e))},_limitZoom:function(t){var e=this.getMinZoom(),o=this.getMaxZoom(),a=A.any3d?this.options.zoomSnap:1;return a&&(t=Math.round(t/a)*a),Math.max(e,Math.min(o,t))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){J(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(t,e){var o=this._getCenterOffset(t)._trunc();return(e&&e.animate)!==!0&&!this.getSize().contains(o)?!1:(this.panBy(o,e),!0)},_createAnimProxy:function(){var t=this._proxy=U("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(t),this.on("zoomanim",function(e){var o=ln,a=this._proxy.style[o];Zt(this._proxy,this.project(e.center,e.zoom),this.getZoomScale(e.zoom,1)),a===this._proxy.style[o]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){Y(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var t=this.getCenter(),e=this.getZoom();Zt(this._proxy,this.project(t,e),this.getZoomScale(e,1))},_catchTransitionEnd:function(t){this._animatingZoom&&t.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(t,e,o){if(this._animatingZoom)return!0;if(o=o||{},!this._zoomAnimated||o.animate===!1||this._nothingToAnimate()||Math.abs(e-this._zoom)>this.options.zoomAnimationThreshold)return!1;var a=this.getZoomScale(e),c=this._getCenterOffset(t)._divideBy(1-1/a);return o.animate!==!0&&!this.getSize().contains(c)?!1:(nt(function(){this._moveStart(!0,o.noMoveStart||!1)._animateZoom(t,e,!0)},this),!0)},_animateZoom:function(t,e,o,a){this._mapPane&&(o&&(this._animatingZoom=!0,this._animateToCenter=t,this._animateToZoom=e,B(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:t,zoom:e,noUpdate:a}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(d(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&J(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function Os(t,e){return new V(t,e)}var Tt=St.extend({options:{position:"topright"},initialize:function(t){S(this,t)},getPosition:function(){return this.options.position},setPosition:function(t){var e=this._map;return e&&e.removeControl(this),this.options.position=t,e&&e.addControl(this),this},getContainer:function(){return this._container},addTo:function(t){this.remove(),this._map=t;var e=this._container=this.onAdd(t),o=this.getPosition(),a=t._controlCorners[o];return B(e,"leaflet-control"),o.indexOf("bottom")!==-1?a.insertBefore(e,a.firstChild):a.appendChild(e),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(Y(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(t){this._map&&t&&t.screenX>0&&t.screenY>0&&this._map.getContainer().focus()}}),de=function(t){return new Tt(t)};V.include({addControl:function(t){return t.addTo(this),this},removeControl:function(t){return t.remove(),this},_initControlPos:function(){var t=this._controlCorners={},e="leaflet-",o=this._controlContainer=U("div",e+"control-container",this._container);function a(c,m){var g=e+c+" "+e+m;t[c+m]=U("div",g,o)}a("top","left"),a("top","right"),a("bottom","left"),a("bottom","right")},_clearControlPos:function(){for(var t in this._controlCorners)Y(this._controlCorners[t]);Y(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var _i=Tt.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(t,e,o,a){return o<a?-1:a<o?1:0}},initialize:function(t,e,o){S(this,o),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var a in t)this._addLayer(t[a],a);for(a in e)this._addLayer(e[a],a,!0)},onAdd:function(t){this._initLayout(),this._update(),this._map=t,t.on("zoomend",this._checkDisabledLayers,this);for(var e=0;e<this._layers.length;e++)this._layers[e].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(t){return Tt.prototype.addTo.call(this,t),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var t=0;t<this._layers.length;t++)this._layers[t].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(t,e){return this._addLayer(t,e),this._map?this._update():this},addOverlay:function(t,e){return this._addLayer(t,e,!0),this._map?this._update():this},removeLayer:function(t){t.off("add remove",this._onLayerChange,this);var e=this._getLayer(_(t));return e&&this._layers.splice(this._layers.indexOf(e),1),this._map?this._update():this},expand:function(){B(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var t=this._map.getSize().y-(this._container.offsetTop+50);return t<this._section.clientHeight?(B(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=t+"px"):J(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return J(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var t="leaflet-control-layers",e=this._container=U("div",t),o=this.options.collapsed;e.setAttribute("aria-haspopup",!0),fe(e),Tn(e);var a=this._section=U("section",t+"-list");o&&(this._map.on("click",this.collapse,this),b(e,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var c=this._layersLink=U("a",t+"-toggle",e);c.href="#",c.title="Layers",c.setAttribute("role","button"),b(c,{keydown:function(m){m.keyCode===13&&this._expandSafely()},click:function(m){it(m),this._expandSafely()}},this),o||this.expand(),this._baseLayersList=U("div",t+"-base",a),this._separator=U("div",t+"-separator",a),this._overlaysList=U("div",t+"-overlays",a),e.appendChild(a)},_getLayer:function(t){for(var e=0;e<this._layers.length;e++)if(this._layers[e]&&_(this._layers[e].layer)===t)return this._layers[e]},_addLayer:function(t,e,o){this._map&&t.on("add remove",this._onLayerChange,this),this._layers.push({layer:t,name:e,overlay:o}),this.options.sortLayers&&this._layers.sort(d(function(a,c){return this.options.sortFunction(a.layer,c.layer,a.name,c.name)},this)),this.options.autoZIndex&&t.setZIndex&&(this._lastZIndex++,t.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;Le(this._baseLayersList),Le(this._overlaysList),this._layerControlInputs=[];var t,e,o,a,c=0;for(o=0;o<this._layers.length;o++)a=this._layers[o],this._addItem(a),e=e||a.overlay,t=t||!a.overlay,c+=a.overlay?0:1;return this.options.hideSingleBase&&(t=t&&c>1,this._baseLayersList.style.display=t?"":"none"),this._separator.style.display=e&&t?"":"none",this},_onLayerChange:function(t){this._handlingClick||this._update();var e=this._getLayer(_(t.target)),o=e.overlay?t.type==="add"?"overlayadd":"overlayremove":t.type==="add"?"baselayerchange":null;o&&this._map.fire(o,e)},_createRadioElement:function(t,e){var o='<input type="radio" class="leaflet-control-layers-selector" name="'+t+'"'+(e?' checked="checked"':"")+"/>",a=document.createElement("div");return a.innerHTML=o,a.firstChild},_addItem:function(t){var e=document.createElement("label"),o=this._map.hasLayer(t.layer),a;t.overlay?(a=document.createElement("input"),a.type="checkbox",a.className="leaflet-control-layers-selector",a.defaultChecked=o):a=this._createRadioElement("leaflet-base-layers_"+_(this),o),this._layerControlInputs.push(a),a.layerId=_(t.layer),b(a,"click",this._onInputClick,this);var c=document.createElement("span");c.innerHTML=" "+t.name;var m=document.createElement("span");e.appendChild(m),m.appendChild(a),m.appendChild(c);var g=t.overlay?this._overlaysList:this._baseLayersList;return g.appendChild(e),this._checkDisabledLayers(),e},_onInputClick:function(){if(!this._preventClick){var t=this._layerControlInputs,e,o,a=[],c=[];this._handlingClick=!0;for(var m=t.length-1;m>=0;m--)e=t[m],o=this._getLayer(e.layerId).layer,e.checked?a.push(o):e.checked||c.push(o);for(m=0;m<c.length;m++)this._map.hasLayer(c[m])&&this._map.removeLayer(c[m]);for(m=0;m<a.length;m++)this._map.hasLayer(a[m])||this._map.addLayer(a[m]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var t=this._layerControlInputs,e,o,a=this._map.getZoom(),c=t.length-1;c>=0;c--)e=t[c],o=this._getLayer(e.layerId).layer,e.disabled=o.options.minZoom!==void 0&&a<o.options.minZoom||o.options.maxZoom!==void 0&&a>o.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var t=this._section;this._preventClick=!0,b(t,"click",it),this.expand();var e=this;setTimeout(function(){W(t,"click",it),e._preventClick=!1})}}),Fs=function(t,e,o){return new _i(t,e,o)},wn=Tt.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(t){var e="leaflet-control-zoom",o=U("div",e+" leaflet-bar"),a=this.options;return this._zoomInButton=this._createButton(a.zoomInText,a.zoomInTitle,e+"-in",o,this._zoomIn),this._zoomOutButton=this._createButton(a.zoomOutText,a.zoomOutTitle,e+"-out",o,this._zoomOut),this._updateDisabled(),t.on("zoomend zoomlevelschange",this._updateDisabled,this),o},onRemove:function(t){t.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(t){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(t.shiftKey?3:1))},_zoomOut:function(t){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(t.shiftKey?3:1))},_createButton:function(t,e,o,a,c){var m=U("a",o,a);return m.innerHTML=t,m.href="#",m.title=e,m.setAttribute("role","button"),m.setAttribute("aria-label",e),fe(m),b(m,"click",qt),b(m,"click",c,this),b(m,"click",this._refocusOnMap,this),m},_updateDisabled:function(){var t=this._map,e="leaflet-disabled";J(this._zoomInButton,e),J(this._zoomOutButton,e),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||t._zoom===t.getMinZoom())&&(B(this._zoomOutButton,e),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||t._zoom===t.getMaxZoom())&&(B(this._zoomInButton,e),this._zoomInButton.setAttribute("aria-disabled","true"))}});V.mergeOptions({zoomControl:!0}),V.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new wn,this.addControl(this.zoomControl))});var Zs=function(t){return new wn(t)},gi=Tt.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(t){var e="leaflet-control-scale",o=U("div",e),a=this.options;return this._addScales(a,e+"-line",o),t.on(a.updateWhenIdle?"moveend":"move",this._update,this),t.whenReady(this._update,this),o},onRemove:function(t){t.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(t,e,o){t.metric&&(this._mScale=U("div",e,o)),t.imperial&&(this._iScale=U("div",e,o))},_update:function(){var t=this._map,e=t.getSize().y/2,o=t.distance(t.containerPointToLatLng([0,e]),t.containerPointToLatLng([this.options.maxWidth,e]));this._updateScales(o)},_updateScales:function(t){this.options.metric&&t&&this._updateMetric(t),this.options.imperial&&t&&this._updateImperial(t)},_updateMetric:function(t){var e=this._getRoundNum(t),o=e<1e3?e+" m":e/1e3+" km";this._updateScale(this._mScale,o,e/t)},_updateImperial:function(t){var e=t*3.2808399,o,a,c;e>5280?(o=e/5280,a=this._getRoundNum(o),this._updateScale(this._iScale,a+" mi",a/o)):(c=this._getRoundNum(e),this._updateScale(this._iScale,c+" ft",c/e))},_updateScale:function(t,e,o){t.style.width=Math.round(this.options.maxWidth*o)+"px",t.innerHTML=e},_getRoundNum:function(t){var e=Math.pow(10,(Math.floor(t)+"").length-1),o=t/e;return o=o>=10?10:o>=5?5:o>=3?3:o>=2?2:1,e*o}}),Vs=function(t){return new gi(t)},Us='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',Pn=Tt.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(A.inlineSvg?Us+" ":"")+"Leaflet</a>"},initialize:function(t){S(this,t),this._attributions={}},onAdd:function(t){t.attributionControl=this,this._container=U("div","leaflet-control-attribution"),fe(this._container);for(var e in t._layers)t._layers[e].getAttribution&&this.addAttribution(t._layers[e].getAttribution());return this._update(),t.on("layeradd",this._addAttribution,this),this._container},onRemove:function(t){t.off("layeradd",this._addAttribution,this)},_addAttribution:function(t){t.layer.getAttribution&&(this.addAttribution(t.layer.getAttribution()),t.layer.once("remove",function(){this.removeAttribution(t.layer.getAttribution())},this))},setPrefix:function(t){return this.options.prefix=t,this._update(),this},addAttribution:function(t){return t?(this._attributions[t]||(this._attributions[t]=0),this._attributions[t]++,this._update(),this):this},removeAttribution:function(t){return t?(this._attributions[t]&&(this._attributions[t]--,this._update()),this):this},_update:function(){if(this._map){var t=[];for(var e in this._attributions)this._attributions[e]&&t.push(e);var o=[];this.options.prefix&&o.push(this.options.prefix),t.length&&o.push(t.join(", ")),this._container.innerHTML=o.join(' <span aria-hidden="true">|</span> ')}}});V.mergeOptions({attributionControl:!0}),V.addInitHook(function(){this.options.attributionControl&&new Pn().addTo(this)});var qs=function(t){return new Pn(t)};Tt.Layers=_i,Tt.Zoom=wn,Tt.Scale=gi,Tt.Attribution=Pn,de.layers=Fs,de.zoom=Zs,de.scale=Vs,de.attribution=qs;var xt=St.extend({initialize:function(t){this._map=t},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});xt.addTo=function(t,e){return t.addHandler(e,this),this};var Gs={Events:mt},vi=A.touch?"touchstart mousedown":"mousedown",Bt=oe.extend({options:{clickTolerance:3},initialize:function(t,e,o,a){S(this,a),this._element=t,this._dragStartTarget=e||t,this._preventOutline=o},enable:function(){this._enabled||(b(this._dragStartTarget,vi,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(Bt._dragging===this&&this.finishDrag(!0),W(this._dragStartTarget,vi,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(t){if(this._enabled&&(this._moved=!1,!un(this._element,"leaflet-zoom-anim"))){if(t.touches&&t.touches.length!==1){Bt._dragging===this&&this.finishDrag();return}if(!(Bt._dragging||t.shiftKey||t.which!==1&&t.button!==1&&!t.touches)&&(Bt._dragging=this,this._preventOutline&&mn(this._element),fn(),ue(),!this._moving)){this.fire("down");var e=t.touches?t.touches[0]:t,o=hi(this._element);this._startPoint=new N(e.clientX,e.clientY),this._startPos=Vt(this._element),this._parentScale=_n(o);var a=t.type==="mousedown";b(document,a?"mousemove":"touchmove",this._onMove,this),b(document,a?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(t){if(this._enabled){if(t.touches&&t.touches.length>1){this._moved=!0;return}var e=t.touches&&t.touches.length===1?t.touches[0]:t,o=new N(e.clientX,e.clientY)._subtract(this._startPoint);!o.x&&!o.y||Math.abs(o.x)+Math.abs(o.y)<this.options.clickTolerance||(o.x/=this._parentScale.x,o.y/=this._parentScale.y,it(t),this._moved||(this.fire("dragstart"),this._moved=!0,B(document.body,"leaflet-dragging"),this._lastTarget=t.target||t.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),B(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(o),this._moving=!0,this._lastEvent=t,this._updatePosition())}},_updatePosition:function(){var t={originalEvent:this._lastEvent};this.fire("predrag",t),Q(this._element,this._newPos),this.fire("drag",t)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(t){J(document.body,"leaflet-dragging"),this._lastTarget&&(J(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),W(document,"mousemove touchmove",this._onMove,this),W(document,"mouseup touchend touchcancel",this._onUp,this),dn(),he();var e=this._moved&&this._moving;this._moving=!1,Bt._dragging=!1,e&&this.fire("dragend",{noInertia:t,distance:this._newPos.distanceTo(this._startPos)})}});function yi(t,e,o){var a,c=[1,4,2,8],m,g,y,C,P,M,R,z;for(m=0,M=t.length;m<M;m++)t[m]._code=Gt(t[m],e);for(y=0;y<4;y++){for(R=c[y],a=[],m=0,M=t.length,g=M-1;m<M;g=m++)C=t[m],P=t[g],C._code&R?P._code&R||(z=ke(P,C,R,e,o),z._code=Gt(z,e),a.push(z)):(P._code&R&&(z=ke(P,C,R,e,o),z._code=Gt(z,e),a.push(z)),a.push(C));t=a}return t}function Ti(t,e){var o,a,c,m,g,y,C,P,M;if(!t||t.length===0)throw new Error("latlngs not passed");gt(t)||(console.warn("latlngs are not flat! Only the first ring will be used"),t=t[0]);var R=Z([0,0]),z=X(t),at=z.getNorthWest().distanceTo(z.getSouthWest())*z.getNorthEast().distanceTo(z.getNorthWest());at<1700&&(R=xn(t));var tt=t.length,vt=[];for(o=0;o<tt;o++){var ft=Z(t[o]);vt.push(e.project(Z([ft.lat-R.lat,ft.lng-R.lng])))}for(y=C=P=0,o=0,a=tt-1;o<tt;a=o++)c=vt[o],m=vt[a],g=c.y*m.x-m.y*c.x,C+=(c.x+m.x)*g,P+=(c.y+m.y)*g,y+=g*3;y===0?M=vt[0]:M=[C/y,P/y];var te=e.unproject(k(M));return Z([te.lat+R.lat,te.lng+R.lng])}function xn(t){for(var e=0,o=0,a=0,c=0;c<t.length;c++){var m=Z(t[c]);e+=m.lat,o+=m.lng,a++}return Z([e/a,o/a])}var Hs={__proto__:null,clipPolygon:yi,polygonCenter:Ti,centroid:xn};function Ci(t,e){if(!e||!t.length)return t.slice();var o=e*e;return t=Ys(t,o),t=Ks(t,o),t}function wi(t,e,o){return Math.sqrt(pe(t,e,o,!0))}function Ws(t,e,o){return pe(t,e,o)}function Ks(t,e){var o=t.length,a=typeof Uint8Array<"u"?Uint8Array:Array,c=new a(o);c[0]=c[o-1]=1,En(t,c,e,0,o-1);var m,g=[];for(m=0;m<o;m++)c[m]&&g.push(t[m]);return g}function En(t,e,o,a,c){var m=0,g,y,C;for(y=a+1;y<=c-1;y++)C=pe(t[y],t[a],t[c],!0),C>m&&(g=y,m=C);m>o&&(e[g]=1,En(t,e,o,a,g),En(t,e,o,g,c))}function Ys(t,e){for(var o=[t[0]],a=1,c=0,m=t.length;a<m;a++)$s(t[a],t[c])>e&&(o.push(t[a]),c=a);return c<m-1&&o.push(t[m-1]),o}var Pi;function xi(t,e,o,a,c){var m=a?Pi:Gt(t,o),g=Gt(e,o),y,C,P;for(Pi=g;;){if(!(m|g))return[t,e];if(m&g)return!1;y=m||g,C=ke(t,e,y,o,c),P=Gt(C,o),y===m?(t=C,m=P):(e=C,g=P)}}function ke(t,e,o,a,c){var m=e.x-t.x,g=e.y-t.y,y=a.min,C=a.max,P,M;return o&8?(P=t.x+m*(C.y-t.y)/g,M=C.y):o&4?(P=t.x+m*(y.y-t.y)/g,M=y.y):o&2?(P=C.x,M=t.y+g*(C.x-t.x)/m):o&1&&(P=y.x,M=t.y+g*(y.x-t.x)/m),new N(P,M,c)}function Gt(t,e){var o=0;return t.x<e.min.x?o|=1:t.x>e.max.x&&(o|=2),t.y<e.min.y?o|=4:t.y>e.max.y&&(o|=8),o}function $s(t,e){var o=e.x-t.x,a=e.y-t.y;return o*o+a*a}function pe(t,e,o,a){var c=e.x,m=e.y,g=o.x-c,y=o.y-m,C=g*g+y*y,P;return C>0&&(P=((t.x-c)*g+(t.y-m)*y)/C,P>1?(c=o.x,m=o.y):P>0&&(c+=g*P,m+=y*P)),g=t.x-c,y=t.y-m,a?g*g+y*y:new N(c,m)}function gt(t){return!F(t[0])||typeof t[0][0]!="object"&&typeof t[0][0]<"u"}function Ei(t){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),gt(t)}function Mi(t,e){var o,a,c,m,g,y,C,P;if(!t||t.length===0)throw new Error("latlngs not passed");gt(t)||(console.warn("latlngs are not flat! Only the first ring will be used"),t=t[0]);var M=Z([0,0]),R=X(t),z=R.getNorthWest().distanceTo(R.getSouthWest())*R.getNorthEast().distanceTo(R.getNorthWest());z<1700&&(M=xn(t));var at=t.length,tt=[];for(o=0;o<at;o++){var vt=Z(t[o]);tt.push(e.project(Z([vt.lat-M.lat,vt.lng-M.lng])))}for(o=0,a=0;o<at-1;o++)a+=tt[o].distanceTo(tt[o+1])/2;if(a===0)P=tt[0];else for(o=0,m=0;o<at-1;o++)if(g=tt[o],y=tt[o+1],c=g.distanceTo(y),m+=c,m>a){C=(m-a)/c,P=[y.x-C*(y.x-g.x),y.y-C*(y.y-g.y)];break}var ft=e.unproject(k(P));return Z([ft.lat+M.lat,ft.lng+M.lng])}var Js={__proto__:null,simplify:Ci,pointToSegmentDistance:wi,closestPointOnSegment:Ws,clipSegment:xi,_getEdgeIntersection:ke,_getBitCode:Gt,_sqClosestPointOnSegment:pe,isFlat:gt,_flat:Ei,polylineCenter:Mi},Mn={project:function(t){return new N(t.lng,t.lat)},unproject:function(t){return new H(t.y,t.x)},bounds:new K([-180,-90],[180,90])},Ln={R:6378137,R_MINOR:6356752314245179e-9,bounds:new K([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(t){var e=Math.PI/180,o=this.R,a=t.lat*e,c=this.R_MINOR/o,m=Math.sqrt(1-c*c),g=m*Math.sin(a),y=Math.tan(Math.PI/4-a/2)/Math.pow((1-g)/(1+g),m/2);return a=-o*Math.log(Math.max(y,1e-10)),new N(t.lng*e*o,a)},unproject:function(t){for(var e=180/Math.PI,o=this.R,a=this.R_MINOR/o,c=Math.sqrt(1-a*a),m=Math.exp(-t.y/o),g=Math.PI/2-2*Math.atan(m),y=0,C=.1,P;y<15&&Math.abs(C)>1e-7;y++)P=c*Math.sin(g),P=Math.pow((1-P)/(1+P),c/2),C=Math.PI/2-2*Math.atan(m*P)-g,g+=C;return new H(g*e,t.x*e/o)}},Xs={__proto__:null,LonLat:Mn,Mercator:Ln,SphericalMercator:Qe},Qs=l({},Dt,{code:"EPSG:3395",projection:Ln,transformation:function(){var t=.5/(Math.PI*Ln.R);return se(t,.5,-t,.5)}()}),Li=l({},Dt,{code:"EPSG:4326",projection:Mn,transformation:se(1/180,1,-1/180,.5)}),js=l({},It,{projection:Mn,transformation:se(1,0,-1,0),scale:function(t){return Math.pow(2,t)},zoom:function(t){return Math.log(t)/Math.LN2},distance:function(t,e){var o=e.lng-t.lng,a=e.lat-t.lat;return Math.sqrt(o*o+a*a)},infinite:!0});It.Earth=Dt,It.EPSG3395=Qs,It.EPSG3857=tn,It.EPSG900913=ss,It.EPSG4326=Li,It.Simple=js;var Ct=oe.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(t){return t.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(t){return t&&t.removeLayer(this),this},getPane:function(t){return this._map.getPane(t?this.options[t]||t:this.options.pane)},addInteractiveTarget:function(t){return this._map._targets[_(t)]=this,this},removeInteractiveTarget:function(t){return delete this._map._targets[_(t)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(t){var e=t.target;if(e.hasLayer(this)){if(this._map=e,this._zoomAnimated=e._zoomAnimated,this.getEvents){var o=this.getEvents();e.on(o,this),this.once("remove",function(){e.off(o,this)},this)}this.onAdd(e),this.fire("add"),e.fire("layeradd",{layer:this})}}});V.include({addLayer:function(t){if(!t._layerAdd)throw new Error("The provided object is not a Layer.");var e=_(t);return this._layers[e]?this:(this._layers[e]=t,t._mapToAdd=this,t.beforeAdd&&t.beforeAdd(this),this.whenReady(t._layerAdd,t),this)},removeLayer:function(t){var e=_(t);return this._layers[e]?(this._loaded&&t.onRemove(this),delete this._layers[e],this._loaded&&(this.fire("layerremove",{layer:t}),t.fire("remove")),t._map=t._mapToAdd=null,this):this},hasLayer:function(t){return _(t)in this._layers},eachLayer:function(t,e){for(var o in this._layers)t.call(e,this._layers[o]);return this},_addLayers:function(t){t=t?F(t)?t:[t]:[];for(var e=0,o=t.length;e<o;e++)this.addLayer(t[e])},_addZoomLimit:function(t){(!isNaN(t.options.maxZoom)||!isNaN(t.options.minZoom))&&(this._zoomBoundLayers[_(t)]=t,this._updateZoomLevels())},_removeZoomLimit:function(t){var e=_(t);this._zoomBoundLayers[e]&&(delete this._zoomBoundLayers[e],this._updateZoomLevels())},_updateZoomLevels:function(){var t=1/0,e=-1/0,o=this._getZoomSpan();for(var a in this._zoomBoundLayers){var c=this._zoomBoundLayers[a].options;t=c.minZoom===void 0?t:Math.min(t,c.minZoom),e=c.maxZoom===void 0?e:Math.max(e,c.maxZoom)}this._layersMaxZoom=e===-1/0?void 0:e,this._layersMinZoom=t===1/0?void 0:t,o!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var $t=Ct.extend({initialize:function(t,e){S(this,e),this._layers={};var o,a;if(t)for(o=0,a=t.length;o<a;o++)this.addLayer(t[o])},addLayer:function(t){var e=this.getLayerId(t);return this._layers[e]=t,this._map&&this._map.addLayer(t),this},removeLayer:function(t){var e=t in this._layers?t:this.getLayerId(t);return this._map&&this._layers[e]&&this._map.removeLayer(this._layers[e]),delete this._layers[e],this},hasLayer:function(t){var e=typeof t=="number"?t:this.getLayerId(t);return e in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(t){var e=Array.prototype.slice.call(arguments,1),o,a;for(o in this._layers)a=this._layers[o],a[t]&&a[t].apply(a,e);return this},onAdd:function(t){this.eachLayer(t.addLayer,t)},onRemove:function(t){this.eachLayer(t.removeLayer,t)},eachLayer:function(t,e){for(var o in this._layers)t.call(e,this._layers[o]);return this},getLayer:function(t){return this._layers[t]},getLayers:function(){var t=[];return this.eachLayer(t.push,t),t},setZIndex:function(t){return this.invoke("setZIndex",t)},getLayerId:function(t){return _(t)}}),tr=function(t,e){return new $t(t,e)},At=$t.extend({addLayer:function(t){return this.hasLayer(t)?this:(t.addEventParent(this),$t.prototype.addLayer.call(this,t),this.fire("layeradd",{layer:t}))},removeLayer:function(t){return this.hasLayer(t)?(t in this._layers&&(t=this._layers[t]),t.removeEventParent(this),$t.prototype.removeLayer.call(this,t),this.fire("layerremove",{layer:t})):this},setStyle:function(t){return this.invoke("setStyle",t)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var t=new ct;for(var e in this._layers){var o=this._layers[e];t.extend(o.getBounds?o.getBounds():o.getLatLng())}return t}}),er=function(t,e){return new At(t,e)},Jt=St.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(t){S(this,t)},createIcon:function(t){return this._createIcon("icon",t)},createShadow:function(t){return this._createIcon("shadow",t)},_createIcon:function(t,e){var o=this._getIconUrl(t);if(!o){if(t==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var a=this._createImg(o,e&&e.tagName==="IMG"?e:null);return this._setIconStyles(a,t),(this.options.crossOrigin||this.options.crossOrigin==="")&&(a.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),a},_setIconStyles:function(t,e){var o=this.options,a=o[e+"Size"];typeof a=="number"&&(a=[a,a]);var c=k(a),m=k(e==="shadow"&&o.shadowAnchor||o.iconAnchor||c&&c.divideBy(2,!0));t.className="leaflet-marker-"+e+" "+(o.className||""),m&&(t.style.marginLeft=-m.x+"px",t.style.marginTop=-m.y+"px"),c&&(t.style.width=c.x+"px",t.style.height=c.y+"px")},_createImg:function(t,e){return e=e||document.createElement("img"),e.src=t,e},_getIconUrl:function(t){return A.retina&&this.options[t+"RetinaUrl"]||this.options[t+"Url"]}});function nr(t){return new Jt(t)}var me=Jt.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(t){return typeof me.imagePath!="string"&&(me.imagePath=this._detectIconPath()),(this.options.imagePath||me.imagePath)+Jt.prototype._getIconUrl.call(this,t)},_stripUrl:function(t){var e=function(o,a,c){var m=a.exec(o);return m&&m[c]};return t=e(t,/^url\((['"])?(.+)\1\)$/,2),t&&e(t,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var t=U("div","leaflet-default-icon-path",document.body),e=le(t,"background-image")||le(t,"backgroundImage");if(document.body.removeChild(t),e=this._stripUrl(e),e)return e;var o=document.querySelector('link[href$="leaflet.css"]');return o?o.href.substring(0,o.href.length-11-1):""}}),Si=xt.extend({initialize:function(t){this._marker=t},addHooks:function(){var t=this._marker._icon;this._draggable||(this._draggable=new Bt(t,t,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),B(t,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&J(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(t){var e=this._marker,o=e._map,a=this._marker.options.autoPanSpeed,c=this._marker.options.autoPanPadding,m=Vt(e._icon),g=o.getPixelBounds(),y=o.getPixelOrigin(),C=ht(g.min._subtract(y).add(c),g.max._subtract(y).subtract(c));if(!C.contains(m)){var P=k((Math.max(C.max.x,m.x)-C.max.x)/(g.max.x-C.max.x)-(Math.min(C.min.x,m.x)-C.min.x)/(g.min.x-C.min.x),(Math.max(C.max.y,m.y)-C.max.y)/(g.max.y-C.max.y)-(Math.min(C.min.y,m.y)-C.min.y)/(g.min.y-C.min.y)).multiplyBy(a);o.panBy(P,{animate:!1}),this._draggable._newPos._add(P),this._draggable._startPos._add(P),Q(e._icon,this._draggable._newPos),this._onDrag(t),this._panRequest=nt(this._adjustPan.bind(this,t))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(t){this._marker.options.autoPan&&(rt(this._panRequest),this._panRequest=nt(this._adjustPan.bind(this,t)))},_onDrag:function(t){var e=this._marker,o=e._shadow,a=Vt(e._icon),c=e._map.layerPointToLatLng(a);o&&Q(o,a),e._latlng=c,t.latlng=c,t.oldLatLng=this._oldLatLng,e.fire("move",t).fire("drag",t)},_onDragEnd:function(t){rt(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",t)}}),Ne=Ct.extend({options:{icon:new me,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(t,e){S(this,e),this._latlng=Z(t)},onAdd:function(t){this._zoomAnimated=this._zoomAnimated&&t.options.markerZoomAnimation,this._zoomAnimated&&t.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(t){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&t.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(t){var e=this._latlng;return this._latlng=Z(t),this.update(),this.fire("move",{oldLatLng:e,latlng:this._latlng})},setZIndexOffset:function(t){return this.options.zIndexOffset=t,this.update()},getIcon:function(){return this.options.icon},setIcon:function(t){return this.options.icon=t,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var t=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(t)}return this},_initIcon:function(){var t=this.options,e="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),o=t.icon.createIcon(this._icon),a=!1;o!==this._icon&&(this._icon&&this._removeIcon(),a=!0,t.title&&(o.title=t.title),o.tagName==="IMG"&&(o.alt=t.alt||"")),B(o,e),t.keyboard&&(o.tabIndex="0",o.setAttribute("role","button")),this._icon=o,t.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&b(o,"focus",this._panOnFocus,this);var c=t.icon.createShadow(this._shadow),m=!1;c!==this._shadow&&(this._removeShadow(),m=!0),c&&(B(c,e),c.alt=""),this._shadow=c,t.opacity<1&&this._updateOpacity(),a&&this.getPane().appendChild(this._icon),this._initInteraction(),c&&m&&this.getPane(t.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&W(this._icon,"focus",this._panOnFocus,this),Y(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&Y(this._shadow),this._shadow=null},_setPos:function(t){this._icon&&Q(this._icon,t),this._shadow&&Q(this._shadow,t),this._zIndex=t.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(t){this._icon&&(this._icon.style.zIndex=this._zIndex+t)},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center).round();this._setPos(e)},_initInteraction:function(){if(this.options.interactive&&(B(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),Si)){var t=this.options.draggable;this.dragging&&(t=this.dragging.enabled(),this.dragging.disable()),this.dragging=new Si(this),t&&this.dragging.enable()}},setOpacity:function(t){return this.options.opacity=t,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var t=this.options.opacity;this._icon&&_t(this._icon,t),this._shadow&&_t(this._shadow,t)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var t=this._map;if(t){var e=this.options.icon.options,o=e.iconSize?k(e.iconSize):k(0,0),a=e.iconAnchor?k(e.iconAnchor):k(0,0);t.panInside(this._latlng,{paddingTopLeft:a,paddingBottomRight:o.subtract(a)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function ir(t,e){return new Ne(t,e)}var zt=Ct.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(t){this._renderer=t.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(t){return S(this,t),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&t&&Object.prototype.hasOwnProperty.call(t,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),be=zt.extend({options:{fill:!0,radius:10},initialize:function(t,e){S(this,e),this._latlng=Z(t),this._radius=this.options.radius},setLatLng:function(t){var e=this._latlng;return this._latlng=Z(t),this.redraw(),this.fire("move",{oldLatLng:e,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(t){return this.options.radius=this._radius=t,this.redraw()},getRadius:function(){return this._radius},setStyle:function(t){var e=t&&t.radius||this._radius;return zt.prototype.setStyle.call(this,t),this.setRadius(e),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var t=this._radius,e=this._radiusY||t,o=this._clickTolerance(),a=[t+o,e+o];this._pxBounds=new K(this._point.subtract(a),this._point.add(a))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(t){return t.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function or(t,e){return new be(t,e)}var Sn=be.extend({initialize:function(t,e,o){if(typeof e=="number"&&(e=l({},o,{radius:e})),S(this,e),this._latlng=Z(t),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(t){return this._mRadius=t,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var t=[this._radius,this._radiusY||this._radius];return new ct(this._map.layerPointToLatLng(this._point.subtract(t)),this._map.layerPointToLatLng(this._point.add(t)))},setStyle:zt.prototype.setStyle,_project:function(){var t=this._latlng.lng,e=this._latlng.lat,o=this._map,a=o.options.crs;if(a.distance===Dt.distance){var c=Math.PI/180,m=this._mRadius/Dt.R/c,g=o.project([e+m,t]),y=o.project([e-m,t]),C=g.add(y).divideBy(2),P=o.unproject(C).lat,M=Math.acos((Math.cos(m*c)-Math.sin(e*c)*Math.sin(P*c))/(Math.cos(e*c)*Math.cos(P*c)))/c;(isNaN(M)||M===0)&&(M=m/Math.cos(Math.PI/180*e)),this._point=C.subtract(o.getPixelOrigin()),this._radius=isNaN(M)?0:C.x-o.project([P,t-M]).x,this._radiusY=C.y-g.y}else{var R=a.unproject(a.project(this._latlng).subtract([this._mRadius,0]));this._point=o.latLngToLayerPoint(this._latlng),this._radius=this._point.x-o.latLngToLayerPoint(R).x}this._updateBounds()}});function sr(t,e,o){return new Sn(t,e,o)}var Rt=zt.extend({options:{smoothFactor:1,noClip:!1},initialize:function(t,e){S(this,e),this._setLatLngs(t)},getLatLngs:function(){return this._latlngs},setLatLngs:function(t){return this._setLatLngs(t),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(t){for(var e=1/0,o=null,a=pe,c,m,g=0,y=this._parts.length;g<y;g++)for(var C=this._parts[g],P=1,M=C.length;P<M;P++){c=C[P-1],m=C[P];var R=a(t,c,m,!0);R<e&&(e=R,o=a(t,c,m))}return o&&(o.distance=Math.sqrt(e)),o},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Mi(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(t,e){return e=e||this._defaultShape(),t=Z(t),e.push(t),this._bounds.extend(t),this.redraw()},_setLatLngs:function(t){this._bounds=new ct,this._latlngs=this._convertLatLngs(t)},_defaultShape:function(){return gt(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(t){for(var e=[],o=gt(t),a=0,c=t.length;a<c;a++)o?(e[a]=Z(t[a]),this._bounds.extend(e[a])):e[a]=this._convertLatLngs(t[a]);return e},_project:function(){var t=new K;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,t),this._bounds.isValid()&&t.isValid()&&(this._rawPxBounds=t,this._updateBounds())},_updateBounds:function(){var t=this._clickTolerance(),e=new N(t,t);this._rawPxBounds&&(this._pxBounds=new K([this._rawPxBounds.min.subtract(e),this._rawPxBounds.max.add(e)]))},_projectLatlngs:function(t,e,o){var a=t[0]instanceof H,c=t.length,m,g;if(a){for(g=[],m=0;m<c;m++)g[m]=this._map.latLngToLayerPoint(t[m]),o.extend(g[m]);e.push(g)}else for(m=0;m<c;m++)this._projectLatlngs(t[m],e,o)},_clipPoints:function(){var t=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(t))){if(this.options.noClip){this._parts=this._rings;return}var e=this._parts,o,a,c,m,g,y,C;for(o=0,c=0,m=this._rings.length;o<m;o++)for(C=this._rings[o],a=0,g=C.length;a<g-1;a++)y=xi(C[a],C[a+1],t,a,!0),y&&(e[c]=e[c]||[],e[c].push(y[0]),(y[1]!==C[a+1]||a===g-2)&&(e[c].push(y[1]),c++))}},_simplifyPoints:function(){for(var t=this._parts,e=this.options.smoothFactor,o=0,a=t.length;o<a;o++)t[o]=Ci(t[o],e)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(t,e){var o,a,c,m,g,y,C=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(t))return!1;for(o=0,m=this._parts.length;o<m;o++)for(y=this._parts[o],a=0,g=y.length,c=g-1;a<g;c=a++)if(!(!e&&a===0)&&wi(t,y[c],y[a])<=C)return!0;return!1}});function rr(t,e){return new Rt(t,e)}Rt._flat=Ei;var Xt=Rt.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Ti(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(t){var e=Rt.prototype._convertLatLngs.call(this,t),o=e.length;return o>=2&&e[0]instanceof H&&e[0].equals(e[o-1])&&e.pop(),e},_setLatLngs:function(t){Rt.prototype._setLatLngs.call(this,t),gt(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return gt(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var t=this._renderer._bounds,e=this.options.weight,o=new N(e,e);if(t=new K(t.min.subtract(o),t.max.add(o)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(t))){if(this.options.noClip){this._parts=this._rings;return}for(var a=0,c=this._rings.length,m;a<c;a++)m=yi(this._rings[a],t,!0),m.length&&this._parts.push(m)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(t){var e=!1,o,a,c,m,g,y,C,P;if(!this._pxBounds||!this._pxBounds.contains(t))return!1;for(m=0,C=this._parts.length;m<C;m++)for(o=this._parts[m],g=0,P=o.length,y=P-1;g<P;y=g++)a=o[g],c=o[y],a.y>t.y!=c.y>t.y&&t.x<(c.x-a.x)*(t.y-a.y)/(c.y-a.y)+a.x&&(e=!e);return e||Rt.prototype._containsPoint.call(this,t,!0)}});function ar(t,e){return new Xt(t,e)}var kt=At.extend({initialize:function(t,e){S(this,e),this._layers={},t&&this.addData(t)},addData:function(t){var e=F(t)?t:t.features,o,a,c;if(e){for(o=0,a=e.length;o<a;o++)c=e[o],(c.geometries||c.geometry||c.features||c.coordinates)&&this.addData(c);return this}var m=this.options;if(m.filter&&!m.filter(t))return this;var g=De(t,m);return g?(g.feature=Oe(t),g.defaultOptions=g.options,this.resetStyle(g),m.onEachFeature&&m.onEachFeature(t,g),this.addLayer(g)):this},resetStyle:function(t){return t===void 0?this.eachLayer(this.resetStyle,this):(t.options=l({},t.defaultOptions),this._setLayerStyle(t,this.options.style),this)},setStyle:function(t){return this.eachLayer(function(e){this._setLayerStyle(e,t)},this)},_setLayerStyle:function(t,e){t.setStyle&&(typeof e=="function"&&(e=e(t.feature)),t.setStyle(e))}});function De(t,e){var o=t.type==="Feature"?t.geometry:t,a=o?o.coordinates:null,c=[],m=e&&e.pointToLayer,g=e&&e.coordsToLatLng||In,y,C,P,M;if(!a&&!o)return null;switch(o.type){case"Point":return y=g(a),Ii(m,t,y,e);case"MultiPoint":for(P=0,M=a.length;P<M;P++)y=g(a[P]),c.push(Ii(m,t,y,e));return new At(c);case"LineString":case"MultiLineString":return C=Be(a,o.type==="LineString"?0:1,g),new Rt(C,e);case"Polygon":case"MultiPolygon":return C=Be(a,o.type==="Polygon"?1:2,g),new Xt(C,e);case"GeometryCollection":for(P=0,M=o.geometries.length;P<M;P++){var R=De({geometry:o.geometries[P],type:"Feature",properties:t.properties},e);R&&c.push(R)}return new At(c);case"FeatureCollection":for(P=0,M=o.features.length;P<M;P++){var z=De(o.features[P],e);z&&c.push(z)}return new At(c);default:throw new Error("Invalid GeoJSON object.")}}function Ii(t,e,o,a){return t?t(e,o):new Ne(o,a&&a.markersInheritOptions&&a)}function In(t){return new H(t[1],t[0],t[2])}function Be(t,e,o){for(var a=[],c=0,m=t.length,g;c<m;c++)g=e?Be(t[c],e-1,o):(o||In)(t[c]),a.push(g);return a}function An(t,e){return t=Z(t),t.alt!==void 0?[x(t.lng,e),x(t.lat,e),x(t.alt,e)]:[x(t.lng,e),x(t.lat,e)]}function ze(t,e,o,a){for(var c=[],m=0,g=t.length;m<g;m++)c.push(e?ze(t[m],gt(t[m])?0:e-1,o,a):An(t[m],a));return!e&&o&&c.length>0&&c.push(c[0].slice()),c}function Qt(t,e){return t.feature?l({},t.feature,{geometry:e}):Oe(e)}function Oe(t){return t.type==="Feature"||t.type==="FeatureCollection"?t:{type:"Feature",properties:{},geometry:t}}var Rn={toGeoJSON:function(t){return Qt(this,{type:"Point",coordinates:An(this.getLatLng(),t)})}};Ne.include(Rn),Sn.include(Rn),be.include(Rn),Rt.include({toGeoJSON:function(t){var e=!gt(this._latlngs),o=ze(this._latlngs,e?1:0,!1,t);return Qt(this,{type:(e?"Multi":"")+"LineString",coordinates:o})}}),Xt.include({toGeoJSON:function(t){var e=!gt(this._latlngs),o=e&&!gt(this._latlngs[0]),a=ze(this._latlngs,o?2:e?1:0,!0,t);return e||(a=[a]),Qt(this,{type:(o?"Multi":"")+"Polygon",coordinates:a})}}),$t.include({toMultiPoint:function(t){var e=[];return this.eachLayer(function(o){e.push(o.toGeoJSON(t).geometry.coordinates)}),Qt(this,{type:"MultiPoint",coordinates:e})},toGeoJSON:function(t){var e=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(e==="MultiPoint")return this.toMultiPoint(t);var o=e==="GeometryCollection",a=[];return this.eachLayer(function(c){if(c.toGeoJSON){var m=c.toGeoJSON(t);if(o)a.push(m.geometry);else{var g=Oe(m);g.type==="FeatureCollection"?a.push.apply(a,g.features):a.push(g)}}}),o?Qt(this,{geometries:a,type:"GeometryCollection"}):{type:"FeatureCollection",features:a}}});function Ai(t,e){return new kt(t,e)}var lr=Ai,Fe=Ct.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(t,e,o){this._url=t,this._bounds=X(e),S(this,o)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(B(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){Y(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(t){return this.options.opacity=t,this._image&&this._updateOpacity(),this},setStyle:function(t){return t.opacity&&this.setOpacity(t.opacity),this},bringToFront:function(){return this._map&&Kt(this._image),this},bringToBack:function(){return this._map&&Yt(this._image),this},setUrl:function(t){return this._url=t,this._image&&(this._image.src=t),this},setBounds:function(t){return this._bounds=X(t),this._map&&this._reset(),this},getEvents:function(){var t={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},setZIndex:function(t){return this.options.zIndex=t,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var t=this._url.tagName==="IMG",e=this._image=t?this._url:U("img");if(B(e,"leaflet-image-layer"),this._zoomAnimated&&B(e,"leaflet-zoom-animated"),this.options.className&&B(e,this.options.className),e.onselectstart=w,e.onmousemove=w,e.onload=d(this.fire,this,"load"),e.onerror=d(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(e.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),t){this._url=e.src;return}e.src=this._url,e.alt=this.options.alt},_animateZoom:function(t){var e=this._map.getZoomScale(t.zoom),o=this._map._latLngBoundsToNewLayerBounds(this._bounds,t.zoom,t.center).min;Zt(this._image,o,e)},_reset:function(){var t=this._image,e=new K(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),o=e.getSize();Q(t,e.min),t.style.width=o.x+"px",t.style.height=o.y+"px"},_updateOpacity:function(){_t(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var t=this.options.errorOverlayUrl;t&&this._url!==t&&(this._url=t,this._image.src=t)},getCenter:function(){return this._bounds.getCenter()}}),ur=function(t,e,o){return new Fe(t,e,o)},Ri=Fe.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var t=this._url.tagName==="VIDEO",e=this._image=t?this._url:U("video");if(B(e,"leaflet-image-layer"),this._zoomAnimated&&B(e,"leaflet-zoom-animated"),this.options.className&&B(e,this.options.className),e.onselectstart=w,e.onmousemove=w,e.onloadeddata=d(this.fire,this,"load"),t){for(var o=e.getElementsByTagName("source"),a=[],c=0;c<o.length;c++)a.push(o[c].src);this._url=o.length>0?a:[e.src];return}F(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(e.style,"objectFit")&&(e.style.objectFit="fill"),e.autoplay=!!this.options.autoplay,e.loop=!!this.options.loop,e.muted=!!this.options.muted,e.playsInline=!!this.options.playsInline;for(var m=0;m<this._url.length;m++){var g=U("source");g.src=this._url[m],e.appendChild(g)}}});function hr(t,e,o){return new Ri(t,e,o)}var ki=Fe.extend({_initImage:function(){var t=this._image=this._url;B(t,"leaflet-image-layer"),this._zoomAnimated&&B(t,"leaflet-zoom-animated"),this.options.className&&B(t,this.options.className),t.onselectstart=w,t.onmousemove=w}});function cr(t,e,o){return new ki(t,e,o)}var Et=Ct.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(t,e){t&&(t instanceof H||F(t))?(this._latlng=Z(t),S(this,e)):(S(this,t),this._source=e),this.options.content&&(this._content=this.options.content)},openOn:function(t){return t=arguments.length?t:this._source._map,t.hasLayer(this)||t.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(t){return this._map?this.close():(arguments.length?this._source=t:t=this._source,this._prepareOpen(),this.openOn(t._map)),this},onAdd:function(t){this._zoomAnimated=t._zoomAnimated,this._container||this._initLayout(),t._fadeAnimated&&_t(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),t._fadeAnimated&&_t(this._container,1),this.bringToFront(),this.options.interactive&&(B(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(t){t._fadeAnimated?(_t(this._container,0),this._removeTimeout=setTimeout(d(Y,void 0,this._container),200)):Y(this._container),this.options.interactive&&(J(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(t){return this._latlng=Z(t),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(t){return this._content=t,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var t={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&Kt(this._container),this},bringToBack:function(){return this._map&&Yt(this._container),this},_prepareOpen:function(t){var e=this._source;if(!e._map)return!1;if(e instanceof At){e=null;var o=this._source._layers;for(var a in o)if(o[a]._map){e=o[a];break}if(!e)return!1;this._source=e}if(!t)if(e.getCenter)t=e.getCenter();else if(e.getLatLng)t=e.getLatLng();else if(e.getBounds)t=e.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(t),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var t=this._contentNode,e=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof e=="string")t.innerHTML=e;else{for(;t.hasChildNodes();)t.removeChild(t.firstChild);t.appendChild(e)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var t=this._map.latLngToLayerPoint(this._latlng),e=k(this.options.offset),o=this._getAnchor();this._zoomAnimated?Q(this._container,t.add(o)):e=e.add(t).add(o);var a=this._containerBottom=-e.y,c=this._containerLeft=-Math.round(this._containerWidth/2)+e.x;this._container.style.bottom=a+"px",this._container.style.left=c+"px"}},_getAnchor:function(){return[0,0]}});V.include({_initOverlay:function(t,e,o,a){var c=e;return c instanceof t||(c=new t(a).setContent(e)),o&&c.setLatLng(o),c}}),Ct.include({_initOverlay:function(t,e,o,a){var c=o;return c instanceof t?(S(c,a),c._source=this):(c=e&&!a?e:new t(a,this),c.setContent(o)),c}});var Ze=Et.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(t){return t=arguments.length?t:this._source._map,!t.hasLayer(this)&&t._popup&&t._popup.options.autoClose&&t.removeLayer(t._popup),t._popup=this,Et.prototype.openOn.call(this,t)},onAdd:function(t){Et.prototype.onAdd.call(this,t),t.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof zt||this._source.on("preclick",Ut))},onRemove:function(t){Et.prototype.onRemove.call(this,t),t.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof zt||this._source.off("preclick",Ut))},getEvents:function(){var t=Et.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(t.preclick=this.close),this.options.keepInView&&(t.moveend=this._adjustPan),t},_initLayout:function(){var t="leaflet-popup",e=this._container=U("div",t+" "+(this.options.className||"")+" leaflet-zoom-animated"),o=this._wrapper=U("div",t+"-content-wrapper",e);if(this._contentNode=U("div",t+"-content",o),fe(e),Tn(this._contentNode),b(e,"contextmenu",Ut),this._tipContainer=U("div",t+"-tip-container",e),this._tip=U("div",t+"-tip",this._tipContainer),this.options.closeButton){var a=this._closeButton=U("a",t+"-close-button",e);a.setAttribute("role","button"),a.setAttribute("aria-label","Close popup"),a.href="#close",a.innerHTML='<span aria-hidden="true">&#215;</span>',b(a,"click",function(c){it(c),this.close()},this)}},_updateLayout:function(){var t=this._contentNode,e=t.style;e.width="",e.whiteSpace="nowrap";var o=t.offsetWidth;o=Math.min(o,this.options.maxWidth),o=Math.max(o,this.options.minWidth),e.width=o+1+"px",e.whiteSpace="",e.height="";var a=t.offsetHeight,c=this.options.maxHeight,m="leaflet-popup-scrolled";c&&a>c?(e.height=c+"px",B(t,m)):J(t,m),this._containerWidth=this._container.offsetWidth},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center),o=this._getAnchor();Q(this._container,e.add(o))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var t=this._map,e=parseInt(le(this._container,"marginBottom"),10)||0,o=this._container.offsetHeight+e,a=this._containerWidth,c=new N(this._containerLeft,-o-this._containerBottom);c._add(Vt(this._container));var m=t.layerPointToContainerPoint(c),g=k(this.options.autoPanPadding),y=k(this.options.autoPanPaddingTopLeft||g),C=k(this.options.autoPanPaddingBottomRight||g),P=t.getSize(),M=0,R=0;m.x+a+C.x>P.x&&(M=m.x+a-P.x+C.x),m.x-M-y.x<0&&(M=m.x-y.x),m.y+o+C.y>P.y&&(R=m.y+o-P.y+C.y),m.y-R-y.y<0&&(R=m.y-y.y),(M||R)&&(this.options.keepInView&&(this._autopanning=!0),t.fire("autopanstart").panBy([M,R]))}},_getAnchor:function(){return k(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),fr=function(t,e){return new Ze(t,e)};V.mergeOptions({closePopupOnClick:!0}),V.include({openPopup:function(t,e,o){return this._initOverlay(Ze,t,e,o).openOn(this),this},closePopup:function(t){return t=arguments.length?t:this._popup,t&&t.close(),this}}),Ct.include({bindPopup:function(t,e){return this._popup=this._initOverlay(Ze,this._popup,t,e),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(t){return this._popup&&(this instanceof At||(this._popup._source=this),this._popup._prepareOpen(t||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(t){return this._popup&&this._popup.setContent(t),this},getPopup:function(){return this._popup},_openPopup:function(t){if(!(!this._popup||!this._map)){qt(t);var e=t.layer||t.target;if(this._popup._source===e&&!(e instanceof zt)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(t.latlng);return}this._popup._source=e,this.openPopup(t.latlng)}},_movePopup:function(t){this._popup.setLatLng(t.latlng)},_onKeyPress:function(t){t.originalEvent.keyCode===13&&this._openPopup(t)}});var Ve=Et.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(t){Et.prototype.onAdd.call(this,t),this.setOpacity(this.options.opacity),t.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(t){Et.prototype.onRemove.call(this,t),t.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var t=Et.prototype.getEvents.call(this);return this.options.permanent||(t.preclick=this.close),t},_initLayout:function(){var t="leaflet-tooltip",e=t+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=U("div",e),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+_(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(t){var e,o,a=this._map,c=this._container,m=a.latLngToContainerPoint(a.getCenter()),g=a.layerPointToContainerPoint(t),y=this.options.direction,C=c.offsetWidth,P=c.offsetHeight,M=k(this.options.offset),R=this._getAnchor();y==="top"?(e=C/2,o=P):y==="bottom"?(e=C/2,o=0):y==="center"?(e=C/2,o=P/2):y==="right"?(e=0,o=P/2):y==="left"?(e=C,o=P/2):g.x<m.x?(y="right",e=0,o=P/2):(y="left",e=C+(M.x+R.x)*2,o=P/2),t=t.subtract(k(e,o,!0)).add(M).add(R),J(c,"leaflet-tooltip-right"),J(c,"leaflet-tooltip-left"),J(c,"leaflet-tooltip-top"),J(c,"leaflet-tooltip-bottom"),B(c,"leaflet-tooltip-"+y),Q(c,t)},_updatePosition:function(){var t=this._map.latLngToLayerPoint(this._latlng);this._setPosition(t)},setOpacity:function(t){this.options.opacity=t,this._container&&_t(this._container,t)},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center);this._setPosition(e)},_getAnchor:function(){return k(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),dr=function(t,e){return new Ve(t,e)};V.include({openTooltip:function(t,e,o){return this._initOverlay(Ve,t,e,o).openOn(this),this},closeTooltip:function(t){return t.close(),this}}),Ct.include({bindTooltip:function(t,e){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(Ve,this._tooltip,t,e),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(t){if(!(!t&&this._tooltipHandlersAdded)){var e=t?"off":"on",o={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?o.add=this._openTooltip:(o.mouseover=this._openTooltip,o.mouseout=this.closeTooltip,o.click=this._openTooltip,this._map?this._addFocusListeners():o.add=this._addFocusListeners),this._tooltip.options.sticky&&(o.mousemove=this._moveTooltip),this[e](o),this._tooltipHandlersAdded=!t}},openTooltip:function(t){return this._tooltip&&(this instanceof At||(this._tooltip._source=this),this._tooltip._prepareOpen(t)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(t){return this._tooltip&&this._tooltip.setContent(t),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(t){var e=typeof t.getElement=="function"&&t.getElement();e&&(b(e,"focus",function(){this._tooltip._source=t,this.openTooltip()},this),b(e,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(t){var e=typeof t.getElement=="function"&&t.getElement();e&&e.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(t){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var e=this;this._map.once("moveend",function(){e._openOnceFlag=!1,e._openTooltip(t)});return}this._tooltip._source=t.layer||t.target,this.openTooltip(this._tooltip.options.sticky?t.latlng:void 0)}},_moveTooltip:function(t){var e=t.latlng,o,a;this._tooltip.options.sticky&&t.originalEvent&&(o=this._map.mouseEventToContainerPoint(t.originalEvent),a=this._map.containerPointToLayerPoint(o),e=this._map.layerPointToLatLng(a)),this._tooltip.setLatLng(e)}});var Ni=Jt.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(t){var e=t&&t.tagName==="DIV"?t:document.createElement("div"),o=this.options;if(o.html instanceof Element?(Le(e),e.appendChild(o.html)):e.innerHTML=o.html!==!1?o.html:"",o.bgPos){var a=k(o.bgPos);e.style.backgroundPosition=-a.x+"px "+-a.y+"px"}return this._setIconStyles(e,"icon"),e},createShadow:function(){return null}});function pr(t){return new Ni(t)}Jt.Default=me;var _e=Ct.extend({options:{tileSize:256,opacity:1,updateWhenIdle:A.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(t){S(this,t)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(t){t._addZoomLimit(this)},onRemove:function(t){this._removeAllTiles(),Y(this._container),t._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(Kt(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(Yt(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(t){return this.options.opacity=t,this._updateOpacity(),this},setZIndex:function(t){return this.options.zIndex=t,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var t=this._clampZoom(this._map.getZoom());t!==this._tileZoom&&(this._tileZoom=t,this._updateLevels()),this._update()}return this},getEvents:function(){var t={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=v(this._onMoveEnd,this.options.updateInterval,this)),t.move=this._onMove),this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},createTile:function(){return document.createElement("div")},getTileSize:function(){var t=this.options.tileSize;return t instanceof N?t:new N(t,t)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(t){for(var e=this.getPane().children,o=-t(-1/0,1/0),a=0,c=e.length,m;a<c;a++)m=e[a].style.zIndex,e[a]!==this._container&&m&&(o=t(o,+m));isFinite(o)&&(this.options.zIndex=o+t(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!A.ielt9){_t(this._container,this.options.opacity);var t=+new Date,e=!1,o=!1;for(var a in this._tiles){var c=this._tiles[a];if(!(!c.current||!c.loaded)){var m=Math.min(1,(t-c.loaded)/200);_t(c.el,m),m<1?e=!0:(c.active?o=!0:this._onOpaqueTile(c),c.active=!0)}}o&&!this._noPrune&&this._pruneTiles(),e&&(rt(this._fadeFrame),this._fadeFrame=nt(this._updateOpacity,this))}},_onOpaqueTile:w,_initContainer:function(){this._container||(this._container=U("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var t=this._tileZoom,e=this.options.maxZoom;if(t!==void 0){for(var o in this._levels)o=Number(o),this._levels[o].el.children.length||o===t?(this._levels[o].el.style.zIndex=e-Math.abs(t-o),this._onUpdateLevel(o)):(Y(this._levels[o].el),this._removeTilesAtZoom(o),this._onRemoveLevel(o),delete this._levels[o]);var a=this._levels[t],c=this._map;return a||(a=this._levels[t]={},a.el=U("div","leaflet-tile-container leaflet-zoom-animated",this._container),a.el.style.zIndex=e,a.origin=c.project(c.unproject(c.getPixelOrigin()),t).round(),a.zoom=t,this._setZoomTransform(a,c.getCenter(),c.getZoom()),w(a.el.offsetWidth),this._onCreateLevel(a)),this._level=a,a}},_onUpdateLevel:w,_onRemoveLevel:w,_onCreateLevel:w,_pruneTiles:function(){if(this._map){var t,e,o=this._map.getZoom();if(o>this.options.maxZoom||o<this.options.minZoom){this._removeAllTiles();return}for(t in this._tiles)e=this._tiles[t],e.retain=e.current;for(t in this._tiles)if(e=this._tiles[t],e.current&&!e.active){var a=e.coords;this._retainParent(a.x,a.y,a.z,a.z-5)||this._retainChildren(a.x,a.y,a.z,a.z+2)}for(t in this._tiles)this._tiles[t].retain||this._removeTile(t)}},_removeTilesAtZoom:function(t){for(var e in this._tiles)this._tiles[e].coords.z===t&&this._removeTile(e)},_removeAllTiles:function(){for(var t in this._tiles)this._removeTile(t)},_invalidateAll:function(){for(var t in this._levels)Y(this._levels[t].el),this._onRemoveLevel(Number(t)),delete this._levels[t];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(t,e,o,a){var c=Math.floor(t/2),m=Math.floor(e/2),g=o-1,y=new N(+c,+m);y.z=+g;var C=this._tileCoordsToKey(y),P=this._tiles[C];return P&&P.active?(P.retain=!0,!0):(P&&P.loaded&&(P.retain=!0),g>a?this._retainParent(c,m,g,a):!1)},_retainChildren:function(t,e,o,a){for(var c=2*t;c<2*t+2;c++)for(var m=2*e;m<2*e+2;m++){var g=new N(c,m);g.z=o+1;var y=this._tileCoordsToKey(g),C=this._tiles[y];if(C&&C.active){C.retain=!0;continue}else C&&C.loaded&&(C.retain=!0);o+1<a&&this._retainChildren(c,m,o+1,a)}},_resetView:function(t){var e=t&&(t.pinch||t.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),e,e)},_animateZoom:function(t){this._setView(t.center,t.zoom,!0,t.noUpdate)},_clampZoom:function(t){var e=this.options;return e.minNativeZoom!==void 0&&t<e.minNativeZoom?e.minNativeZoom:e.maxNativeZoom!==void 0&&e.maxNativeZoom<t?e.maxNativeZoom:t},_setView:function(t,e,o,a){var c=Math.round(e);this.options.maxZoom!==void 0&&c>this.options.maxZoom||this.options.minZoom!==void 0&&c<this.options.minZoom?c=void 0:c=this._clampZoom(c);var m=this.options.updateWhenZooming&&c!==this._tileZoom;(!a||m)&&(this._tileZoom=c,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),c!==void 0&&this._update(t),o||this._pruneTiles(),this._noPrune=!!o),this._setZoomTransforms(t,e)},_setZoomTransforms:function(t,e){for(var o in this._levels)this._setZoomTransform(this._levels[o],t,e)},_setZoomTransform:function(t,e,o){var a=this._map.getZoomScale(o,t.zoom),c=t.origin.multiplyBy(a).subtract(this._map._getNewPixelOrigin(e,o)).round();A.any3d?Zt(t.el,c,a):Q(t.el,c)},_resetGrid:function(){var t=this._map,e=t.options.crs,o=this._tileSize=this.getTileSize(),a=this._tileZoom,c=this._map.getPixelWorldBounds(this._tileZoom);c&&(this._globalTileRange=this._pxBoundsToTileRange(c)),this._wrapX=e.wrapLng&&!this.options.noWrap&&[Math.floor(t.project([0,e.wrapLng[0]],a).x/o.x),Math.ceil(t.project([0,e.wrapLng[1]],a).x/o.y)],this._wrapY=e.wrapLat&&!this.options.noWrap&&[Math.floor(t.project([e.wrapLat[0],0],a).y/o.x),Math.ceil(t.project([e.wrapLat[1],0],a).y/o.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(t){var e=this._map,o=e._animatingZoom?Math.max(e._animateToZoom,e.getZoom()):e.getZoom(),a=e.getZoomScale(o,this._tileZoom),c=e.project(t,this._tileZoom).floor(),m=e.getSize().divideBy(a*2);return new K(c.subtract(m),c.add(m))},_update:function(t){var e=this._map;if(e){var o=this._clampZoom(e.getZoom());if(t===void 0&&(t=e.getCenter()),this._tileZoom!==void 0){var a=this._getTiledPixelBounds(t),c=this._pxBoundsToTileRange(a),m=c.getCenter(),g=[],y=this.options.keepBuffer,C=new K(c.getBottomLeft().subtract([y,-y]),c.getTopRight().add([y,-y]));if(!(isFinite(c.min.x)&&isFinite(c.min.y)&&isFinite(c.max.x)&&isFinite(c.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var P in this._tiles){var M=this._tiles[P].coords;(M.z!==this._tileZoom||!C.contains(new N(M.x,M.y)))&&(this._tiles[P].current=!1)}if(Math.abs(o-this._tileZoom)>1){this._setView(t,o);return}for(var R=c.min.y;R<=c.max.y;R++)for(var z=c.min.x;z<=c.max.x;z++){var at=new N(z,R);if(at.z=this._tileZoom,!!this._isValidTile(at)){var tt=this._tiles[this._tileCoordsToKey(at)];tt?tt.current=!0:g.push(at)}}if(g.sort(function(ft,te){return ft.distanceTo(m)-te.distanceTo(m)}),g.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var vt=document.createDocumentFragment();for(z=0;z<g.length;z++)this._addTile(g[z],vt);this._level.el.appendChild(vt)}}}},_isValidTile:function(t){var e=this._map.options.crs;if(!e.infinite){var o=this._globalTileRange;if(!e.wrapLng&&(t.x<o.min.x||t.x>o.max.x)||!e.wrapLat&&(t.y<o.min.y||t.y>o.max.y))return!1}if(!this.options.bounds)return!0;var a=this._tileCoordsToBounds(t);return X(this.options.bounds).overlaps(a)},_keyToBounds:function(t){return this._tileCoordsToBounds(this._keyToTileCoords(t))},_tileCoordsToNwSe:function(t){var e=this._map,o=this.getTileSize(),a=t.scaleBy(o),c=a.add(o),m=e.unproject(a,t.z),g=e.unproject(c,t.z);return[m,g]},_tileCoordsToBounds:function(t){var e=this._tileCoordsToNwSe(t),o=new ct(e[0],e[1]);return this.options.noWrap||(o=this._map.wrapLatLngBounds(o)),o},_tileCoordsToKey:function(t){return t.x+":"+t.y+":"+t.z},_keyToTileCoords:function(t){var e=t.split(":"),o=new N(+e[0],+e[1]);return o.z=+e[2],o},_removeTile:function(t){var e=this._tiles[t];e&&(Y(e.el),delete this._tiles[t],this.fire("tileunload",{tile:e.el,coords:this._keyToTileCoords(t)}))},_initTile:function(t){B(t,"leaflet-tile");var e=this.getTileSize();t.style.width=e.x+"px",t.style.height=e.y+"px",t.onselectstart=w,t.onmousemove=w,A.ielt9&&this.options.opacity<1&&_t(t,this.options.opacity)},_addTile:function(t,e){var o=this._getTilePos(t),a=this._tileCoordsToKey(t),c=this.createTile(this._wrapCoords(t),d(this._tileReady,this,t));this._initTile(c),this.createTile.length<2&&nt(d(this._tileReady,this,t,null,c)),Q(c,o),this._tiles[a]={el:c,coords:t,current:!0},e.appendChild(c),this.fire("tileloadstart",{tile:c,coords:t})},_tileReady:function(t,e,o){e&&this.fire("tileerror",{error:e,tile:o,coords:t});var a=this._tileCoordsToKey(t);o=this._tiles[a],o&&(o.loaded=+new Date,this._map._fadeAnimated?(_t(o.el,0),rt(this._fadeFrame),this._fadeFrame=nt(this._updateOpacity,this)):(o.active=!0,this._pruneTiles()),e||(B(o.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:o.el,coords:t})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),A.ielt9||!this._map._fadeAnimated?nt(this._pruneTiles,this):setTimeout(d(this._pruneTiles,this),250)))},_getTilePos:function(t){return t.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(t){var e=new N(this._wrapX?T(t.x,this._wrapX):t.x,this._wrapY?T(t.y,this._wrapY):t.y);return e.z=t.z,e},_pxBoundsToTileRange:function(t){var e=this.getTileSize();return new K(t.min.unscaleBy(e).floor(),t.max.unscaleBy(e).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var t in this._tiles)if(!this._tiles[t].loaded)return!1;return!0}});function mr(t){return new _e(t)}var jt=_e.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(t,e){this._url=t,e=S(this,e),e.detectRetina&&A.retina&&e.maxZoom>0?(e.tileSize=Math.floor(e.tileSize/2),e.zoomReverse?(e.zoomOffset--,e.minZoom=Math.min(e.maxZoom,e.minZoom+1)):(e.zoomOffset++,e.maxZoom=Math.max(e.minZoom,e.maxZoom-1)),e.minZoom=Math.max(0,e.minZoom)):e.zoomReverse?e.minZoom=Math.min(e.maxZoom,e.minZoom):e.maxZoom=Math.max(e.minZoom,e.maxZoom),typeof e.subdomains=="string"&&(e.subdomains=e.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(t,e){return this._url===t&&e===void 0&&(e=!0),this._url=t,e||this.redraw(),this},createTile:function(t,e){var o=document.createElement("img");return b(o,"load",d(this._tileOnLoad,this,e,o)),b(o,"error",d(this._tileOnError,this,e,o)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(o.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(o.referrerPolicy=this.options.referrerPolicy),o.alt="",o.src=this.getTileUrl(t),o},getTileUrl:function(t){var e={r:A.retina?"@2x":"",s:this._getSubdomain(t),x:t.x,y:t.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var o=this._globalTileRange.max.y-t.y;this.options.tms&&(e.y=o),e["-y"]=o}return O(this._url,l(e,this.options))},_tileOnLoad:function(t,e){A.ielt9?setTimeout(d(t,this,null,e),0):t(null,e)},_tileOnError:function(t,e,o){var a=this.options.errorTileUrl;a&&e.getAttribute("src")!==a&&(e.src=a),t(o,e)},_onTileRemove:function(t){t.tile.onload=null},_getZoomForUrl:function(){var t=this._tileZoom,e=this.options.maxZoom,o=this.options.zoomReverse,a=this.options.zoomOffset;return o&&(t=e-t),t+a},_getSubdomain:function(t){var e=Math.abs(t.x+t.y)%this.options.subdomains.length;return this.options.subdomains[e]},_abortLoading:function(){var t,e;for(t in this._tiles)if(this._tiles[t].coords.z!==this._tileZoom&&(e=this._tiles[t].el,e.onload=w,e.onerror=w,!e.complete)){e.src=ot;var o=this._tiles[t].coords;Y(e),delete this._tiles[t],this.fire("tileabort",{tile:e,coords:o})}},_removeTile:function(t){var e=this._tiles[t];if(e)return e.el.setAttribute("src",ot),_e.prototype._removeTile.call(this,t)},_tileReady:function(t,e,o){if(!(!this._map||o&&o.getAttribute("src")===ot))return _e.prototype._tileReady.call(this,t,e,o)}});function bi(t,e){return new jt(t,e)}var Di=jt.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(t,e){this._url=t;var o=l({},this.defaultWmsParams);for(var a in e)a in this.options||(o[a]=e[a]);e=S(this,e);var c=e.detectRetina&&A.retina?2:1,m=this.getTileSize();o.width=m.x*c,o.height=m.y*c,this.wmsParams=o},onAdd:function(t){this._crs=this.options.crs||t.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var e=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[e]=this._crs.code,jt.prototype.onAdd.call(this,t)},getTileUrl:function(t){var e=this._tileCoordsToNwSe(t),o=this._crs,a=ht(o.project(e[0]),o.project(e[1])),c=a.min,m=a.max,g=(this._wmsVersion>=1.3&&this._crs===Li?[c.y,c.x,m.y,m.x]:[c.x,c.y,m.x,m.y]).join(","),y=jt.prototype.getTileUrl.call(this,t);return y+D(this.wmsParams,y,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+g},setParams:function(t,e){return l(this.wmsParams,t),e||this.redraw(),this}});function _r(t,e){return new Di(t,e)}jt.WMS=Di,bi.wms=_r;var Nt=Ct.extend({options:{padding:.1},initialize:function(t){S(this,t),_(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),B(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var t={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(t.zoomanim=this._onAnimZoom),t},_onAnimZoom:function(t){this._updateTransform(t.center,t.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(t,e){var o=this._map.getZoomScale(e,this._zoom),a=this._map.getSize().multiplyBy(.5+this.options.padding),c=this._map.project(this._center,e),m=a.multiplyBy(-o).add(c).subtract(this._map._getNewPixelOrigin(t,e));A.any3d?Zt(this._container,m,o):Q(this._container,m)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var t in this._layers)this._layers[t]._reset()},_onZoomEnd:function(){for(var t in this._layers)this._layers[t]._project()},_updatePaths:function(){for(var t in this._layers)this._layers[t]._update()},_update:function(){var t=this.options.padding,e=this._map.getSize(),o=this._map.containerPointToLayerPoint(e.multiplyBy(-t)).round();this._bounds=new K(o,o.add(e.multiplyBy(1+t*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),Bi=Nt.extend({options:{tolerance:0},getEvents:function(){var t=Nt.prototype.getEvents.call(this);return t.viewprereset=this._onViewPreReset,t},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){Nt.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var t=this._container=document.createElement("canvas");b(t,"mousemove",this._onMouseMove,this),b(t,"click dblclick mousedown mouseup contextmenu",this._onClick,this),b(t,"mouseout",this._handleMouseOut,this),t._leaflet_disable_events=!0,this._ctx=t.getContext("2d")},_destroyContainer:function(){rt(this._redrawRequest),delete this._ctx,Y(this._container),W(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var t;this._redrawBounds=null;for(var e in this._layers)t=this._layers[e],t._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Nt.prototype._update.call(this);var t=this._bounds,e=this._container,o=t.getSize(),a=A.retina?2:1;Q(e,t.min),e.width=a*o.x,e.height=a*o.y,e.style.width=o.x+"px",e.style.height=o.y+"px",A.retina&&this._ctx.scale(2,2),this._ctx.translate(-t.min.x,-t.min.y),this.fire("update")}},_reset:function(){Nt.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(t){this._updateDashArray(t),this._layers[_(t)]=t;var e=t._order={layer:t,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=e),this._drawLast=e,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(t){this._requestRedraw(t)},_removePath:function(t){var e=t._order,o=e.next,a=e.prev;o?o.prev=a:this._drawLast=a,a?a.next=o:this._drawFirst=o,delete t._order,delete this._layers[_(t)],this._requestRedraw(t)},_updatePath:function(t){this._extendRedrawBounds(t),t._project(),t._update(),this._requestRedraw(t)},_updateStyle:function(t){this._updateDashArray(t),this._requestRedraw(t)},_updateDashArray:function(t){if(typeof t.options.dashArray=="string"){var e=t.options.dashArray.split(/[, ]+/),o=[],a,c;for(c=0;c<e.length;c++){if(a=Number(e[c]),isNaN(a))return;o.push(a)}t.options._dashArray=o}else t.options._dashArray=t.options.dashArray},_requestRedraw:function(t){this._map&&(this._extendRedrawBounds(t),this._redrawRequest=this._redrawRequest||nt(this._redraw,this))},_extendRedrawBounds:function(t){if(t._pxBounds){var e=(t.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new K,this._redrawBounds.extend(t._pxBounds.min.subtract([e,e])),this._redrawBounds.extend(t._pxBounds.max.add([e,e]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var t=this._redrawBounds;if(t){var e=t.getSize();this._ctx.clearRect(t.min.x,t.min.y,e.x,e.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var t,e=this._redrawBounds;if(this._ctx.save(),e){var o=e.getSize();this._ctx.beginPath(),this._ctx.rect(e.min.x,e.min.y,o.x,o.y),this._ctx.clip()}this._drawing=!0;for(var a=this._drawFirst;a;a=a.next)t=a.layer,(!e||t._pxBounds&&t._pxBounds.intersects(e))&&t._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(t,e){if(this._drawing){var o,a,c,m,g=t._parts,y=g.length,C=this._ctx;if(y){for(C.beginPath(),o=0;o<y;o++){for(a=0,c=g[o].length;a<c;a++)m=g[o][a],C[a?"lineTo":"moveTo"](m.x,m.y);e&&C.closePath()}this._fillStroke(C,t)}}},_updateCircle:function(t){if(!(!this._drawing||t._empty())){var e=t._point,o=this._ctx,a=Math.max(Math.round(t._radius),1),c=(Math.max(Math.round(t._radiusY),1)||a)/a;c!==1&&(o.save(),o.scale(1,c)),o.beginPath(),o.arc(e.x,e.y/c,a,0,Math.PI*2,!1),c!==1&&o.restore(),this._fillStroke(o,t)}},_fillStroke:function(t,e){var o=e.options;o.fill&&(t.globalAlpha=o.fillOpacity,t.fillStyle=o.fillColor||o.color,t.fill(o.fillRule||"evenodd")),o.stroke&&o.weight!==0&&(t.setLineDash&&t.setLineDash(e.options&&e.options._dashArray||[]),t.globalAlpha=o.opacity,t.lineWidth=o.weight,t.strokeStyle=o.color,t.lineCap=o.lineCap,t.lineJoin=o.lineJoin,t.stroke())},_onClick:function(t){for(var e=this._map.mouseEventToLayerPoint(t),o,a,c=this._drawFirst;c;c=c.next)o=c.layer,o.options.interactive&&o._containsPoint(e)&&(!(t.type==="click"||t.type==="preclick")||!this._map._draggableMoved(o))&&(a=o);this._fireEvent(a?[a]:!1,t)},_onMouseMove:function(t){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var e=this._map.mouseEventToLayerPoint(t);this._handleMouseHover(t,e)}},_handleMouseOut:function(t){var e=this._hoveredLayer;e&&(J(this._container,"leaflet-interactive"),this._fireEvent([e],t,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(t,e){if(!this._mouseHoverThrottled){for(var o,a,c=this._drawFirst;c;c=c.next)o=c.layer,o.options.interactive&&o._containsPoint(e)&&(a=o);a!==this._hoveredLayer&&(this._handleMouseOut(t),a&&(B(this._container,"leaflet-interactive"),this._fireEvent([a],t,"mouseover"),this._hoveredLayer=a)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,t),this._mouseHoverThrottled=!0,setTimeout(d(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(t,e,o){this._map._fireDOMEvent(e,o||e.type,t)},_bringToFront:function(t){var e=t._order;if(e){var o=e.next,a=e.prev;if(o)o.prev=a;else return;a?a.next=o:o&&(this._drawFirst=o),e.prev=this._drawLast,this._drawLast.next=e,e.next=null,this._drawLast=e,this._requestRedraw(t)}},_bringToBack:function(t){var e=t._order;if(e){var o=e.next,a=e.prev;if(a)a.next=o;else return;o?o.prev=a:a&&(this._drawLast=a),e.prev=null,e.next=this._drawFirst,this._drawFirst.prev=e,this._drawFirst=e,this._requestRedraw(t)}}});function zi(t){return A.canvas?new Bi(t):null}var ge=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(t){return document.createElement("<lvml:"+t+' class="lvml">')}}catch{}return function(t){return document.createElement("<"+t+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),gr={_initContainer:function(){this._container=U("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(Nt.prototype._update.call(this),this.fire("update"))},_initPath:function(t){var e=t._container=ge("shape");B(e,"leaflet-vml-shape "+(this.options.className||"")),e.coordsize="1 1",t._path=ge("path"),e.appendChild(t._path),this._updateStyle(t),this._layers[_(t)]=t},_addPath:function(t){var e=t._container;this._container.appendChild(e),t.options.interactive&&t.addInteractiveTarget(e)},_removePath:function(t){var e=t._container;Y(e),t.removeInteractiveTarget(e),delete this._layers[_(t)]},_updateStyle:function(t){var e=t._stroke,o=t._fill,a=t.options,c=t._container;c.stroked=!!a.stroke,c.filled=!!a.fill,a.stroke?(e||(e=t._stroke=ge("stroke")),c.appendChild(e),e.weight=a.weight+"px",e.color=a.color,e.opacity=a.opacity,a.dashArray?e.dashStyle=F(a.dashArray)?a.dashArray.join(" "):a.dashArray.replace(/( *, *)/g," "):e.dashStyle="",e.endcap=a.lineCap.replace("butt","flat"),e.joinstyle=a.lineJoin):e&&(c.removeChild(e),t._stroke=null),a.fill?(o||(o=t._fill=ge("fill")),c.appendChild(o),o.color=a.fillColor||a.color,o.opacity=a.fillOpacity):o&&(c.removeChild(o),t._fill=null)},_updateCircle:function(t){var e=t._point.round(),o=Math.round(t._radius),a=Math.round(t._radiusY||o);this._setPath(t,t._empty()?"M0 0":"AL "+e.x+","+e.y+" "+o+","+a+" 0,"+65535*360)},_setPath:function(t,e){t._path.v=e},_bringToFront:function(t){Kt(t._container)},_bringToBack:function(t){Yt(t._container)}},Ue=A.vml?ge:Vn,ve=Nt.extend({_initContainer:function(){this._container=Ue("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=Ue("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){Y(this._container),W(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Nt.prototype._update.call(this);var t=this._bounds,e=t.getSize(),o=this._container;(!this._svgSize||!this._svgSize.equals(e))&&(this._svgSize=e,o.setAttribute("width",e.x),o.setAttribute("height",e.y)),Q(o,t.min),o.setAttribute("viewBox",[t.min.x,t.min.y,e.x,e.y].join(" ")),this.fire("update")}},_initPath:function(t){var e=t._path=Ue("path");t.options.className&&B(e,t.options.className),t.options.interactive&&B(e,"leaflet-interactive"),this._updateStyle(t),this._layers[_(t)]=t},_addPath:function(t){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(t._path),t.addInteractiveTarget(t._path)},_removePath:function(t){Y(t._path),t.removeInteractiveTarget(t._path),delete this._layers[_(t)]},_updatePath:function(t){t._project(),t._update()},_updateStyle:function(t){var e=t._path,o=t.options;e&&(o.stroke?(e.setAttribute("stroke",o.color),e.setAttribute("stroke-opacity",o.opacity),e.setAttribute("stroke-width",o.weight),e.setAttribute("stroke-linecap",o.lineCap),e.setAttribute("stroke-linejoin",o.lineJoin),o.dashArray?e.setAttribute("stroke-dasharray",o.dashArray):e.removeAttribute("stroke-dasharray"),o.dashOffset?e.setAttribute("stroke-dashoffset",o.dashOffset):e.removeAttribute("stroke-dashoffset")):e.setAttribute("stroke","none"),o.fill?(e.setAttribute("fill",o.fillColor||o.color),e.setAttribute("fill-opacity",o.fillOpacity),e.setAttribute("fill-rule",o.fillRule||"evenodd")):e.setAttribute("fill","none"))},_updatePoly:function(t,e){this._setPath(t,Un(t._parts,e))},_updateCircle:function(t){var e=t._point,o=Math.max(Math.round(t._radius),1),a=Math.max(Math.round(t._radiusY),1)||o,c="a"+o+","+a+" 0 1,0 ",m=t._empty()?"M0 0":"M"+(e.x-o)+","+e.y+c+o*2+",0 "+c+-o*2+",0 ";this._setPath(t,m)},_setPath:function(t,e){t._path.setAttribute("d",e)},_bringToFront:function(t){Kt(t._path)},_bringToBack:function(t){Yt(t._path)}});A.vml&&ve.include(gr);function Oi(t){return A.svg||A.vml?new ve(t):null}V.include({getRenderer:function(t){var e=t.options.renderer||this._getPaneRenderer(t.options.pane)||this.options.renderer||this._renderer;return e||(e=this._renderer=this._createRenderer()),this.hasLayer(e)||this.addLayer(e),e},_getPaneRenderer:function(t){if(t==="overlayPane"||t===void 0)return!1;var e=this._paneRenderers[t];return e===void 0&&(e=this._createRenderer({pane:t}),this._paneRenderers[t]=e),e},_createRenderer:function(t){return this.options.preferCanvas&&zi(t)||Oi(t)}});var Fi=Xt.extend({initialize:function(t,e){Xt.prototype.initialize.call(this,this._boundsToLatLngs(t),e)},setBounds:function(t){return this.setLatLngs(this._boundsToLatLngs(t))},_boundsToLatLngs:function(t){return t=X(t),[t.getSouthWest(),t.getNorthWest(),t.getNorthEast(),t.getSouthEast()]}});function vr(t,e){return new Fi(t,e)}ve.create=Ue,ve.pointsToPath=Un,kt.geometryToLayer=De,kt.coordsToLatLng=In,kt.coordsToLatLngs=Be,kt.latLngToCoords=An,kt.latLngsToCoords=ze,kt.getFeature=Qt,kt.asFeature=Oe,V.mergeOptions({boxZoom:!0});var Zi=xt.extend({initialize:function(t){this._map=t,this._container=t._container,this._pane=t._panes.overlayPane,this._resetStateTimeout=0,t.on("unload",this._destroy,this)},addHooks:function(){b(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){W(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){Y(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(t){if(!t.shiftKey||t.which!==1&&t.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),ue(),fn(),this._startPoint=this._map.mouseEventToContainerPoint(t),b(document,{contextmenu:qt,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(t){this._moved||(this._moved=!0,this._box=U("div","leaflet-zoom-box",this._container),B(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(t);var e=new K(this._point,this._startPoint),o=e.getSize();Q(this._box,e.min),this._box.style.width=o.x+"px",this._box.style.height=o.y+"px"},_finish:function(){this._moved&&(Y(this._box),J(this._container,"leaflet-crosshair")),he(),dn(),W(document,{contextmenu:qt,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(t){if(!(t.which!==1&&t.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(d(this._resetState,this),0);var e=new ct(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(e).fire("boxzoomend",{boxZoomBounds:e})}},_onKeyDown:function(t){t.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});V.addInitHook("addHandler","boxZoom",Zi),V.mergeOptions({doubleClickZoom:!0});var Vi=xt.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(t){var e=this._map,o=e.getZoom(),a=e.options.zoomDelta,c=t.originalEvent.shiftKey?o-a:o+a;e.options.doubleClickZoom==="center"?e.setZoom(c):e.setZoomAround(t.containerPoint,c)}});V.addInitHook("addHandler","doubleClickZoom",Vi),V.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var Ui=xt.extend({addHooks:function(){if(!this._draggable){var t=this._map;this._draggable=new Bt(t._mapPane,t._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),t.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),t.on("zoomend",this._onZoomEnd,this),t.whenReady(this._onZoomEnd,this))}B(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){J(this._map._container,"leaflet-grab"),J(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var t=this._map;if(t._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var e=X(this._map.options.maxBounds);this._offsetLimit=ht(this._map.latLngToContainerPoint(e.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(e.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;t.fire("movestart").fire("dragstart"),t.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(t){if(this._map.options.inertia){var e=this._lastTime=+new Date,o=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(o),this._times.push(e),this._prunePositions(e)}this._map.fire("move",t).fire("drag",t)},_prunePositions:function(t){for(;this._positions.length>1&&t-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var t=this._map.getSize().divideBy(2),e=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=e.subtract(t).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(t,e){return t-(t-e)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var t=this._draggable._newPos.subtract(this._draggable._startPos),e=this._offsetLimit;t.x<e.min.x&&(t.x=this._viscousLimit(t.x,e.min.x)),t.y<e.min.y&&(t.y=this._viscousLimit(t.y,e.min.y)),t.x>e.max.x&&(t.x=this._viscousLimit(t.x,e.max.x)),t.y>e.max.y&&(t.y=this._viscousLimit(t.y,e.max.y)),this._draggable._newPos=this._draggable._startPos.add(t)}},_onPreDragWrap:function(){var t=this._worldWidth,e=Math.round(t/2),o=this._initialWorldOffset,a=this._draggable._newPos.x,c=(a-e+o)%t+e-o,m=(a+e+o)%t-e-o,g=Math.abs(c+o)<Math.abs(m+o)?c:m;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=g},_onDragEnd:function(t){var e=this._map,o=e.options,a=!o.inertia||t.noInertia||this._times.length<2;if(e.fire("dragend",t),a)e.fire("moveend");else{this._prunePositions(+new Date);var c=this._lastPos.subtract(this._positions[0]),m=(this._lastTime-this._times[0])/1e3,g=o.easeLinearity,y=c.multiplyBy(g/m),C=y.distanceTo([0,0]),P=Math.min(o.inertiaMaxSpeed,C),M=y.multiplyBy(P/C),R=P/(o.inertiaDeceleration*g),z=M.multiplyBy(-R/2).round();!z.x&&!z.y?e.fire("moveend"):(z=e._limitOffset(z,e.options.maxBounds),nt(function(){e.panBy(z,{duration:R,easeLinearity:g,noMoveStart:!0,animate:!0})}))}}});V.addInitHook("addHandler","dragging",Ui),V.mergeOptions({keyboard:!0,keyboardPanDelta:80});var qi=xt.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(t){this._map=t,this._setPanDelta(t.options.keyboardPanDelta),this._setZoomDelta(t.options.zoomDelta)},addHooks:function(){var t=this._map._container;t.tabIndex<=0&&(t.tabIndex="0"),b(t,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),W(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var t=document.body,e=document.documentElement,o=t.scrollTop||e.scrollTop,a=t.scrollLeft||e.scrollLeft;this._map._container.focus(),window.scrollTo(a,o)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(t){var e=this._panKeys={},o=this.keyCodes,a,c;for(a=0,c=o.left.length;a<c;a++)e[o.left[a]]=[-1*t,0];for(a=0,c=o.right.length;a<c;a++)e[o.right[a]]=[t,0];for(a=0,c=o.down.length;a<c;a++)e[o.down[a]]=[0,t];for(a=0,c=o.up.length;a<c;a++)e[o.up[a]]=[0,-1*t]},_setZoomDelta:function(t){var e=this._zoomKeys={},o=this.keyCodes,a,c;for(a=0,c=o.zoomIn.length;a<c;a++)e[o.zoomIn[a]]=t;for(a=0,c=o.zoomOut.length;a<c;a++)e[o.zoomOut[a]]=-t},_addHooks:function(){b(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){W(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(t){if(!(t.altKey||t.ctrlKey||t.metaKey)){var e=t.keyCode,o=this._map,a;if(e in this._panKeys){if(!o._panAnim||!o._panAnim._inProgress)if(a=this._panKeys[e],t.shiftKey&&(a=k(a).multiplyBy(3)),o.options.maxBounds&&(a=o._limitOffset(k(a),o.options.maxBounds)),o.options.worldCopyJump){var c=o.wrapLatLng(o.unproject(o.project(o.getCenter()).add(a)));o.panTo(c)}else o.panBy(a)}else if(e in this._zoomKeys)o.setZoom(o.getZoom()+(t.shiftKey?3:1)*this._zoomKeys[e]);else if(e===27&&o._popup&&o._popup.options.closeOnEscapeKey)o.closePopup();else return;qt(t)}}});V.addInitHook("addHandler","keyboard",qi),V.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var Gi=xt.extend({addHooks:function(){b(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){W(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(t){var e=pi(t),o=this._map.options.wheelDebounceTime;this._delta+=e,this._lastMousePos=this._map.mouseEventToContainerPoint(t),this._startTime||(this._startTime=+new Date);var a=Math.max(o-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(d(this._performZoom,this),a),qt(t)},_performZoom:function(){var t=this._map,e=t.getZoom(),o=this._map.options.zoomSnap||0;t._stop();var a=this._delta/(this._map.options.wheelPxPerZoomLevel*4),c=4*Math.log(2/(1+Math.exp(-Math.abs(a))))/Math.LN2,m=o?Math.ceil(c/o)*o:c,g=t._limitZoom(e+(this._delta>0?m:-m))-e;this._delta=0,this._startTime=null,g&&(t.options.scrollWheelZoom==="center"?t.setZoom(e+g):t.setZoomAround(this._lastMousePos,e+g))}});V.addInitHook("addHandler","scrollWheelZoom",Gi);var yr=600;V.mergeOptions({tapHold:A.touchNative&&A.safari&&A.mobile,tapTolerance:15});var Hi=xt.extend({addHooks:function(){b(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){W(this._map._container,"touchstart",this._onDown,this)},_onDown:function(t){if(clearTimeout(this._holdTimeout),t.touches.length===1){var e=t.touches[0];this._startPos=this._newPos=new N(e.clientX,e.clientY),this._holdTimeout=setTimeout(d(function(){this._cancel(),this._isTapValid()&&(b(document,"touchend",it),b(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",e))},this),yr),b(document,"touchend touchcancel contextmenu",this._cancel,this),b(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function t(){W(document,"touchend",it),W(document,"touchend touchcancel",t)},_cancel:function(){clearTimeout(this._holdTimeout),W(document,"touchend touchcancel contextmenu",this._cancel,this),W(document,"touchmove",this._onMove,this)},_onMove:function(t){var e=t.touches[0];this._newPos=new N(e.clientX,e.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(t,e){var o=new MouseEvent(t,{bubbles:!0,cancelable:!0,view:window,screenX:e.screenX,screenY:e.screenY,clientX:e.clientX,clientY:e.clientY});o._simulated=!0,e.target.dispatchEvent(o)}});V.addInitHook("addHandler","tapHold",Hi),V.mergeOptions({touchZoom:A.touch,bounceAtZoomLimits:!0});var Wi=xt.extend({addHooks:function(){B(this._map._container,"leaflet-touch-zoom"),b(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){J(this._map._container,"leaflet-touch-zoom"),W(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(t){var e=this._map;if(!(!t.touches||t.touches.length!==2||e._animatingZoom||this._zooming)){var o=e.mouseEventToContainerPoint(t.touches[0]),a=e.mouseEventToContainerPoint(t.touches[1]);this._centerPoint=e.getSize()._divideBy(2),this._startLatLng=e.containerPointToLatLng(this._centerPoint),e.options.touchZoom!=="center"&&(this._pinchStartLatLng=e.containerPointToLatLng(o.add(a)._divideBy(2))),this._startDist=o.distanceTo(a),this._startZoom=e.getZoom(),this._moved=!1,this._zooming=!0,e._stop(),b(document,"touchmove",this._onTouchMove,this),b(document,"touchend touchcancel",this._onTouchEnd,this),it(t)}},_onTouchMove:function(t){if(!(!t.touches||t.touches.length!==2||!this._zooming)){var e=this._map,o=e.mouseEventToContainerPoint(t.touches[0]),a=e.mouseEventToContainerPoint(t.touches[1]),c=o.distanceTo(a)/this._startDist;if(this._zoom=e.getScaleZoom(c,this._startZoom),!e.options.bounceAtZoomLimits&&(this._zoom<e.getMinZoom()&&c<1||this._zoom>e.getMaxZoom()&&c>1)&&(this._zoom=e._limitZoom(this._zoom)),e.options.touchZoom==="center"){if(this._center=this._startLatLng,c===1)return}else{var m=o._add(a)._divideBy(2)._subtract(this._centerPoint);if(c===1&&m.x===0&&m.y===0)return;this._center=e.unproject(e.project(this._pinchStartLatLng,this._zoom).subtract(m),this._zoom)}this._moved||(e._moveStart(!0,!1),this._moved=!0),rt(this._animRequest);var g=d(e._move,e,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=nt(g,this,!0),it(t)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,rt(this._animRequest),W(document,"touchmove",this._onTouchMove,this),W(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});V.addInitHook("addHandler","touchZoom",Wi),V.BoxZoom=Zi,V.DoubleClickZoom=Vi,V.Drag=Ui,V.Keyboard=qi,V.ScrollWheelZoom=Gi,V.TapHold=Hi,V.TouchZoom=Wi,n.Bounds=K,n.Browser=A,n.CRS=It,n.Canvas=Bi,n.Circle=Sn,n.CircleMarker=be,n.Class=St,n.Control=Tt,n.DivIcon=Ni,n.DivOverlay=Et,n.DomEvent=zs,n.DomUtil=Ds,n.Draggable=Bt,n.Evented=oe,n.FeatureGroup=At,n.GeoJSON=kt,n.GridLayer=_e,n.Handler=xt,n.Icon=Jt,n.ImageOverlay=Fe,n.LatLng=H,n.LatLngBounds=ct,n.Layer=Ct,n.LayerGroup=$t,n.LineUtil=Js,n.Map=V,n.Marker=Ne,n.Mixin=Gs,n.Path=zt,n.Point=N,n.PolyUtil=Hs,n.Polygon=Xt,n.Polyline=Rt,n.Popup=Ze,n.PosAnimation=mi,n.Projection=Xs,n.Rectangle=Fi,n.Renderer=Nt,n.SVG=ve,n.SVGOverlay=ki,n.TileLayer=jt,n.Tooltip=Ve,n.Transformation=je,n.Util=ie,n.VideoOverlay=Ri,n.bind=d,n.bounds=ht,n.canvas=zi,n.circle=sr,n.circleMarker=or,n.control=de,n.divIcon=pr,n.extend=l,n.featureGroup=er,n.geoJSON=Ai,n.geoJson=lr,n.gridLayer=mr,n.icon=nr,n.imageOverlay=ur,n.latLng=Z,n.latLngBounds=X,n.layerGroup=tr,n.map=Os,n.marker=ir,n.point=k,n.polygon=ar,n.polyline=rr,n.popup=fr,n.rectangle=vr,n.setOptions=S,n.stamp=_,n.svg=Oi,n.svgOverlay=cr,n.tileLayer=bi,n.tooltip=dr,n.transformation=se,n.version=s,n.videoOverlay=hr;var Tr=window.L;n.noConflict=function(){return window.L=Tr,this},window.L=n})}(ye,ye.exports)),ye.exports}var Pe=ih();/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const oh=`Sen, sıradan turist rotalarının ötesine geçen, dünyanın gizli kalmış harikalarını ortaya çıkaran deneyimli bir kaşif ve kültürel antropologsun. Görevin, derin bir bilgelik ve özgün bir bakış açısıyla, haritada gerçekten büyüleyici ve az bilinen yerler önermektir.

ANA KURALLAR:
1.  **ÖZGÜNLÜK ESASTIR:** Asla Paris, Roma, Tokyo gibi klişe turistik yerleri önerme. Amacın, kullanıcıyı şaşırtmak ve ona yeni bir ufuk açmaktır.
2.  **GÜVENLİK ÖNCELİKLİDİR:** Aktif savaş bölgeleri, politik olarak aşırı istikrarsız ülkeler veya ulaşımı insan hayatını tehlikeye atacak kadar zor olan yerlerden kesinlikle kaçın.
3.  **TÜRKÇE İLETİŞİM:** Tüm yanıtların ve açıklamaların akıcı ve doğal bir Türkçe ile olmalıdır.

YANIT FORMATI:
1.  **AÇIKLAMA (2 Cümle):** Önerdiğin yerin neden büyüleyici olduğunu, tarihi önemini, eşsiz doğal güzelliğini veya kültürel benzersizliğini vurgulayan iki cümlelik bir açıklama yap.
2.  **FONKSİYON ÇAĞRISI:** Açıklamadan sonra, \`recommendPlace\` fonksiyonunu çağır.
    *   \`location\`: Konum adını 'Yer Adı, Ülke' formatında ve **İNGİLİZCE** olarak ver. (Örnek: 'Socotra Island, Yemen'). Bu, harita servisinin doğru çalışması için kritiktir.
    *   \`caption\`: Fonksiyon için hazırlayacağın başlık, yaptığın iki cümlelik açıklamanın kısa ve öz bir özeti olmalıdır.`,sh=[["🗿 Antik","Bana az bilinen ama medeniyet tarihinde önemli bir iz bırakmış antik bir harabe veya şehir öner."],["🗽 Metropol","Bana kültürel dokusu zengin, sanat ortamı canlı ve klişelerden uzak, dinamik bir metropol göster."],["🌿 Yeşil","Beni el değmemiş, ekolojik olarak benzersiz ve biyolojik çeşitliliği ile büyüleyen bir doğa harikasına götür."],["🍲 Gastronomik","Bana az bilinen ama kendine özgü mutfağıyla bir lezzet devrimi yaratan bir şehir veya bölge öner."],["🙏 Manevi","Bana farklı inançlar için tarihi veya manevi önemi büyük olan, mimari olarak etkileyici bir tapınak, manastır veya kutsal mekan öner."]],rh={name:"recommendPlace",parameters:{type:Te.OBJECT,description:"Kullanıcıya sağlanan yerin haritasını gösterir.",properties:{location:{type:Te.STRING,description:"Ülke adını da içerecek şekilde belirli bir yer belirt. Lokasyon adını İNGİLİZCE olarak ver (örn: Vostok Station, Antarctica)."},caption:{type:Te.STRING,description:"Yer adını ve bu belirli yeri seçmendeki büyüleyici sebebi ver. Başlığı maksimum bir veya iki cümle tut."}},required:["location","caption"]}},ee=document.querySelector("#caption"),ah=document.querySelector("#map-container");let bt,Ce=null,Nn=null;const bn=new Set;async function lh(r){const i=new AbortController;Ce=i,ee.textContent="Yeni bir lokasyon aranıyor...",ee.classList.remove("hidden");const n=3;let s=!1;for(let l=1;l<=n&&!i.signal.aborted;l++){console.log(`Attempt ${l}/${n} to find a unique, mappable location...`);try{const f=new eh({vertexai:!1,apiKey:"AIzaSyBOeW4H_-LApRhJpliuglbgVqWHsn17FXM"}),d=Array.from(bn).join(", "),p=`${oh}

Kullanıcının isteği: "${r}"

LÜTFEN DİKKAT: Kullanıcıya daha önce şu yerleri önerdin, bunları kesinlikle tekrar önerme: [${d}]. Her zaman yeni, taze ve yaratıcı bir öneride bulun. (Rastgele tohum: ${Math.random().toString(36).substring(7)})`,_=await f.models.generateContentStream({model:"gemini-2.0-flash-exp",contents:p,config:{temperature:1.5,tools:[{functionDeclarations:[rh]}]}});for await(const v of _){if(i.signal.aborted)break;const T=v.functionCalls??[];for(const w of T)if(w.name==="recommendPlace"&&w.args&&!i.signal.aborted){const x=w.args.location.trim(),E=w.args.caption;if(bn.has(x)){console.warn(`'${x}' was already suggested. Skipping.`);continue}if(await is(x)){console.log(`✅ Success! '${x}' is mappable.`),bn.add(x),ee.textContent=E,s=!0;break}else console.warn(`'${x}' is not mappable. Trying again...`)}if(s)break}}catch(f){if(i.signal.aborted){console.log("Aborted request error caught and ignored.");break}console.error("API Error on attempt "+l,f)}if(s)break}!s&&!i.signal.aborted&&(ee.textContent="Uygun bir konum bulunamadı. Lütfen başka bir kategori deneyin.",bt.eachLayer(l=>{l instanceof Pe.Marker&&bt.removeLayer(l)}),bt.setView([20,0],2)),Ce===i&&(Ce=null,document.querySelector("#presets").querySelectorAll("button").forEach(f=>f.disabled=!1),console.log("UI Unlocked."))}async function is(r){if(console.log(`🗺️ Verifying map for: "${r}"`),!r)return!1;try{const n=await(await fetch(`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(r)}&limit=1`)).json();if(n&&n.length>0){const s=parseFloat(n[0].lat),l=parseFloat(n[0].lon);return bt.eachLayer(f=>{f instanceof Pe.Marker&&bt.removeLayer(f)}),bt.setView([s,l],10),Pe.marker([s,l]).addTo(bt).bindPopup(n[0].display_name||r).openPopup(),!0}else return console.warn(`❌ No geocoding results for: "${r}"`),!1}catch(i){return console.error(`❌ Geocoding or map rendering error for "${r}":`,i),!1}}async function uh(){window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?document.documentElement.removeAttribute("data-theme"):document.documentElement.setAttribute("data-theme","light"),bt=Pe.map(ah),Pe.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:'© <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',maxZoom:19}).addTo(bt);const r=document.querySelector("#presets");r.querySelectorAll("button");for(const i of sh){const n=document.createElement("button");n.textContent=i[0],n.addEventListener("click",()=>{r.querySelectorAll("button").forEach(s=>s.disabled=!0),Ce&&Ce.abort(),Nn&&clearTimeout(Nn),console.log("Debounce timer set..."),ee.textContent="Düşünüyor...",ee.classList.remove("hidden"),Nn=window.setTimeout(()=>{lh(i[1])},400)}),r.append(n)}await is("Istanbul, Turkey")}uh();
